(()=>{"use strict";var e={160:(e,t,n)=>{var a=n(609),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=a.useSyncExternalStore,s=a.useRef,l=a.useEffect,i=a.useMemo,c=a.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,a,u){var d=s(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=i(function(){function e(e){if(!l){if(l=!0,o=e,e=a(e),void 0!==u&&p.hasValue){var t=p.value;if(u(t,e))return s=t}return s=e}if(t=s,r(o,e))return t;var n=a(e);return void 0!==u&&u(t,n)?(o=e,t):(o=e,s=n)}var o,s,l=!1,i=void 0===n?null:n;return[function(){return e(t())},null===i?void 0:function(){return e(i())}]},[t,n,a,u]);var m=o(e,d[0],d[1]);return l(function(){p.hasValue=!0,p.value=m},[m]),c(m),m}},338:(e,t,n)=>{var a=n(795);a.createRoot,a.hydrateRoot},418:(e,t,n)=>{e.exports=n(160)},609:e=>{e.exports=window.React},795:e=>{e.exports=window.ReactDOM}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}var a=n(609);const r=window.wp.i18n,o=e=>{const t=e.skipTags||[],n=e=>{const a=document.createElement("div");a.innerHTML=e;const r=a.firstElementChild;if(!r)return e;let o=r.childNodes,s=o.length;if(s>0){o=Array.from(o).sort((e,t)=>3===e.nodeType?-1:3===t.nodeType?1:0);for(let e=0;e<s;e++){let t=o[e];if(3===t.nodeType){let e=t.textContent.replace(/^\s+|^\.\s+|^\s.|\s+$|\.\s+$|\s.\+$/g,e=>`#lmat_page_translation_open_translate_span#${e}#lmat_page_translation_close_translate_span#`);t.textContent=e}else if(8===t.nodeType){let e=`\x3c!--${t.textContent}--\x3e`;t.textContent=e}else{let e=n(t.outerHTML);t.outerHTML=e}}}let l=r.outerHTML.match(/^<[^>]+>/)[0];l=l.replace(/#lmat_page_translation_open_translate_span#|#lmat_page_translation_close_translate_span#/g,"");const i=r.tagName.toLowerCase(),c=new RegExp(`</${i}>`,"i"),u=r.outerHTML.match(c);if("<style>"===l)return`#lmat_page_translation_open_translate_span#${r.outerHTML}#lmat_page_translation_close_translate_span#`;let d=r.innerHTML;d=d.replace(/^\s+|^\.\s+|^\s.|\s+$|\.\s+$|\s.\+$/g,e=>`#lmat_page_translation_open_translate_span#${e}#lmat_page_translation_close_translate_span#`),r.innerHTML="";let p="",m="",g="";return m=`#lmat_page_translation_open_translate_span#${l}#lmat_page_translation_close_translate_span#`,u&&(p=`#lmat_page_translation_open_translate_span#</${i}>#lmat_page_translation_close_translate_span#`),t.includes(i)&&(d=d.replace(/#lmat_page_translation_open_translate_span#|#lmat_page_translation_close_translate_span#/g,""),d="#lmat_page_translation_open_translate_span#"+d+"#lmat_page_translation_close_translate_span#"),""!==d?(""!==m&&(g=m+d),""!==p&&(g+=p)):g=m+p,r.outerHTML=g,a.innerHTML},a=["yandex","localAiTranslator","google"].includes(e.service)?(t=>{/^(_yoast_wpseo_|rank_math_|_seopress_)/.test(e.contentKey.trim())&&(t=(e=>e.replace(/(%{1,2}[a-zA-Z0-9_]+%{0,2})/g,e=>`#lmat_page_translation_open_translate_span#${e}#lmat_page_translation_close_translate_span#`))(t));const a=/\[(.*?)\]/g;t.match(a)&&(t=t.replace(a,e=>`#lmat_page_translation_open_translate_span#${e}#lmat_page_translation_close_translate_span#`));const r=document.createElement("div");r.innerHTML=function(e){if("string"!=typeof e||!e.trim())return e;const t=/<\/?([a-zA-Z0-9]+)(\s[^>]*)?>/g,n=[];let a,r="",o=0;for(;null!==(a=t.exec(e));){const[s,l]=a,i=s.startsWith("</"),c=a.index;if(c>o&&(r+=e.slice(o,c)),i){const e=n.findIndex(e=>e.tag===l);-1!==e?(n.splice(e,1),r+=s):r+=`#lmat_page_translation_temp_tag_open#<${l}>#lmat_page_translation_temp_tag_close#`+s}else n.push({tag:l}),r+=s;o=t.lastIndex}o<e.length&&(r+=e.slice(o));for(let e=n.length-1;e>=0;e--){const{tag:t}=n[e];r+=`#lmat_page_translation_temp_tag_open#</${t}>#lmat_page_translation_temp_tag_close#`}return a=null,n.length=0,e=null,r}(t),function(e){let t=e.childNodes;const a=e=>{if(t.length>e){let r=t[e],o=null;if(3===r.nodeType){const e=r.textContent.replace(/^\s+|^\.\s+|^\s.|\s+$|\.\s+$|\s.\+$/g,e=>`#lmat_page_translation_open_translate_span#${e}#lmat_page_translation_close_translate_span#`);o=document.createTextNode(e)}else if(8===r.nodeType)o=document.createTextNode(`\x3c!--${r.textContent}--\x3e`);else{let e=n(r.outerHTML);o=document.createTextNode(e)}r.replaceWith(o),e++,a(e)}};a(0)}(r);let o=r.innerText;return o=o.replace(/#lmat_page_translation_temp_tag_open#([\s\S]*?)#lmat_page_translation_temp_tag_close#/g,""),(e=>e.split(/(#lmat_page_translation_open_translate_span#.*?#lmat_page_translation_close_translate_span#)|'/).filter(Boolean).filter(e=>""!==e.trim()))(o)})(e.content):e.content,r=/#lmat_page_translation_open_translate_span#[\s\S]*?#lmat_page_translation_close_translate_span#/,o=/#lmat_page_translation_open_translate_span#|#lmat_page_translation_close_translate_span#/g;return React.createElement(React.Fragment,null,["yandex","localAiTranslator","google"].includes(e.service)?a.map((e,t)=>r.test(e)?React.createElement("span",{key:t,className:"notranslate lmat-page-translation-notraslate-tag",translate:"no"},(e=>e.replace(o,""))(e)):e):a)};var s=n(795);const l=async e=>{const t=document.createElement("div"),n=s.createRoot(t);return new Promise(a=>{n.render(e),setTimeout(()=>{const e=t.innerHTML;n.unmount(),t.remove(),a(e)},0)})};function i(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var c=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),u=()=>Math.random().toString(36).substring(7).split("").join("."),d={INIT:`@@redux/INIT${u()}`,REPLACE:`@@redux/REPLACE${u()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${u()}`};function p(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function m(e,t,n){if("function"!=typeof e)throw new Error(i(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(i(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(i(1));return n(m)(e,t)}let a=e,r=t,o=new Map,s=o,l=0,u=!1;function g(){s===o&&(s=new Map,o.forEach((e,t)=>{s.set(t,e)}))}function f(){if(u)throw new Error(i(3));return r}function h(e){if("function"!=typeof e)throw new Error(i(4));if(u)throw new Error(i(5));let t=!0;g();const n=l++;return s.set(n,e),function(){if(t){if(u)throw new Error(i(6));t=!1,g(),s.delete(n),o=null}}}function _(e){if(!p(e))throw new Error(i(7));if(void 0===e.type)throw new Error(i(8));if("string"!=typeof e.type)throw new Error(i(17));if(u)throw new Error(i(9));try{u=!0,r=a(r,e)}finally{u=!1}return(o=s).forEach(e=>{e()}),e}return _({type:d.INIT}),{dispatch:_,subscribe:h,getState:f,replaceReducer:function(e){if("function"!=typeof e)throw new Error(i(10));a=e,_({type:d.REPLACE})},[c]:function(){const e=h;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(i(11));function n(){const e=t;e.next&&e.next(f())}return n(),{unsubscribe:e(n)}},[c](){return this}}}}}function g(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...n)=>e(t(...n)))}function f(e){return({dispatch:t,getState:n})=>a=>r=>"function"==typeof r?r(t,n,e):a(r)}var h=f(),_=f,y=Symbol.for("immer-nothing"),b=Symbol.for("immer-draftable"),E=Symbol.for("immer-state");function v(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var T=Object.getPrototypeOf;function w(e){return!!e&&!!e[E]}function S(e){return!!e&&(C(e)||Array.isArray(e)||!!e[b]||!!e.constructor?.[b]||L(e)||A(e))}var k=Object.prototype.constructor.toString();function C(e){if(!e||"object"!=typeof e)return!1;const t=T(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===k}function N(e,t){0===x(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,a)=>t(a,n,e))}function x(e){const t=e[E];return t?t.type_:Array.isArray(e)?1:L(e)?2:A(e)?3:0}function P(e,t){return 2===x(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function O(e,t,n){const a=x(e);2===a?e.set(t,n):3===a?e.add(n):e[t]=n}function L(e){return e instanceof Map}function A(e){return e instanceof Set}function I(e){return e.copy_||e.base_}function R(e,t){if(L(e))return new Map(e);if(A(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=C(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[E];let n=Reflect.ownKeys(t);for(let a=0;a<n.length;a++){const r=n[a],o=t[r];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[r]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[r]})}return Object.create(T(e),t)}{const t=T(e);if(null!==t&&n)return{...e};const a=Object.create(t);return Object.assign(a,e)}}function D(e,t=!1){return M(e)||w(e)||!S(e)||(x(e)>1&&(e.set=e.add=e.clear=e.delete=$),Object.freeze(e),t&&Object.entries(e).forEach(([e,t])=>D(t,!0))),e}function $(){v(2)}function M(e){return Object.isFrozen(e)}var j,H={};function z(e){const t=H[e];return t||v(0),t}function B(){return j}function F(e,t){t&&(z("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function U(e){G(e),e.drafts_.forEach(q),e.drafts_=null}function G(e){e===j&&(j=e.parent_)}function W(e){return j={drafts_:[],parent_:j,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function q(e){const t=e[E];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function K(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[E].modified_&&(U(t),v(4)),S(e)&&(e=V(t,e),t.parent_||Y(t,e)),t.patches_&&z("Patches").generateReplacementPatches_(n[E].base_,e,t.patches_,t.inversePatches_)):e=V(t,n,[]),U(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==y?e:void 0}function V(e,t,n){if(M(t))return t;const a=t[E];if(!a)return N(t,(r,o)=>X(e,a,t,r,o,n)),t;if(a.scope_!==e)return t;if(!a.modified_)return Y(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const t=a.copy_;let r=t,o=!1;3===a.type_&&(r=new Set(t),t.clear(),o=!0),N(r,(r,s)=>X(e,a,t,r,s,n,o)),Y(e,t,!1),n&&e.patches_&&z("Patches").generatePatches_(a,n,e.patches_,e.inversePatches_)}return a.copy_}function X(e,t,n,a,r,o,s){if(w(r)){const s=V(e,r,o&&t&&3!==t.type_&&!P(t.assigned_,a)?o.concat(a):void 0);if(O(n,a,s),!w(s))return;e.canAutoFreeze_=!1}else s&&n.add(r);if(S(r)&&!M(r)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;V(e,r),t&&t.scope_.parent_||"symbol"==typeof a||!Object.prototype.propertyIsEnumerable.call(n,a)||Y(e,r)}}function Y(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&D(t,n)}var Z={get(e,t){if(t===E)return e;const n=I(e);if(!P(n,t))return function(e,t,n){const a=ee(t,n);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}(e,n,t);const a=n[t];return e.finalized_||!S(a)?a:a===Q(e.base_,t)?(ne(e),e.copy_[t]=ae(a,e)):a},has:(e,t)=>t in I(e),ownKeys:e=>Reflect.ownKeys(I(e)),set(e,t,n){const a=ee(I(e),t);if(a?.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const a=Q(I(e),t),s=a?.[E];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((r=n)===(o=a)?0!==r||1/r==1/o:r!=r&&o!=o)&&(void 0!==n||P(e.base_,t)))return!0;ne(e),te(e)}var r,o;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Q(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,ne(e),te(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=I(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:a.enumerable,value:n[t]}:a},defineProperty(){v(11)},getPrototypeOf:e=>T(e.base_),setPrototypeOf(){v(12)}},J={};function Q(e,t){const n=e[E];return(n?I(n):e)[t]}function ee(e,t){if(!(t in e))return;let n=T(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=T(n)}}function te(e){e.modified_||(e.modified_=!0,e.parent_&&te(e.parent_))}function ne(e){e.copy_||(e.copy_=R(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function ae(e,t){const n=L(e)?z("MapSet").proxyMap_(e,t):A(e)?z("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),a={type_:n?1:0,scope_:t?t.scope_:B(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=a,o=Z;n&&(r=[a],o=J);const{revoke:s,proxy:l}=Proxy.revocable(r,o);return a.draft_=l,a.revoke_=s,l}(e,t);return(t?t.scope_:B()).drafts_.push(n),n}function re(e){if(!S(e)||M(e))return e;const t=e[E];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=R(e,t.scope_.immer_.useStrictShallowCopy_)}else n=R(e,!0);return N(n,(e,t)=>{O(n,e,re(t))}),t&&(t.finalized_=!1),n}N(Z,(e,t)=>{J[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),J.deleteProperty=function(e,t){return J.set.call(this,e,t,void 0)},J.set=function(e,t,n){return Z.set.call(this,e[0],t,n,e[0])};var oe=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const a=this;return function(e=n,...r){return a.produce(e,e=>t.call(this,e,...r))}}let a;if("function"!=typeof t&&v(6),void 0!==n&&"function"!=typeof n&&v(7),S(e)){const r=W(this),o=ae(e,void 0);let s=!0;try{a=t(o),s=!1}finally{s?U(r):G(r)}return F(r,n),K(a,r)}if(!e||"object"!=typeof e){if(a=t(e),void 0===a&&(a=e),a===y&&(a=void 0),this.autoFreeze_&&D(a,!0),n){const t=[],r=[];z("Patches").generateReplacementPatches_(e,a,t,r),n(t,r)}return a}v(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,t=>e(t,...n));let n,a;return[this.produce(e,t,(e,t)=>{n=e,a=t}),n,a]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){var t;S(e)||v(8),w(e)&&(w(t=e)||v(10),e=re(t));const n=W(this),a=ae(e,void 0);return a[E].isManual_=!0,G(n),a}finishDraft(e,t){const n=e&&e[E];n&&n.isManual_||v(9);const{scope_:a}=n;return F(a,t),K(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(0===a.path.length&&"replace"===a.op){e=a.value;break}}n>-1&&(t=t.slice(n+1));const a=z("Patches").applyPatches_;return w(e)?a(e,t):this.produce(e,e=>a(e,t))}},se=oe.produce;oe.produceWithPatches.bind(oe),oe.setAutoFreeze.bind(oe),oe.setUseStrictShallowCopy.bind(oe),oe.applyPatches.bind(oe),oe.createDraft.bind(oe),oe.finishDraft.bind(oe);var le="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?g:g.apply(null,arguments)};function ie(e,t){function n(...n){if(t){let a=t(...n);if(!a)throw new Error(ve(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>function(e){return p(e)&&"type"in e&&"string"==typeof e.type}(t)&&t.type===e,n}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var ce=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function ue(e){return S(e)?se(e,()=>{}):e}function de(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var pe=e=>t=>{setTimeout(t,e)};function me(e){const t={},n=[];let a;const r={addCase(e,n){const a="string"==typeof e?e:e.type;if(!a)throw new Error(ve(28));if(a in t)throw new Error(ve(29));return t[a]=n,r},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),r),addDefaultCase:e=>(a=e,r)};return e(r),[t,n,a]}var ge=Symbol.for("rtk-slice-createasyncthunk");function fe(e,t){return`${e}/${t}`}function he({creators:e}={}){const t=e?.asyncThunk?.[ge];return function(e){const{name:n,reducerPath:a=n}=e;if(!n)throw new Error(ve(11));const r=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(r),s={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},l={addCase(e,t){const n="string"==typeof e?e:e.type;if(!n)throw new Error(ve(12));if(n in s.sliceCaseReducersByType)throw new Error(ve(13));return s.sliceCaseReducersByType[n]=t,l},addMatcher:(e,t)=>(s.sliceMatchers.push({matcher:e,reducer:t}),l),exposeAction:(e,t)=>(s.actionCreators[e]=t,l),exposeCaseReducer:(e,t)=>(s.sliceCaseReducersByName[e]=t,l)};function i(){const[t={},n=[],a]="function"==typeof e.extraReducers?me(e.extraReducers):[e.extraReducers],r={...t,...s.sliceCaseReducersByType};return function(e){let t,[o,l,i]=me(e=>{for(let t in r)e.addCase(t,r[t]);for(let t of s.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);a&&e.addDefaultCase(a)});if("function"==typeof e)t=()=>ue(e());else{const n=ue(e);t=()=>n}function c(e=t(),n){let a=[o[n.type],...l.filter(({matcher:e})=>e(n)).map(({reducer:e})=>e)];return 0===a.filter(e=>!!e).length&&(a=[i]),a.reduce((e,t)=>{if(t){if(w(e)){const a=t(e,n);return void 0===a?e:a}if(S(e))return se(e,e=>t(e,n));{const a=t(e,n);if(void 0===a){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return a}}return e},e)}return c.getInitialState=t,c}(e.initialState)}o.forEach(a=>{const o=r[a],s={reducerName:a,type:fe(n,a),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(o)?function({type:e,reducerName:t,createNotation:n},a,r){let o,s;if("reducer"in a){if(n&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(a))throw new Error(ve(17));o=a.reducer,s=a.prepare}else o=a;r.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,s?ie(e,s):ie(e))}(s,o,l):function({type:e,reducerName:t},n,a,r){if(!r)throw new Error(ve(18));const{payloadCreator:o,fulfilled:s,pending:l,rejected:i,settled:c,options:u}=n,d=r(e,o,u);a.exposeAction(t,d),s&&a.addCase(d.fulfilled,s),l&&a.addCase(d.pending,l),i&&a.addCase(d.rejected,i),c&&a.addMatcher(d.settled,c),a.exposeCaseReducer(t,{fulfilled:s||be,pending:l||be,rejected:i||be,settled:c||be})}(s,o,l,t)});const c=e=>e,u=new Map,d=new WeakMap;let p;function m(e,t){return p||(p=i()),p(e,t)}function g(){return p||(p=i()),p.getInitialState()}function f(t,n=!1){function a(e){let r=e[t];return void 0===r&&n&&(r=de(d,a,g)),r}function r(t=c){const a=de(u,n,()=>new WeakMap);return de(a,t,()=>{const a={};for(const[r,o]of Object.entries(e.selectors??{}))a[r]=_e(o,t,()=>de(d,t,g),n);return a})}return{reducerPath:t,getSelectors:r,get selectors(){return r(a)},selectSlice:a}}const h={name:n,reducer:m,actions:s.actionCreators,caseReducers:s.sliceCaseReducersByName,getInitialState:g,...f(a),injectInto(e,{reducerPath:t,...n}={}){const r=t??a;return e.inject({reducerPath:r,reducer:m},n),{...h,...f(r,!0)}}};return h}}function _e(e,t,n,a){function r(r,...o){let s=t(r);return void 0===s&&a&&(s=n()),e(s,...o)}return r.unwrapped=e,r}var ye=he();function be(){}var{assign:Ee}=Object;function ve(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}Symbol.for("rtk-state-proxy-original");const Te=ye({name:"lmat-bulk-translate",initialState:{completedPosts:[],pendingPosts:[],parentPostsInfo:{},translatePostInfo:[],progressStatus:0,targetLanguages:[],countInfo:{totalPosts:0,postsTranslated:0,stringsTranslated:0,charactersTranslated:0},translatedContent:{},serviceProvider:"",blockParseRules:{}},reducers:{updateCompletedPosts:(e,t)=>{e.completedPosts=[...e.completedPosts||[],...t.payload]},updatePendingPosts:(e,t)=>{e.pendingPosts=[...e.pendingPosts||[],...t.payload]},unsetPendingPost:(e,t)=>{e.pendingPosts=e.pendingPosts.filter(e=>e!==t.payload)},updateTranslatePostInfo:(e,t)=>{t.payload&&"object"==typeof t.payload&&(Array.isArray(t.payload)||(e.translatePostInfo={...e.translatePostInfo,...Object.keys(t.payload).reduce((n,a)=>(n[a]={...e.translatePostInfo?.[a]||{},...t.payload[a]},n),{})}))},updateProgressStatus:(e,t)=>{e.progressStatus+=t.payload},updateCountInfo:(e,t)=>{e.countInfo={...e.countInfo,...t.payload}},updateSourceContent:(e,t)=>{e.translatedContent={...e.translatedContent,[t.payload.postId]:{...e.translatedContent?.[t.payload.postId]||{},[t.payload.uniqueKey]:{...e.translatedContent?.[t.payload.postId]?.[t.payload.uniqueKey]||{},source:t.payload.value}}}},updateTargetContent:(e,t)=>{e.translatedContent={...e.translatedContent,[t.payload.postId]:{...e.translatedContent?.[t.payload.postId]||{},[t.payload.uniqueKey]:{...e.translatedContent?.[t.payload.postId]?.[t.payload.uniqueKey]||{},targetContent:t.payload.value}}}},updateTranslatedContent:(e,t)=>{e.translatedContent={...e.translatedContent,[t.payload.postId]:{...e.translatedContent?.[t.payload.postId]||{},[t.payload.uniqueKey]:{...e.translatedContent?.[t.payload.postId]?.[t.payload.uniqueKey]||{},translation:{...t.payload.translation||{},[t.payload.provider]:{...t.payload.translation?.[t.payload.provider]||{},[t.payload.key]:t.payload.value}}}}}},updateParentPostsInfo:(e,t)=>{e.parentPostsInfo={...e.parentPostsInfo,[t.payload.postId]:{...e.parentPostsInfo?.[t.payload.postId]||{},...t.payload.data}}},updateServiceProvider:(e,t)=>{["localAiTranslator","google","google_ai","openai_ai","openrouter_ai"].includes(t.payload)&&(e.serviceProvider=t.payload)},updateTargetLanguages:(e,t)=>{t.payload.lang&&t.payload.lang.length>0&&(e.targetLanguages=[...e.targetLanguages,...t.payload.lang])},updateBlockParseRules:(e,t)=>{e.blockParseRules=t.payload},resetStore:e=>{e.pendingPosts=[],e.progressStatus=0,e.completedPosts=[],e.translatePostInfo=[],e.targetLanguages=[],e.serviceProvider="",e.parentPostsInfo={},e.countInfo={totalPosts:0,postsTranslated:0,stringsTranslated:0,charactersTranslated:0},e.translatedContent={},e.blockParseRules={}}}}),{updateTranslationsLanguages:we,updateCompletedPosts:Se,updatePendingPosts:ke,unsetPendingPost:Ce,updateTranslatePostInfo:Ne,updateProgressStatus:xe,updateCountInfo:Pe,updateSourceContent:Oe,updateTranslatedContent:Le,resetStore:Ae,updateTargetContent:Ie,updateParentPostsInfo:Re,updateServiceProvider:De,updateTargetLanguages:$e,updateBlockParseRules:Me}=Te.actions,je=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:r=!0}=e??{};let o=new ce;return t&&("boolean"==typeof t?o.push(h):o.push(_(t.extraArgument))),o},{reducer:n,middleware:a,devTools:r=!0,duplicateMiddlewareCheck:o=!0,preloadedState:s,enhancers:l}=e||{};let c,u;if("function"==typeof n)c=n;else{if(!p(n))throw new Error(ve(1));c=function(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const r=t[a];"function"==typeof e[r]&&(n[r]=e[r])}const a=Object.keys(n);let r;try{!function(e){Object.keys(e).forEach(t=>{const n=e[t];if(void 0===n(void 0,{type:d.INIT}))throw new Error(i(12));if(void 0===n(void 0,{type:d.PROBE_UNKNOWN_ACTION()}))throw new Error(i(13))})}(n)}catch(e){r=e}return function(e={},t){if(r)throw r;let o=!1;const s={};for(let r=0;r<a.length;r++){const l=a[r],c=n[l],u=e[l],d=c(u,t);if(void 0===d)throw t&&t.type,new Error(i(14));s[l]=d,o=o||d!==u}return o=o||a.length!==Object.keys(e).length,o?s:e}}(n)}u="function"==typeof a?a(t):t();let f=g;r&&(f=le({trace:!1,..."object"==typeof r&&r}));const y=function(...e){return t=>(n,a)=>{const r=t(n,a);let o=()=>{throw new Error(i(15))};const s={getState:r.getState,dispatch:(e,...t)=>o(e,...t)},l=e.map(e=>e(s));return o=g(...l)(r.dispatch),{...r,dispatch:o}}}(...u),b=(e=>function(t){const{autoBatch:n=!0}=t??{};let a=new ce(e);return n&&a.push(((e={type:"raf"})=>t=>(...n)=>{const a=t(...n);let r=!0,o=!1,s=!1;const l=new Set,i="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:pe(10):"callback"===e.type?e.queueNotification:pe(e.timeout),c=()=>{s=!1,o&&(o=!1,l.forEach(e=>e()))};return Object.assign({},a,{subscribe(e){const t=a.subscribe(()=>r&&e());return l.add(e),()=>{t(),l.delete(e)}},dispatch(e){try{return r=!e?.meta?.RTK_autoBatch,o=!r,o&&(s||(s=!0,i(c))),a.dispatch(e)}finally{r=!0}}})})("object"==typeof n?n:void 0)),a})(y);return m(c,s,f(..."function"==typeof l?l(b):b()))}({reducer:Te.reducer}),He=(e,t,n,a,r)=>{r(Oe({postId:e,uniqueKey:t,value:n})),r(Ie({postId:e,uniqueKey:t,value:a}));const o=je.getState().parentPostsInfo[e],s=(o?.charactersCount||0)+n.length,l=(o?.wordsCount||0)+n.split(/\s+/).filter(e=>/[^\p{L}\p{N}]/.test(e)).length,i=(o?.stringsCount||0)+n.split(/(?<=[.!?]+)\s+/).length;r(Re({postId:e,data:{charactersCount:s,wordsCount:l,stringsCount:i}}))},ze=async({content:e,service:t,postId:n,storeDispatch:a,filterHtmlContent:r})=>{const s=async(e,t,n)=>{await e(t[n],n),++n<t.length&&await s(e,t,n)};await(async({content:e,service:t})=>{const i=(e=>{const t=[],n=/(\r\n|\r|\n)/g;let a,r=0;for(;null!==(a=n.exec(e));){a.index>r&&t.push(e.slice(r,a.index));const o=a[0];t.push(`lmat_bulk_content__skip_${o}_lmat_bulk_content_`),r=n.lastIndex}return r<e.length&&t.push(e.slice(r)),t})(e);i.length>0&&await s(async(e,s)=>{const i=/^&[a-zA-Z0-9#]+;$/.test(e),c=/^<\/?\s*[a-zA-Z0-9#]+\s*\/?>$/.test(e),u=/^<\s*\/?\s*[a-zA-Z0-9#]+\s*><\/\s*\/?\s*[a-zA-Z0-9#]+\s*>$/.test(e),d=/<!--[\s\S]*?-->/g.test(e)&&e.indexOf("\x3c!--")<e.indexOf("--\x3e"),p=!(i||c||u||d);if(""!==e&&!e.includes("lmat_bulk_content__skip_")&&p){let i=e;if(r){let n=o({content:e,service:t,contentKey:"content_classic_index_"+s,skipTags:[]});i=await l(n),n=null}He(n,"content_classic_index_"+s,e,i,a)}},i,0)})({content:e,service:t})},Be=async({content:e,service:t,postId:n,storeDispatch:a,filterHtmlContent:r})=>{const s={},i=async(e,t,n)=>{await e(t[n],n),++n<t.length&&await i(e,t,n)},c=async(e,i)=>{if("string"==typeof i&&""!==i.trim()&&e.length>0){const c=e.join("_lmat_bulk_content__");let u=i;if(r){let e=o({content:i,service:t,contentKey:c,skipTags:["script","style"]});u=await l(e),e=null}He(n,c,i,u,a),u&&""!==u&&(s[c]=u)}},u=["content_width","title_size","font_size","margin","padding","background","border","color","text_align","font_weight","font_family","line_height","letter_spacing","text_transform","border_radius","box_shadow","opacity","width","height","display","position","z_index","visibility","align","max_width","content_typography_typography","flex_justify_content","title_color","description_color","email_content"],d=["title","description","editor","text","content","label"],p=async(e,t,n=[])=>{const a=e.settings;if(n.push(t),"object"==typeof a&&null!==a&&Object.keys(a).length>0){const e=async(e,t)=>{if(!u.some(t=>e.toLowerCase().includes(t))&&(d.some(t=>e.toLowerCase().includes(t))&&"string"==typeof a[e]&&""!==a[e].trim()&&await c([...n,"settings",e],a[e]),Array.isArray(a[e])&&a[e].length>0)){const t=async(t,a)=>{if("object"==typeof t&&null!==t){const r=async r=>{u.includes(r.toLowerCase())||d.some(e=>r.toLowerCase().includes(e))&&"string"==typeof t[r]&&""!==t[r].trim()&&await c([...n,"settings",e,a,r],t[r])};await i(r,Object.keys(t),0)}};await i(t,a[e],0)}};await i(e,Object.keys(a),0)}if(e.elements&&Array.isArray(e.elements)&&e.elements.length>0){const t=async(e,t)=>{await p(e,t,[...n,"elements"])};await i(t,e.elements,0)}};if(e&&e.length>0){const t=async(e,t)=>{await p(e,t,["content"])};await i(t,e,0)}},Fe=async({content:e,service:t,blockParseRules:n,postId:a,storeDispatch:r,filterHtmlContent:s})=>{const i=Object.keys(n?.LmatBlockParseRules),c=(JSON.parse(JSON.stringify(e)),async(e,t,n)=>{await e(t[n],n),++n<t.length&&await c(e,t,n)}),u=async(e,n,a=[])=>{let r=e;if(s){let s=o({content:e,service:t,contentKey:n,skipTags:a});r=await l(s),s=null}return r},d=async(e,t,n)=>{He(a,e,t,n,r)},p=async(e,t)=>{let a=!1,r=[];if(i.includes(t.blockName)&&t.attrs&&Object.keys(t.attrs).length>0&&(r=await f([...e,"attrs"],t,n?.LmatBlockParseRules[t.blockName])),t.innerContent&&t.innerContent.length>0&&r.length>0){const e=t.innerContent.join(" ");let n=document.createElement("div");n.innerHTML=e;const o=n.innerText.split(" ").length;let s=0;r.forEach(e=>{n.innerText.includes(e)&&(s+=e.split(" ").length)}),100*s/o>97&&(a=!0),n=null}if(t.innerContent&&t.innerContent.length>0&&!a){let n=t.innerHTML?t.innerHTML.trim():"";n=n.replace(/\s/g,""),n&&""!==n&&await m([...e,"innerContent"],t.innerContent)}if(t.innerBlocks&&t.innerBlocks.length>0){const n=async(t,n)=>{await p([...e,"innerBlocks",n],t)};await c(n,t.innerBlocks,0)}},m=async(e,t)=>{await c(async(n,a)=>{let r=document.createElement("div");if(r.innerHTML=n,""===r.innerText.trim())return;r=null;let o=n?n.trim():"";if(o=o.replace(/\s/g,""),o&&""!==o){const n=[...e,a].join("_lmat_bulk_translate_temp_"),r=await u(t[a],n,["script","style"]);r&&""!==r&&d(n,t[a],r)}},t,0)},g=async(e,t,n,a=[])=>{if(Object.getPrototypeOf(e)===Object.prototype){const r=Object.keys(e),o=async(r,o)=>{if("boolean"==typeof e[r]&&!0===e[r]&&n[r]){const e=[...t,r].join("_lmat_bulk_translate_temp_"),o=await u(n[r],e);o&&""!==o&&(a.push(o),d(e,n[r],o))}else Object.getPrototypeOf(e[r])!==Object.prototype&&Object.getPrototypeOf(e[r])!==Array.prototype||await g(e[r],[...t,r],n[r])};await c(o,r,0)}else if(Object.getPrototypeOf(e)===Array.prototype){const r=async(n,r)=>{if("boolean"==typeof e[0]&&!0===e[0]){const e=[...t,r].join("_lmat_bulk_content__"),o=await u(n,e);o&&""!==o&&(a.push(o),d(e,n,o))}else Object.getPrototypeOf(e[0])!==Object.prototype&&Object.getPrototypeOf(e[0])!==Array.prototype||await g(e[0],[...t,r],n,a)};await c(r,n,0)}},f=async(e,t,n)=>{const a=[];let r=t?.attrs;const o=Object.keys(r),s=Object.keys(n?.attributes).filter(e=>o.includes(e));return await c(async(t,o)=>{const s=n?.attributes[t],l=JSON.parse(JSON.stringify(e));if(!0===s){l.push(t);const e=l.join("_lmat_bulk_content__");if(r[t]&&""!==r[t]){const n=await u(r[t],e);n&&""!==n&&(a.push(n),d(e,r[t],n))}}else"object"==typeof s&&await g(s,[...e,t],r[t],a)},s,0),a};await(async e=>{await c(async(t,a)=>{if(i.includes(e[t].blockName)&&e[t].attrs)await p(["content",t],e[t],n?.LmatBlockParseRules[e[t].blockName]);else if(e[t].innerBlocks&&e[t].innerBlocks.length>0){const n=async(e,n)=>{await p(["content",t,"innerBlocks",n],e)};await c(n,e[t].innerBlocks,0)}},Object.keys(e),0)})(e)},Ue=e=>e.serviceProvider,Ge=e=>e.pendingPosts,We=e=>e.translatePostInfo,qe=e=>e.progressStatus,Ke=e=>e.countInfo,Ve=(e,t,n,a,r)=>e.translatedContent[t]?.[n]?.translation?.[r]?.[a]||e.translatedContent[t]?.[n]?.source,Xe=(e,t)=>{const n={};return Object.keys(e.translatedContent[t]).forEach(a=>{e.translatedContent[t][a]?.source&&(n[a]=e.translatedContent[t][a]?.source)}),n},Ye=async({source:e,lang:t,serviceProvider:n,postId:a})=>{const r=async(e,t,n)=>{await e(t[n],n),++n<t.length&&await r(e,t,n)};return await(async(e,r)=>{r&&""!==r&&(e.title=await Ve(je.getState(),a,"title",t,n))})(e,e.title),await(async({content:o})=>{const s=function(e){const t=[],n=/(\r\n|\r|\n)/g;let a,r=0;for(;null!==(a=n.exec(e));){a.index>r&&t.push(e.slice(r,a.index));const o=a[0];t.push(`lmat_bulk_content__skip_${o}_lmat_bulk_content_`),r=n.lastIndex}return r<e.length&&t.push(e.slice(r)),t}(o),l=[];s.length>0&&await r(async(e,r)=>{const o=/^&[a-zA-Z0-9#]+;$/.test(e),s=/^<\/?\s*[a-zA-Z0-9#]+\s*\/?>$/.test(e),i=/^<\s*\/?\s*[a-zA-Z0-9#]+\s*><\/\s*\/?\s*[a-zA-Z0-9#]+\s*>$/.test(e),c=/<!--[\s\S]*?-->/g.test(e)&&e.indexOf("\x3c!--")<e.indexOf("--\x3e"),u=!(o||s||i||c);if(""!==e&&!e.includes("lmat_bulk_content__skip_")&&u){const e="content_classic_index_"+r,o=Ve(je.getState(),a,e,t,n);l.push(o)}else if(e.includes("lmat_bulk_content__skip_")){const t=e.replace("lmat_bulk_content__skip_","").replace("_lmat_bulk_content_","");l.push(t)}else l.push(e)},s,0),e.content=l.join("")})({content:e.content}),e},Ze=async({source:e,lang:t,translatedContent:n,serviceProvider:a,postId:r})=>{const o=e=>Ve(je.getState(),r,e,t,a);return((e,t)=>{Object.keys(t).forEach(n=>{const a=n.split("_lmat_bulk_content__");if("title"===a[0])((e,t)=>{t&&""!==t&&(e.title=o("title"))})(e,t[a[0]]);else if("content"===a[0]){let t=a,r=e.content;const s=o(n);let l=null,i=null;t=t.slice(1),t.forEach(e=>{l=r,i=e,r=r[e]}),l&&i&&((e,t,n)=>{!e||!e[t]||""===e[t].trim()||(e[t]=n)})(l,i,s)}})})(e,n),e},Je=async({source:e,lang:t,translatedContent:n,serviceProvider:a,postId:r})=>{const o=[];je.getState().blockParseRules;const s=Xe(je.getState(),r),l=(e,t,n)=>!(!e||!e[t]||""===e[t].trim()||(e[t]=n,0)),i=t=>{const a=t.replace(/(_lmat_bulk_content__\d+)$/,""),r=Object.keys(n).filter(e=>e.includes(a));o.push(...r);const s=[];r.forEach(t=>{let n=t.split("_lmat_bulk_content__"),a=e.content;const r=c(t);let o=null,i=null;n=n.slice(1),n.forEach(e=>{o=a,i=e,a=a[e]}),o&&i&&o[i]&&l(o,i,r)&&s.push(r)});let i=null,u=null,d=e.content;a.split("_lmat_bulk_content__").slice(1).forEach(e=>{i=d,u=e,d=d[e]}),i&&u&&i[u]&&"innerContent"===u&&i.innerHTML&&""!==i.innerHTML.trim()&&l(i,"innerHTML",s.join(""))},c=e=>Ve(je.getState(),r,e,t,a),u=n=>{if(Object.keys(s).filter(e=>e.startsWith("content_lmat_bulk_content__"+n+"_lmat_bulk_content__innerContent")).length>0)return;let o=Object.keys(s).filter(e=>e.startsWith("content_lmat_bulk_content__"+n+"_lmat_bulk_content__attrs")),l={};o.forEach(e=>{const n=((e,t,n)=>e.translatedContent[t]?.[n]?.source)(je.getState(),r,e),o=Ve(je.getState(),r,e,t,a);n&&o&&""!==n&&""!==o&&(l[n]=o)});let i=Object.entries(l).sort((e,t)=>t[0].split(/\s+/).length-e[0].split(/\s+/).length).reduce((e,[t,n])=>(e[t]=n,e),{}),c=n.split("_lmat_bulk_content__"),u=e.content,p=null,m=null;c.forEach(e=>{p=u,m=e,u=u[e]}),d(u,i),o=null,l=null,i=null,c=null,u=null,p=null,m=null},d=(e,t)=>{if(e&&e.innerHTML&&""!==e.innerHTML.trim()){if("core/more"===e.blockName){const n=Object.keys(t)[0],a=t[n],r=new RegExp(`\x3c!--more\\s+${n}`,"g");return e.innerHTML=e.innerHTML.replace(r,`\x3c!--more ${a}`),void(e.innerContent&&e.innerContent.length>0&&e.innerContent.forEach((t,r)=>{const o=new RegExp(`\x3c!--more\\s+${n}`,"g");e.innerContent[r]=t.replace(o,`\x3c!--more ${a}`)}))}let n=e.innerHTML;Object.keys(t).forEach(e=>{const a=new RegExp(`(?<!<[^>]*)${e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}(?![^<]*>)`,"g");n=n.replace(a,t[e])}),e.innerHTML=n,n=null,e.innerContent&&e.innerContent.length>0&&e.innerContent.forEach((n,a)=>{if(n&&n&&""!==n.trim()){let r=n;Object.keys(t).forEach(e=>{const n=new RegExp(`(?<!<[^>]*)${e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}(?![^<]*>)`,"g");r=r.replace(n,t[e])}),e.innerContent[a]=r,r=null}})}};return((e,t)=>{const n=[];Object.keys(t).forEach(a=>{const r=a.split("_lmat_bulk_content__");if("title"===r[0])((e,t)=>{t&&""!==t&&(e.title=c("title"))})(e,t[r[0]]);else if("content"===r[0]){let t=r,s=e.content;const u=c(a);let d=null,p=null;if(t=t.slice(1),t.includes("attrs")){const a=t.indexOf("attrs"),r=t.slice(0,a);let o=null,s=e.content;const l=r.join("_lmat_bulk_content__");n.includes(l)||(r.forEach(e=>{o=e,s=s[e]}),(s&&"core/more"===s.blockName||s&&!s.blockName.startsWith("core/")&&(s.innerHTML&&""!==s.innerHTML.trim()||s.originalContent&&""!==s.originalContent.trim()))&&n.push(l))}t.forEach(e=>{d=s,p=e,s=s[e]}),d&&p&&a.includes("innerContent")&&!o.includes(a)?i(a):d&&p&&l(d,p,u)}}),n.forEach(e=>{u(e)})})(e,n),e},Qe=(e,t,n,a,r,o,s)=>{(({postId:e,key:t,lang:n,storeDispatch:a})=>{const r=je.getState().translatedContent[e][t]?.source;if(r){const t=r.split(/(?<=[.!?]+)\s+/).length,o=r.trim().split(/\s+/).filter(e=>/[^\p{L}\p{N}]/.test(e)).length,s=r.length,l=je.getState().translatePostInfo[e+"_"+n],i=l?.stringsTranslated||0,c=l?.charactersTranslated||0,u=l?.wordsTranslated||0;a(Ne({[e+"_"+n]:{stringsTranslated:i+t,charactersTranslated:c+s,wordsTranslated:u+o}})),a(Pe({stringsTranslated:je.getState().countInfo.stringsTranslated+t,charactersTranslated:je.getState().countInfo.charactersTranslated+s}))}})({postId:e,key:t,lang:o,storeDispatch:s}),s(Le({postId:e,uniqueKey:t,key:n,provider:r,value:a}))},et=e=>{const{element:t,scrollSpeed:n,prefix:a,completedPostStatus:r,totalPosts:o,postId:s,lang:l}=e;if(t.scrollHeight-t.offsetHeight<=0)return;let i=null,c=t.scrollTop;const u=()=>{const e=t.scrollHeight-t.offsetHeight+100,d=performance.now();i||(i=d);const p=c+(d-i)/n*(e+2e3-c);var m=t.scrollTop/(t.scrollHeight-t.clientHeight)*100;let g=(Math.round(10*m)/10).toFixed(2);g=Math.min(g,100).toString(),nt(a,s,l,g,r,o),p>e||(t.scrollTop=p,p<e&&requestAnimationFrame(u))};requestAnimationFrame(u)},tt=({provider:e,startTime:t,endTime:n,prefix:a,postId:r,lang:o,storeDispatch:s})=>{document.querySelector(`#${a}-${e}-table-container[data-render-id="${r}"]`)&&(({provider:e,startTime:t,endTime:n,prefix:a,postId:r,lang:o,storeDispatch:s})=>{const l=document.querySelector(`#${a}-${e}-table-container[data-render-id="${r}"]`);l&&l.querySelectorAll(`.${a}-${e}-table-cell`).forEach((t,n)=>{const a=t.innerText,l=t.dataset.key;Qe(r,l,o,a,e,o,s)})})({provider:e,startTime:t,endTime:n,prefix:a,postId:r,lang:o,storeDispatch:s})},nt=(e,t,n,a,r,o)=>{const s=document.querySelector(`.${e}-progress-bar-circular[data-id="${t}_${n}"]`);let l=a;l=Math.round(l),l=Math.min(l,100),s&&(s.querySelector(`.${e}-percentage`).innerHTML=l+"%",s.querySelector(`.${e}-progress`).style.strokeDasharray=l+", 100");let i=r+a/o;const c=document.querySelector(`.${e}-overall-progress .${e}-progress`);c&&(i=i.toFixed(2),i=Math.min(i,100),c.style.width=i+"%",c.innerHTML=i+"%")},at=class{constructor({sourceLang:e="en",targetLangs:t=!1,updateContent:n,totalPosts:a,storeDispatch:r,postId:o,prefix:s,updateDestoryHandler:l}){this.sourceLang=e,this.targetLangs=t,this.updateContent=n,this.totalPosts=a,this.storeDispatch=r,this.postId=o,this.prefix=s,this.updateDestoryHandler=l,this.stopTranslation=!1,this.textContentObject=((e,t)=>{const n={};return e.translatedContent[t]&&Object.keys(e.translatedContent[t]).length>0&&Object.keys(e.translatedContent[t]).forEach(a=>{e.translatedContent[t][a]?.targetContent&&(n[a]=e.translatedContent[t][a]?.targetContent)}),n})(je.getState(),o),this.appendStringTable(),l(()=>{this.destroy()})}destroy=()=>{this.stopTranslation=!0};createGoogleTranslator=async(e,t)=>{if(this.stopTranslation)return;this.completedTranslateIndex=0,this.googleTranslator=null;const n=lmatBulkTranslationGlobal.languageObject;if(this.completedPostStatus=qe(je.getState()),["ab","ace","ach","aa","af","sq","alz","am","ar","hy","as","av","awa","ay","az","ban","bal","bm","bci","ba","eu","btx","bts","bbc","be","bem","bn","bew","bho","bik","bs","br","bg","bua","yue","ca","ceb","ch","ce","ny","zh-CN","zh-TW","chk","cv","co","crh","crh-Latn","hr","cs","da","fa-AF","dv","din","doi","dov","nl","dyu","dz","en","eo","et","ee","fo","fj","tl","fi","fon","fr","fr-CA","fy","fur","ff","gaa","gl","ka","de","el","gn","gu","ht","cnh","ha","haw","iw","hil","hi","hmn","hu","hrx","iba","is","ig","ilo","id","iu-Latn","iu","ga","it","jam","ja","jw","kac","kl","kn","kr","pam","kk","kha","km","cgg","kg","rw","ktu","trp","kv","gom","ko","kri","ku","ckb","ky","lo","ltg","la","lv","lij","li","ln","lt","lmo","lg","luo","lb","mk","mad","mai","mak","mg","ms","ms-Arab","ml","mt","mam","gv","mi","mr","mh","mwr","mfe","chm","mni-Mtei","min","lus","mn","my","nhe","ndc-ZW","nr","new","ne","bm-Nkoo","no","nus","oc","or","om","os","pag","pap","ps","fa","pl","pt","pt-PT","pa","pa-Arab","qu","kek","rom","ro","rn","ru","se","sm","sg","sa","sat-Latn","sat","gd","nso","sr","st","crs","shn","sn","scn","szl","sd","si","sk","sl","so","es","su","sus","sw","ss","sv","ty","tg","ber-Latn","ber","ta","tt","te","tet","th","bo","ti","tiv","tpi","to","lua","ts","tn","tcy","tum","tr","tk","tyv","ak","udm","uk","ur","ug","uz","ve","vec","vi","war","cy","wo","xh","sah","yi","yo","yua","zap","zu"].includes(this.filterLanguage(e))){this.activeTargetLang=e,this.storeDispatch(Ne({[this.postId+"_"+e]:{status:"running",messageClass:""}})),this.startTime=new Date;const t=await this.translateContent();this.stopTranslation||(this.storeDispatch(xe(100/this.totalPosts)),t&&(this.updateContent(e),await new Promise(e=>setTimeout(e,500))))}else this.storeDispatch(Ce(this.postId+"_"+e)),this.storeDispatch(xe(100/this.totalPosts)),this.storeDispatch(Ne({[this.postId+"_"+e]:{status:"error",messageClass:"error",errorMessage:(0,r.sprintf)((0,r.__)("Language %s(%s) is not supported by Google Translate","linguator-multilingual-ai-translation"),n[e].name,e),errorHtml:!1}}));this.startTime=null,t<this.targetLangs.length-1&&!this.stopTranslation&&await this.createGoogleTranslator(this.targetLangs[t+1],t+1)};appendTranslateWidget=async()=>{var e,t;(e=je.getState(),t=this.postId,e.parentPostsInfo[t]?.languages).map(e=>this.filterLanguage(e)),this.googleTranslator=new google.translate.TranslateElement({pageLanguage:this.sourceLang,defaultLanguage:this.sourceLang,multilanguagePage:!0,autoDisplay:!1},`${this.prefix}-google-translate-btn`);const n=document.querySelector(`#${this.prefix}-google-translate-btn`);n&&n.children.length<=0&&Object.values(google?.translate?.TranslateElement()).map(e=>{e instanceof HTMLElement&&e.id===`${this.prefix}-google-translate-btn`&&n.replaceWith(e)})};appendStringTable=()=>{const e=jQuery(`#${this.prefix}-google-table-container`),t=jQuery(`#${this.prefix}-container`);if(e&&e.length>0){e.find(`#${this.prefix}-google-translate-strings-container`).remove(),e.attr("data-render-id",this.postId);const t=`<div id="${this.prefix}-google-translate-strings-container">\n            ${Object.keys(this.textContentObject).map(e=>`\n                <div class="${this.prefix}-google-table-row">\n                    <div class="${this.prefix}-google-table-cell" data-key="${e}">${this.textContentObject[e]}</div>\n                </div>\n            `).join("")}\n            </div>`;e.append(t)}else{const e=`\n            <div id="${this.prefix}-google-table-container" class="translate" data-render-id="${this.postId}">\n            <div id="${this.prefix}-google-translate-btn">Translate</div>\n            <div id="${this.prefix}-google-translate-strings-container">\n            ${Object.keys(this.textContentObject).map(e=>`\n                <div class="${this.prefix}-google-table-row">\n                    <div class="${this.prefix}-google-table-cell" data-key="${e}">${this.textContentObject[e]}</div>\n                </div>\n            `).join("")}\n            </div>\n            </div>\n            `;t.append(e)}document.documentElement.setAttribute("translate","no"),document.body.classList.add("notranslate")};translateContent=async()=>{const e=document.querySelector(`#${this.prefix}-google-translate-btn .goog-te-combo`);if(await new Promise(e=>setTimeout(e,1e3)),e){if(!e.querySelector('option[value="'+this.filterLanguage(this.activeTargetLang)+'"]')){const e=lmatBulkTranslationGlobal.languageObject;return this.storeDispatch(Ne({[this.postId+"_"+this.activeTargetLang]:{status:"error",messageClass:"error",errorMessage:(0,r.sprintf)((0,r.__)("Language %s(%s) is not supported by Google Translate","linguator-multilingual-ai-translation"),e[this.activeTargetLang].name,this.activeTargetLang),errorHtml:!1}})),!1}if(document.body.classList.add(this.prefix+"-google-translate"),e.value=this.filterLanguage(this.activeTargetLang),e.dispatchEvent(new Event("change")),await new Promise(e=>setTimeout(e,1500)),this.stopTranslation)return!1;await(async({provider:e,prefix:t,postId:n,lang:a,storeDispatch:r,totalPosts:o,completedPostStatus:s})=>{const l=(new Date).getTime();let i=!1;const c=document.querySelector(`#${t}-${e}-table-container[data-render-id="${n}"]`);c.scrollTop=0;const u=c.scrollHeight;await new Promise(d=>{if(c)if("number"==typeof u&&u>100){const p=()=>{if("visible"===document.visibilityState){const e=1e3*Math.ceil(u/(c.offsetHeight||1));et({element:c,scrollSpeed:e,prefix:t,totalPosts:o,completedPostStatus:s,postId:n,lang:a})}};document.addEventListener("visibilitychange",p),setTimeout(()=>{const r=1e3*Math.ceil(u/(c.offsetHeight||1));et({element:c,scrollSpeed:r,provider:e,prefix:t,totalPosts:o,completedPostStatus:s,postId:n,lang:a})},500);const m=()=>{if(c.scrollTop+c.clientHeight+50>=c.scrollHeight&&!i){i=!0,c.removeEventListener("scroll",m);const u=(new Date).getTime();nt(t,n,a,100,s,o),document.removeEventListener("visibilitychange",p),setTimeout(()=>{tt({provider:e,startTime:l,endTime:u,prefix:t,postId:n,lang:a,storeDispatch:r}),d("Complete")},1e3)}};c.addEventListener("scroll",m),(c.clientHeight||0)+10>=u&&(nt(t,n,a,100,s,o),setTimeout(()=>{const o=(new Date).getTime();document.removeEventListener("visibilitychange",p),tt({provider:e,startTime:l,endTime:o,prefix:t,postId:n,lang:a,storeDispatch:r}),d("Complete")},1e3))}else nt(t,n,a,100,s,o),setTimeout(()=>{const o=(new Date).getTime();tt({provider:e,startTime:l,endTime:o,prefix:t,postId:n,lang:a,storeDispatch:r}),d("Complete")},1e3);else d("No container")})})({provider:"google",prefix:this.prefix,postId:this.postId,lang:this.activeTargetLang,storeDispatch:this.storeDispatch,totalPosts:this.totalPosts,completedPostStatus:this.completedPostStatus});const t=new Date-this.startTime,n=We(je.getState(),(this.postId,this.activeTargetLang)).duration||0;return this.storeDispatch(Ne({[this.postId+"_"+this.activeTargetLang]:{duration:n+t}})),!0}};filterLanguage=e=>"zh"===e?lmatBulkTranslationGlobal.languageObject.zh?.locale.replace("_","-"):e;async initTranslation(){this.textContentObject&&Object.keys(this.textContentObject).length>0&&this.targetLangs&&this.targetLangs.length>0&&!this.stopTranslation?(this.appendTranslateWidget(),await this.createGoogleTranslator(this.targetLangs[0],0)):this.targetLangs&&this.targetLangs.length>0&&!this.stopTranslation&&this.targetLangs.forEach(e=>{this.storeDispatch(Ce(this.postId+"_"+e)),this.storeDispatch(xe(100/this.totalPosts)),this.storeDispatch(Ne({[this.postId+"_"+e]:{status:"error",messageClass:"error",errorMessage:(0,r.__)("No content to translate","linguator-multilingual-ai-translation"),errorHtml:!1}}))})}},rt=e=>{e=e||{};const{Service:t=!1,openErrorModalHandler:n=()=>{},prefix:a=""}=e,o=(window.lmatBulkTranslationGlobal.admin_url,window.lmatBulkTranslationGlobal.lmat_url+"Admin/Assets/images/error-icon.svg"),s={google:{Provider:at,title:"Google Translate",SettingBtnText:"Translate",serviceLabel:"Google Translate",Docs:"https://docs.coolplugins.net/doc/google-translate-for-polylang/?utm_source=lmat_plugin&utm_medium=inside&utm_campaign=docs&utm_content=bulk_translate_google",heading:(0,r.__)("Choose Language","linguator-multilingual-ai-translation"),BetaEnabled:!1,ButtonDisabled:e.googleButtonDisabled,ErrorMessage:e.googleButtonDisabled?React.createElement("div",{className:`${a}-provider-error button button-primary`,onClick:()=>n(e.googleButtonDisabled)},React.createElement("img",{src:o,alt:"error"})," ",(0,r.__)("View Error.","linguator-multilingual-ai-translation")):React.createElement(React.Fragment,null),Logo:"google.png",filterHtmlContent:!0},localAiTranslator:{title:"Chrome Built-in AI",SettingBtnText:"Translate",serviceLabel:"Chrome AI Translator",heading:(0,r.sprintf)((0,r.__)("Translate Using %s","autopoly-ai-translation-for-polylang"),"Chrome built-in API"),Docs:"https://docs.coolplugins.net/doc/chrome-ai-translation-polylang/?utm_source=lmat_page_translation_plugin&utm_medium=inside&utm_campaign=docs&utm_content=popup_chrome",BetaEnabled:!0,ButtonDisabled:!0,ErrorMessage:React.createElement("div",{className:"lmat-page-translation-provider-disabled button button-primary"},(0,r.__)("Upcoming Feature","autopoly-ai-translation-for-polylang")),Logo:"chrome.png"}};return t?s[t]:s},ot=async({source:e,postId:t,lang:n,editorType:a})=>{const r={classic:Ye,elementor:Ze,block:Je},o=Ue(je.getState()),s=Xe(je.getState(),t);return await r[a]({source:e,lang:n,translatedContent:s,serviceProvider:o,postId:t})},st=(window.wp.data,async({sourceLang:e,targetLangs:t,totalPosts:n,storeDispatch:a,postId:r,prefix:o,source:s,editorType:l,createTranslatePostNonce:i,updateDestoryHandler:c})=>{const u=je.getState().serviceProvider,d=rt({Service:u});if(d&&d.Provider){const u=new d.Provider({sourceLang:e,targetLangs:t,totalPosts:n,storeDispatch:a,postId:r,createTranslatePostNonce:i,updateContent:async t=>{await lt({source:s,postId:r,sourceLang:e,lang:t,editorType:l,createTranslatePostNonce:i,storeDispatch:a})},prefix:o,updateDestoryHandler:c});await u.initTranslation()}}),lt=async({source:e,postId:t,sourceLang:n,lang:a,editorType:o,createTranslatePostNonce:s,storeDispatch:l})=>{const i=je.getState().serviceProvider,c=JSON.parse(JSON.stringify(e)),u=await ot({source:c,postId:t,lang:a,editorType:o,service:i}),d=lmatBulkTranslationGlobal.bulkTranslateRouteUrl,p=lmatBulkTranslationGlobal.nonce;l(Ne({[t+"_"+a]:{status:"in-progress",messageClass:"in-progress"}})),await fetch(d+`/${t}:create-translate-post`,{method:"POST",body:new URLSearchParams({post_id:t,target_language:a,editor_type:o,post_title:u.title||"",post_content:u.content?JSON.stringify(u.content):"",post_meta_fields:u.metaFields?JSON.stringify(u.metaFields):"",privateKey:s,source_language:n}),headers:{"X-WP-Nonce":p,"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"}}).then(async e=>{const s=await e.json();let c={};if(s.success&&s.data.post_id)(({provider:e,sourceLang:t,targetLang:n,parentPostId:a,currentPostId:r,editorType:o,updateTranslateDataNonce:s})=>{if(!(s&&r&&a&&e&&t&&n&&o))return;const l=je.getState().parentPostsInfo[a],i=je.getState().translatePostInfo[a+"_"+n],c=i.stringsTranslated||0,u=i.wordsTranslated||0,d=i.charactersTranslated||0,p=(i.duration||0)/1e3,m=l.wordsCount||0,g=l.charactersCount||0,f=l.stringsCount||0,h={provider:e,totalStringCount:c,totalWordCount:u,totalCharacterCount:d,editorType:o,date:(new Date).toISOString(),sourceStringCount:f,sourceWordCount:m,sourceCharacterCount:g,sourceLang:t,targetLang:n,timeTaken:p,action:lmatBulkTranslationGlobal.update_translate_data,update_translation_key:s,post_id:r,ajax_url:lmatBulkTranslationGlobal.ajax_url};fetch(lmatBulkTranslationGlobal.ajax_url,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams(h)}).then(e=>e.json()).then(e=>{console.log(e.data.message)}).catch(e=>{console.error(e)})})({provider:i,sourceLang:n,targetLang:a,currentPostId:s.data.post_id,parentPostId:t,editorType:o,updateTranslateDataNonce:s?.data?.update_translate_data_nonce}),s.data.post_title=""===s.data.post_title?(0,r.__)("N/A","linguator-multilingual-ai-translation"):s.data.post_title,c={targetPostId:s.data.post_id,targetPostTitle:s.data.post_title,targetLanguage:a,postLink:s.data.post_link,postEditLink:s.data.post_edit_link,status:"completed",messageClass:"success"},l(Pe({postsTranslated:je.getState().countInfo.postsTranslated+1}));else if(s.data&&s.data.error){let e="Error Code:"+s.data.status;"string"==typeof s.data.error&&(e+="<br>Error Message:"+s.data.error+"("+s.data.error+")"),"object"==typeof s.data.error&&(e+="<br>Error Message:"+JSON.stringify(s.data.error)),c={status:"error",messageClass:"error",errorMessage:(0,r.__)("Post not created. Please try again.","linguator-multilingual-ai-translation"),errorHtml:'<div class="lmat-error-html">'+e+"</div>"}}else s.code&&s.message?c={status:"error",messageClass:"error",errorMessage:(0,r.__)("Post not created. Please try again.","linguator-multilingual-ai-translation"),errorHtml:'<div class="lmat-error-html">'+s.message+"</div>"}:!s.success||s.data?c={status:"error",messageClass:"error",errorMessage:(0,r.__)("Post not created. Please try again.","linguator-multilingual-ai-translation"),errorHtml:'<div class="lmat-error-html">'+s.data+"</div>"}:s.data.post_id?"string"==typeof s&&(c={status:"error",messageClass:"error",errorMessage:(0,r.__)("Post not created. Please try again.","linguator-multilingual-ai-translation"),errorHtml:'<div class="lmat-error-html">'+s+"</div>"}):c={status:"error",messageClass:"error",errorMessage:(0,r.__)("Post not created. Please try again.","linguator-multilingual-ai-translation"),errorHtml:'<div class="lmat-error-html">'+s.data+"</div>"};l(Ce(t+"_"+a)),l(Se([t+"_"+a])),l(Ne({[t+"_"+a]:c}))}).catch(e=>{console.log("testing",e),l(Ce(t+"_"+a)),l(Se([t+"_"+a]));let n=e;e.message&&(n=e.message),e.data&&e.data.status&&(n="Error Code:"+e.data.status,"string"==typeof e.data.error&&(n+="<br>Error Message:"+e.data.error),"object"==typeof e.data.error&&(n+="<br>Error Message:"+JSON.stringify(e.data.error))),l(Ne({[t+"_"+a]:{status:"error",messageClass:"error",errorMessage:(0,r.__)("Post not created. Please try again.","linguator-multilingual-ai-translation"),errorHtml:'<div class="lmat-error-html">'+n+"</div>"}}))})};var it=n(418);var ct={notify(){},get:()=>[]};var ut=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),dt=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),pt=(()=>ut||dt?a.useLayoutEffect:a.useEffect)();Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var mt=Symbol.for("react-redux-context"),gt="undefined"!=typeof globalThis?globalThis:{};function ft(){if(!a.createContext)return{};const e=gt[mt]??=new Map;let t=e.get(a.createContext);return t||(t=a.createContext(null),e.set(a.createContext,t)),t}var ht=ft(),_t=function(e){const{children:t,context:n,serverState:r,store:o}=e,s=a.useMemo(()=>{const e=function(e,t){let n,a=ct,r=0,o=!1;function s(){c.onStateChange&&c.onStateChange()}function l(){r++,n||(n=t?t.addNestedSub(s):e.subscribe(s),a=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){(()=>{let t=e;for(;t;)t.callback(),t=t.next})()},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let a=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){a&&null!==e&&(a=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}())}function i(){r--,n&&0===r&&(n(),n=void 0,a.clear(),a=ct)}const c={addNestedSub:function(e){l();const t=a.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),i())}},notifyNestedSubs:function(){a.notify()},handleChangeWrapper:s,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,l())},tryUnsubscribe:function(){o&&(o=!1,i())},getListeners:()=>a};return c}(o);return{store:o,subscription:e,getServerState:r?()=>r:void 0}},[o,r]),l=a.useMemo(()=>o.getState(),[o]);pt(()=>{const{subscription:e}=s;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==o.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[s,l]);const i=n||ht;return a.createElement(i.Provider,{value:s},t)};function yt(e=ht){return function(){return a.useContext(e)}}var bt=yt();function Et(e=ht){const t=e===ht?bt:yt(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var vt=Et();function Tt(e=ht){const t=e===ht?vt:Et(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var wt=Tt(),St=(e,t)=>e===t;function kt(e=ht){const t=e===ht?bt:yt(e),n=(e,n={})=>{const{equalityFn:r=St}="function"==typeof n?{equalityFn:n}:n,o=t(),{store:s,subscription:l,getServerState:i}=o,c=(a.useRef(!0),a.useCallback({[e.name]:t=>e(t)}[e.name],[e])),u=(0,it.useSyncExternalStoreWithSelector)(l.addNestedSub,s.getState,i||s.getState,c,r);return a.useDebugValue(u),u};return Object.assign(n,{withTypes:()=>n}),n}var Ct=kt();const Nt=window.wp.element,{entries:xt,setPrototypeOf:Pt,isFrozen:Ot,getPrototypeOf:Lt,getOwnPropertyDescriptor:At}=Object;let{freeze:It,seal:Rt,create:Dt}=Object,{apply:$t,construct:Mt}="undefined"!=typeof Reflect&&Reflect;It||(It=function(e){return e}),Rt||(Rt=function(e){return e}),$t||($t=function(e,t,n){return e.apply(t,n)}),Mt||(Mt=function(e,t){return new e(...t)});const jt=Qt(Array.prototype.forEach),Ht=Qt(Array.prototype.lastIndexOf),zt=Qt(Array.prototype.pop),Bt=Qt(Array.prototype.push),Ft=Qt(Array.prototype.splice),Ut=Qt(String.prototype.toLowerCase),Gt=Qt(String.prototype.toString),Wt=Qt(String.prototype.match),qt=Qt(String.prototype.replace),Kt=Qt(String.prototype.indexOf),Vt=Qt(String.prototype.trim),Xt=Qt(Object.prototype.hasOwnProperty),Yt=Qt(RegExp.prototype.test),Zt=(Jt=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Mt(Jt,t)});var Jt;function Qt(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return $t(e,t,a)}}function en(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ut;Pt&&Pt(e,null);let a=t.length;for(;a--;){let r=t[a];if("string"==typeof r){const e=n(r);e!==r&&(Ot(t)||(t[a]=e),r=e)}e[r]=!0}return e}function tn(e){for(let t=0;t<e.length;t++)Xt(e,t)||(e[t]=null);return e}function nn(e){const t=Dt(null);for(const[n,a]of xt(e))Xt(e,n)&&(Array.isArray(a)?t[n]=tn(a):a&&"object"==typeof a&&a.constructor===Object?t[n]=nn(a):t[n]=a);return t}function an(e,t){for(;null!==e;){const n=At(e,t);if(n){if(n.get)return Qt(n.get);if("function"==typeof n.value)return Qt(n.value)}e=Lt(e)}return function(){return null}}const rn=It(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),on=It(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),sn=It(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ln=It(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),cn=It(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),un=It(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),dn=It(["#text"]),pn=It(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),mn=It(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),gn=It(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),fn=It(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),hn=Rt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),yn=Rt(/<%[\w\W]*|[\w\W]*%>/gm),bn=Rt(/\$\{[\w\W]*/gm),En=Rt(/^data-[\-\w.\u00B7-\uFFFF]+$/),vn=Rt(/^aria-[\-\w]+$/),Tn=Rt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),wn=Rt(/^(?:\w+script|data):/i),Sn=Rt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),kn=Rt(/^html$/i),Cn=Rt(/^[a-z][.\w]*(-[.\w]+)+$/i);var Nn=Object.freeze({__proto__:null,ARIA_ATTR:vn,ATTR_WHITESPACE:Sn,CUSTOM_ELEMENT:Cn,DATA_ATTR:En,DOCTYPE_NAME:kn,ERB_EXPR:yn,IS_ALLOWED_URI:Tn,IS_SCRIPT_OR_DATA:wn,MUSTACHE_EXPR:hn,TMPLIT_EXPR:bn});const xn=function(){return"undefined"==typeof window?null:window};var Pn=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn();const n=t=>e(t);if(n.version="3.2.6",n.removed=[],!t||!t.document||9!==t.document.nodeType||!t.Element)return n.isSupported=!1,n;let{document:a}=t;const r=a,o=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:l,Node:i,Element:c,NodeFilter:u,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:p,DOMParser:m,trustedTypes:g}=t,f=c.prototype,h=an(f,"cloneNode"),_=an(f,"remove"),y=an(f,"nextSibling"),b=an(f,"childNodes"),E=an(f,"parentNode");if("function"==typeof l){const e=a.createElement("template");e.content&&e.content.ownerDocument&&(a=e.content.ownerDocument)}let v,T="";const{implementation:w,createNodeIterator:S,createDocumentFragment:k,getElementsByTagName:C}=a,{importNode:N}=r;let x={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof xt&&"function"==typeof E&&w&&void 0!==w.createHTMLDocument;const{MUSTACHE_EXPR:P,ERB_EXPR:O,TMPLIT_EXPR:L,DATA_ATTR:A,ARIA_ATTR:I,IS_SCRIPT_OR_DATA:R,ATTR_WHITESPACE:D,CUSTOM_ELEMENT:$}=Nn;let{IS_ALLOWED_URI:M}=Nn,j=null;const H=en({},[...rn,...on,...sn,...cn,...dn]);let z=null;const B=en({},[...pn,...mn,...gn,...fn]);let F=Object.seal(Dt(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),U=null,G=null,W=!0,q=!0,K=!1,V=!0,X=!1,Y=!0,Z=!1,J=!1,Q=!1,ee=!1,te=!1,ne=!1,ae=!0,re=!1,oe=!0,se=!1,le={},ie=null;const ce=en({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ue=null;const de=en({},["audio","video","img","source","image","track"]);let pe=null;const me=en({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ge="http://www.w3.org/1998/Math/MathML",fe="http://www.w3.org/2000/svg",he="http://www.w3.org/1999/xhtml";let _e=he,ye=!1,be=null;const Ee=en({},[ge,fe,he],Gt);let ve=en({},["mi","mo","mn","ms","mtext"]),Te=en({},["annotation-xml"]);const we=en({},["title","style","font","a","script"]);let Se=null;const ke=["application/xhtml+xml","text/html"];let Ce=null,Ne=null;const xe=a.createElement("form"),Pe=function(e){return e instanceof RegExp||e instanceof Function},Oe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ne||Ne!==e){if(e&&"object"==typeof e||(e={}),e=nn(e),Se=-1===ke.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,Ce="application/xhtml+xml"===Se?Gt:Ut,j=Xt(e,"ALLOWED_TAGS")?en({},e.ALLOWED_TAGS,Ce):H,z=Xt(e,"ALLOWED_ATTR")?en({},e.ALLOWED_ATTR,Ce):B,be=Xt(e,"ALLOWED_NAMESPACES")?en({},e.ALLOWED_NAMESPACES,Gt):Ee,pe=Xt(e,"ADD_URI_SAFE_ATTR")?en(nn(me),e.ADD_URI_SAFE_ATTR,Ce):me,ue=Xt(e,"ADD_DATA_URI_TAGS")?en(nn(de),e.ADD_DATA_URI_TAGS,Ce):de,ie=Xt(e,"FORBID_CONTENTS")?en({},e.FORBID_CONTENTS,Ce):ce,U=Xt(e,"FORBID_TAGS")?en({},e.FORBID_TAGS,Ce):nn({}),G=Xt(e,"FORBID_ATTR")?en({},e.FORBID_ATTR,Ce):nn({}),le=!!Xt(e,"USE_PROFILES")&&e.USE_PROFILES,W=!1!==e.ALLOW_ARIA_ATTR,q=!1!==e.ALLOW_DATA_ATTR,K=e.ALLOW_UNKNOWN_PROTOCOLS||!1,V=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,X=e.SAFE_FOR_TEMPLATES||!1,Y=!1!==e.SAFE_FOR_XML,Z=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,te=e.RETURN_DOM_FRAGMENT||!1,ne=e.RETURN_TRUSTED_TYPE||!1,Q=e.FORCE_BODY||!1,ae=!1!==e.SANITIZE_DOM,re=e.SANITIZE_NAMED_PROPS||!1,oe=!1!==e.KEEP_CONTENT,se=e.IN_PLACE||!1,M=e.ALLOWED_URI_REGEXP||Tn,_e=e.NAMESPACE||he,ve=e.MATHML_TEXT_INTEGRATION_POINTS||ve,Te=e.HTML_INTEGRATION_POINTS||Te,F=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Pe(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(F.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Pe(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(F.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(F.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),X&&(q=!1),te&&(ee=!0),le&&(j=en({},dn),z=[],!0===le.html&&(en(j,rn),en(z,pn)),!0===le.svg&&(en(j,on),en(z,mn),en(z,fn)),!0===le.svgFilters&&(en(j,sn),en(z,mn),en(z,fn)),!0===le.mathMl&&(en(j,cn),en(z,gn),en(z,fn))),e.ADD_TAGS&&(j===H&&(j=nn(j)),en(j,e.ADD_TAGS,Ce)),e.ADD_ATTR&&(z===B&&(z=nn(z)),en(z,e.ADD_ATTR,Ce)),e.ADD_URI_SAFE_ATTR&&en(pe,e.ADD_URI_SAFE_ATTR,Ce),e.FORBID_CONTENTS&&(ie===ce&&(ie=nn(ie)),en(ie,e.FORBID_CONTENTS,Ce)),oe&&(j["#text"]=!0),Z&&en(j,["html","head","body"]),j.table&&(en(j,["tbody"]),delete U.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw Zt('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw Zt('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');v=e.TRUSTED_TYPES_POLICY,T=v.createHTML("")}else void 0===v&&(v=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const a="data-tt-policy-suffix";t&&t.hasAttribute(a)&&(n=t.getAttribute(a));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(g,o)),null!==v&&"string"==typeof T&&(T=v.createHTML(""));It&&It(e),Ne=e}},Le=en({},[...on,...sn,...ln]),Ae=en({},[...cn,...un]),Ie=function(e){Bt(n.removed,{element:e});try{E(e).removeChild(e)}catch(t){_(e)}},Re=function(e,t){try{Bt(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){Bt(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(ee||te)try{Ie(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},De=function(e){let t=null,n=null;if(Q)e="<remove></remove>"+e;else{const t=Wt(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===Se&&_e===he&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=v?v.createHTML(e):e;if(_e===he)try{t=(new m).parseFromString(r,Se)}catch(e){}if(!t||!t.documentElement){t=w.createDocument(_e,"template",null);try{t.documentElement.innerHTML=ye?T:r}catch(e){}}const o=t.body||t.documentElement;return e&&n&&o.insertBefore(a.createTextNode(n),o.childNodes[0]||null),_e===he?C.call(t,Z?"html":"body")[0]:Z?t.documentElement:o},$e=function(e){return S.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},Me=function(e){return e instanceof p&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof d)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},je=function(e){return"function"==typeof i&&e instanceof i};function He(e,t,a){jt(e,e=>{e.call(n,t,a,Ne)})}const ze=function(e){let t=null;if(He(x.beforeSanitizeElements,e,null),Me(e))return Ie(e),!0;const a=Ce(e.nodeName);if(He(x.uponSanitizeElement,e,{tagName:a,allowedTags:j}),Y&&e.hasChildNodes()&&!je(e.firstElementChild)&&Yt(/<[/\w!]/g,e.innerHTML)&&Yt(/<[/\w!]/g,e.textContent))return Ie(e),!0;if(7===e.nodeType)return Ie(e),!0;if(Y&&8===e.nodeType&&Yt(/<[/\w]/g,e.data))return Ie(e),!0;if(!j[a]||U[a]){if(!U[a]&&Fe(a)){if(F.tagNameCheck instanceof RegExp&&Yt(F.tagNameCheck,a))return!1;if(F.tagNameCheck instanceof Function&&F.tagNameCheck(a))return!1}if(oe&&!ie[a]){const t=E(e)||e.parentNode,n=b(e)||e.childNodes;if(n&&t)for(let a=n.length-1;a>=0;--a){const r=h(n[a],!0);r.__removalCount=(e.__removalCount||0)+1,t.insertBefore(r,y(e))}}return Ie(e),!0}return e instanceof c&&!function(e){let t=E(e);t&&t.tagName||(t={namespaceURI:_e,tagName:"template"});const n=Ut(e.tagName),a=Ut(t.tagName);return!!be[e.namespaceURI]&&(e.namespaceURI===fe?t.namespaceURI===he?"svg"===n:t.namespaceURI===ge?"svg"===n&&("annotation-xml"===a||ve[a]):Boolean(Le[n]):e.namespaceURI===ge?t.namespaceURI===he?"math"===n:t.namespaceURI===fe?"math"===n&&Te[a]:Boolean(Ae[n]):e.namespaceURI===he?!(t.namespaceURI===fe&&!Te[a])&&!(t.namespaceURI===ge&&!ve[a])&&!Ae[n]&&(we[n]||!Le[n]):!("application/xhtml+xml"!==Se||!be[e.namespaceURI]))}(e)?(Ie(e),!0):"noscript"!==a&&"noembed"!==a&&"noframes"!==a||!Yt(/<\/no(script|embed|frames)/i,e.innerHTML)?(X&&3===e.nodeType&&(t=e.textContent,jt([P,O,L],e=>{t=qt(t,e," ")}),e.textContent!==t&&(Bt(n.removed,{element:e.cloneNode()}),e.textContent=t)),He(x.afterSanitizeElements,e,null),!1):(Ie(e),!0)},Be=function(e,t,n){if(ae&&("id"===t||"name"===t)&&(n in a||n in xe))return!1;if(q&&!G[t]&&Yt(A,t));else if(W&&Yt(I,t));else if(!z[t]||G[t]){if(!(Fe(e)&&(F.tagNameCheck instanceof RegExp&&Yt(F.tagNameCheck,e)||F.tagNameCheck instanceof Function&&F.tagNameCheck(e))&&(F.attributeNameCheck instanceof RegExp&&Yt(F.attributeNameCheck,t)||F.attributeNameCheck instanceof Function&&F.attributeNameCheck(t))||"is"===t&&F.allowCustomizedBuiltInElements&&(F.tagNameCheck instanceof RegExp&&Yt(F.tagNameCheck,n)||F.tagNameCheck instanceof Function&&F.tagNameCheck(n))))return!1}else if(pe[t]);else if(Yt(M,qt(n,D,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Kt(n,"data:")||!ue[e])if(K&&!Yt(R,qt(n,D,"")));else if(n)return!1;return!0},Fe=function(e){return"annotation-xml"!==e&&Wt(e,$)},Ue=function(e){He(x.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Me(e))return;const a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z,forceKeepAttr:void 0};let r=t.length;for(;r--;){const o=t[r],{name:s,namespaceURI:l,value:i}=o,c=Ce(s),u=i;let d="value"===s?u:Vt(u);if(a.attrName=c,a.attrValue=d,a.keepAttr=!0,a.forceKeepAttr=void 0,He(x.uponSanitizeAttribute,e,a),d=a.attrValue,!re||"id"!==c&&"name"!==c||(Re(s,e),d="user-content-"+d),Y&&Yt(/((--!?|])>)|<\/(style|title)/i,d)){Re(s,e);continue}if(a.forceKeepAttr)continue;if(!a.keepAttr){Re(s,e);continue}if(!V&&Yt(/\/>/i,d)){Re(s,e);continue}X&&jt([P,O,L],e=>{d=qt(d,e," ")});const p=Ce(e.nodeName);if(Be(p,c,d)){if(v&&"object"==typeof g&&"function"==typeof g.getAttributeType)if(l);else switch(g.getAttributeType(p,c)){case"TrustedHTML":d=v.createHTML(d);break;case"TrustedScriptURL":d=v.createScriptURL(d)}if(d!==u)try{l?e.setAttributeNS(l,s,d):e.setAttribute(s,d),Me(e)?Ie(e):zt(n.removed)}catch(t){Re(s,e)}}else Re(s,e)}He(x.afterSanitizeAttributes,e,null)},Ge=function e(t){let n=null;const a=$e(t);for(He(x.beforeSanitizeShadowDOM,t,null);n=a.nextNode();)He(x.uponSanitizeShadowNode,n,null),ze(n),Ue(n),n.content instanceof s&&e(n.content);He(x.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=null,o=null,l=null,c=null;if(ye=!e,ye&&(e="\x3c!--\x3e"),"string"!=typeof e&&!je(e)){if("function"!=typeof e.toString)throw Zt("toString is not a function");if("string"!=typeof(e=e.toString()))throw Zt("dirty is not a string, aborting")}if(!n.isSupported)return e;if(J||Oe(t),n.removed=[],"string"==typeof e&&(se=!1),se){if(e.nodeName){const t=Ce(e.nodeName);if(!j[t]||U[t])throw Zt("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof i)a=De("\x3c!----\x3e"),o=a.ownerDocument.importNode(e,!0),1===o.nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?a=o:a.appendChild(o);else{if(!ee&&!X&&!Z&&-1===e.indexOf("<"))return v&&ne?v.createHTML(e):e;if(a=De(e),!a)return ee?null:ne?T:""}a&&Q&&Ie(a.firstChild);const u=$e(se?e:a);for(;l=u.nextNode();)ze(l),Ue(l),l.content instanceof s&&Ge(l.content);if(se)return e;if(ee){if(te)for(c=k.call(a.ownerDocument);a.firstChild;)c.appendChild(a.firstChild);else c=a;return(z.shadowroot||z.shadowrootmode)&&(c=N.call(r,c,!0)),c}let d=Z?a.outerHTML:a.innerHTML;return Z&&j["!doctype"]&&a.ownerDocument&&a.ownerDocument.doctype&&a.ownerDocument.doctype.name&&Yt(kn,a.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+a.ownerDocument.doctype.name+">\n"+d),X&&jt([P,O,L],e=>{d=qt(d,e," ")}),v&&ne?v.createHTML(d):d},n.setConfig=function(){Oe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),J=!0},n.clearConfig=function(){Ne=null,J=!1},n.isValidAttribute=function(e,t,n){Ne||Oe({});const a=Ce(e),r=Ce(t);return Be(a,r,n)},n.addHook=function(e,t){"function"==typeof t&&Bt(x[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=Ht(x[e],t);return-1===n?void 0:Ft(x[e],n,1)[0]}return zt(x[e])},n.removeHooks=function(e){x[e]=[]},n.removeAllHooks=function(){x={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();const On=({message:e,onClose:t,Title:n,prefix:a,children:o})=>{let s=jQuery("<div>").append(e);const l=s.html();return s.remove(),s=null,(0,Nt.useEffect)(()=>{const e=document.querySelectorAll(".chrome-ai-translator-flags");if(e.length>0)return e.forEach(e=>{e.classList.add(`${a}-tooltip-element`),e.addEventListener("click",t=>{if(t.preventDefault(),e.querySelector(`.${a}-tooltip`))return;let n=document.createElement("span");n.textContent="Text to be copied.",n.className=`${a}-tooltip`,e.appendChild(n),(async({text:e=!1,startCopyStatus:t=()=>{},endCopyStatus:n=()=>{}})=>{if(e&&""!==e)try{if(navigator?.clipboard?.writeText)await navigator.clipboard.writeText(e);else{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand&&document.execCommand("copy"),document.body.removeChild(t)}t(),setTimeout(()=>n(),800)}catch(e){console.error("Error copying text to clipboard:",e)}})({text:e.getAttribute("data-clipboard-text"),startCopyStatus:()=>{n.classList.add(`${a}-tooltip-active`)},endCopyStatus:()=>{setTimeout(()=>{n.remove()},800)}})})}),()=>{e.forEach(e=>{e.removeEventListener("click",()=>{})})}},[]),React.createElement("div",{className:`${a}-error-modal-box-container`},React.createElement("div",{className:`${a}-error-modal-box`},React.createElement("div",{className:`${a}-error-modal-box-header`},React.createElement("span",{className:`${a}-error-modal-box-close`,onClick:t},""),n&&React.createElement("h3",null,n)),React.createElement("div",{className:`${a}-error-modal-box-body`},React.createElement("p",{dangerouslySetInnerHTML:{__html:Pn.sanitize(l)}}),o),React.createElement("div",{className:`${a}-error-modal-box-footer`},React.createElement("button",{className:`${a}-error-modal-box-close button button-primary`,onClick:t},(0,r.__)("Back","autopoly-ai-translation-for-polylang-pro")))))},Ln=({postIds:e,selectedLanguages:t,prefix:n,onDestory:o})=>{const s=wt(),[l,i]=(0,a.useState)(!0),[c,u]=(0,a.useState)(!1),[d,p]=(0,a.useState)(!1),m=Ct(We),[g,f]=(0,a.useState)([]),h=Ct(Ge),_=Ct(Ue),[y,b]=(0,a.useState)(!0),[E,v]=(0,a.useState)(!1),[T,w]=(0,a.useState)("status"),S=Ct(Ke);let[k,C]=(0,a.useState)(sprintf((0,r.__)("Translations already exist for all selected %s in the chosen languages. There are no new %s to translate.","linguator-multilingual-ai-translation"),lmatBulkTranslationGlobal.post_label,lmatBulkTranslationGlobal.post_label)),N=Ct(qe);N=N.toFixed(1),N=Math.min(N,100),(0,a.useEffect)(()=>{(async()=>{const a=await(async({ids:e,langs:t,storeDispatch:n})=>{const a=lmatBulkTranslationGlobal.bulkTranslateRouteUrl,r=lmatBulkTranslationGlobal.bulkTranslatePrivateKey,o=lmatBulkTranslationGlobal.nonce;let s=!1;const l=await fetch(a+"/local-ai:bulk-translate-entries",{method:"POST",body:new URLSearchParams({ids:JSON.stringify(e),lang:JSON.stringify(t),privateKey:r,lmat_fetch_block_rules_key:lmatBulkTranslationGlobal.fetchBlockRulesNonce}),headers:{"X-WP-Nonce":o,"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"}}),i=await l.json();if(!i.success&&!i.code&&i.data&&i.data.message)return{success:!1,message:i.data.message};if(!i.success&&!i.message&&i.data.error)return{success:!1,message:JSON.stringify(i.data.error)};if(!i.success&&i.message&&i.data.trace&&i.data.message)return i.data&&i.data.trace&&delete i.data.trace,{success:!1,message:JSON.stringify(i.data)};if(!i.success&&i.message)return{success:!1,message:i.message};if(!(i&&i.success&&i.data&&i.data.posts&&i.data.CreateTranslatePostNonce))return;const c=i.data.posts,u=Object.keys(c);if(u.length>0){const e=new Array,t=Object.keys(je.getState().translatePostInfo);u.forEach(a=>{const r=c[a].languages,o=c[a].title;r&&r.length>0&&r.forEach(r=>{if(t.includes(a+"_"+r))return;let s=!1;e.includes(a)||t.includes(a+"_"+r)||(e.push(a),s=!0);const l=lmatBulkTranslationGlobal.languageObject[r].flag,i=lmatBulkTranslationGlobal.languageObject[r].name;n(ke([a+"_"+r])),n(Ne({[a+"_"+r]:{parentPostId:a,targetPostId:null,targetLanguage:r,postLink:null,status:"pending",parentPostTitle:o,firstPostLanguage:s,flagUrl:l,languageName:i,messageClass:"warning"}}))})});const a=async(e,t)=>{const r=u[e],o=je.getState().serviceProvider,{title:l,content:d,languages:p,editor_type:m,metaFields:g=null,sourceLanguage:f}=c[r];if(p&&p.length>0){n($e({lang:p}));const e={content:d,editorType:m,metaFields:g,service:o,postId:r,storeDispatch:n};if("block"===m&&(e.blockParseRules=JSON.parse(i?.data?.blockParseRules),s||(n(Me(JSON.parse(i?.data?.blockParseRules))),s=!0)),await(({content:e,editorType:t,service:n,postId:a,storeDispatch:r,blockParseRules:o=null,metaFields:s=null})=>{const l={classic:ze,elementor:Be,block:Fe},i={content:e,service:n,postId:a,storeDispatch:r};return i.filterHtmlContent=rt({Service:n}).filterHtmlContent,o&&(i.blockParseRules=o),l[t]?l[t](i):e})(e),["classic","block","elementor"].includes(m)){l&&""!==l.trim()&&(n(Oe({postId:r,uniqueKey:"title",value:l})),n(Ie({postId:r,uniqueKey:"title",value:l})));const e=je.getState().parentPostsInfo[r],t=(e?.charactersCount||0)+l.length,a=(e?.wordsCount||0)+l.split(/\s+/).filter(e=>/[^\p{L}\p{N}]/.test(e)).length,o=(e?.stringsCount||0)+l.split(/(?<=[.!?]+)\s+/).length;n(Re({postId:r,data:{editorType:m,originalContent:{title:l,content:d},languages:p,sourceLanguage:f,charactersCount:t,wordsCount:a,stringsCount:o}})),n(Pe({totalPosts:je.getState().countInfo.totalPosts+p.length}))}}else console.log(`All target languages for post ${r} already exist. Skipping translation.`);++e>u.length-1||await a(e,t)},r=je.getState().pendingPosts.length;return await a(0,r),{postKeys:u,nonce:i.data.CreateTranslatePostNonce}}})({ids:e,langs:t,storeDispatch:s});i(!1),a.success||!1!==a.success||!a.message?(async(e=[],t,n,a,o)=>{const s=je.getState().pendingPosts;if(s.length<1)return;let l=!1;o(()=>{l=!0});const i=async c=>{const u=e[c];if(!u||l)return;const d=je.getState().parentPostsInfo[u];if(d){const{originalContent:{title:e,content:l},languages:i,editorType:c,sourceLanguage:p}=d;if(!i||0===i.length)return void console.log(`All target languages for post ${u} already exist. Skipping translation.`);if(!["classic","block","elementor"].includes(c))for(const e of i)n(Ce(u+"_"+e)),n(updateProgressStatus(100/s.length)),n(Ne({[u+"_"+e]:{status:"error",messageClass:"error",errorMessage:(0,r.__)("This post editor type is not supported for translation","linguator-multilingual-ai-translation")}}));const m={title:e,content:JSON.parse(JSON.stringify(l))};await st({sourceLang:p,targetLangs:i,totalPosts:s.length,storeDispatch:n,prefix:a,postId:u,source:m,editorType:c,createTranslatePostNonce:t,updateDestoryHandler:o})}++c>e.length-1||l||await i(c)};await i(0)})(a.postKeys,a.nonce,s,n,x):C(a.message)})()},[]);const x=e=>{f(t=>[...t,e])};(0,a.useEffect)(()=>{if(S.totalPosts<1&&!l&&"status"!==T)P("status");else if(m&&Object.keys(m).length>0){if(h.length<1)return void P("completed");let e=!1,t=!1;const n=(a,r)=>{const o=m[a[r]].status;if("running"===o||"in-progress"===o||"pending"===o)return t=!0,void("running"!==T&&P("running"));"error"===o&&(e=!0),++r<a.length&&n(a,r)};if(n(Object.keys(m),0),t)return;P("pending")}},[m]);const P=e=>{w(e)};return(0,a.useEffect)(()=>{if(N>=100&&h.length<1){if(S.postsTranslated<1)return b(!1),void v(!1);S.stringsTranslated>0&&setTimeout(()=>{v(!0)},1e3),setTimeout(()=>{b(!1),v(!1)},7500)}},[h]),c?a.createElement(On,{message:d.errorHtml,onClose:e=>{u(!1),p(!1)},Title:(0,r.__)("Bulk Translation Error","linguator-multilingual-ai-translation"),prefix:n}):a.createElement("div",{id:`${n}-status-modal-container`},a.createElement("h2",{className:`${n}-bulk-status-heading ${T}`},sprintf((0,r.__)("Bulk Translation %s","linguator-multilingual-ai-translation"),(()=>{switch(T){case"running":return(0,r.__)("In Progress","linguator-multilingual-ai-translation");case"pending":return(0,r.__)("Pending","linguator-multilingual-ai-translation");case"completed":return(0,r.__)("Completed","linguator-multilingual-ai-translation");default:return(0,r.__)("Status","linguator-multilingual-ai-translation")}})()),"running"===T&&a.createElement("span",{className:`${n}-bulk-status-running`})),a.createElement("div",{className:`${n}-status-modal-close`,onClick:e=>{g.forEach(e=>"function"==typeof e&&e()),o(e)}},""),S.totalPosts<1&&!l?a.createElement("p",null,k):a.createElement(a.Fragment,null,l&&a.createElement("div",{className:`${n}-progress-skeleton`}),y&&!l?a.createElement(a.Fragment,null,a.createElement("div",{className:`${n}-overall-progress`},a.createElement("div",{className:`${n}-progress-bar`},a.createElement("div",{className:`${n}-progress`,style:{width:N+"%"}},N+"%"))),E&&a.createElement("div",{className:`${n}-translator-strings-count`},(0,r.__)("Wahooo! You have saved your valuable time via auto translating","linguator-multilingual-ai-translation"),a.createElement("strong",{className:"totalChars"}," ",S.charactersTranslated," "),(0,r.__)("characters using","linguator-multilingual-ai-translation"),a.createElement("strong",null," ","google"===_?"Google Translate":"AI Translator"))):S.postsTranslated>0&&a.createElement("div",{className:`${n}-count-container`},a.createElement("div",{className:`${n}-post-count`},a.createElement("span",{className:`${n}-count-text-heading`},(0,r.__)("Posts Translated:","linguator-multilingual-ai-translation")," "),a.createElement("span",{className:`${n}-post-translated-post`},S.postsTranslated),a.createElement("span",{className:`${n}-post-text`}," ",(0,r.__)("out of","linguator-multilingual-ai-translation")," "),a.createElement("span",{className:`${n}-post-total`},S.totalPosts),a.createElement("span",{className:`${n}-post-total-text`}," ",(0,r.__)("posts translated","linguator-multilingual-ai-translation"))),a.createElement("div",{className:`${n}-string-count`},a.createElement("span",{className:`${n}-count-text-heading`},(0,r.__)("Strings:","linguator-multilingual-ai-translation")," "),a.createElement("span",{className:`${n}-string-number`},S.stringsTranslated)),a.createElement("div",{className:`${n}-char-count`},a.createElement("span",{className:`${n}-count-text-heading`},(0,r.__)("Characters:","linguator-multilingual-ai-translation")," "),a.createElement("span",{className:`${n}-char-number`},S.charactersTranslated))),a.createElement("div",{className:`${n}-status-table-container`},a.createElement("div",null,a.createElement("table",{className:`${n}-status-table`},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,(0,r.__)("Language","linguator-multilingual-ai-translation")),a.createElement("th",null,(0,r.__)("Status","linguator-multilingual-ai-translation")),a.createElement("th",null,(0,r.__)("Title","linguator-multilingual-ai-translation")),a.createElement("th",null,(0,r.__)("Actions","linguator-multilingual-ai-translation")))),a.createElement("tbody",null,l&&a.createElement(a.Fragment,null,a.createElement("tr",null,a.createElement("td",null,a.createElement("div",{className:`${n}-progress-skeleton`})),a.createElement("td",null,a.createElement("div",{className:`${n}-progress-skeleton`})),a.createElement("td",null,a.createElement("div",{className:`${n}-progress-skeleton`})),a.createElement("td",null,a.createElement("div",{className:`${n}-progress-skeleton`}))),a.createElement("tr",null,a.createElement("td",null,a.createElement("div",{className:`${n}-progress-skeleton`})),a.createElement("td",null,a.createElement("div",{className:`${n}-progress-skeleton`})),a.createElement("td",null,a.createElement("div",{className:`${n}-progress-skeleton`})),a.createElement("td",null,a.createElement("div",{className:`${n}-progress-skeleton`})))),!l&&Object.keys(m).map((e,t)=>{const o=m[e],s=[],l="running"===o.status||"in-progress"===o.status;return o.firstPostLanguage&&s.push(a.createElement("tr",{key:`group-title-${o.parentPostId||e}`,className:`${n}-group-title`},a.createElement("td",{colSpan:"5"},o.parentPostTitle||(0,r.__)("Untitled","linguator-multilingual-ai-translation")))),s.push(a.createElement("tr",{key:e,className:`${n}-td-${o.status}`},a.createElement("td",{className:`${n}-status-flag`},o.flagUrl&&a.createElement("img",{src:o.flagUrl,width:"20",alt:o.targetLanguage}),o.languageName||o.targetLanguage),"error"===o.status?a.createElement(a.Fragment,null,a.createElement("td",{colSpan:o.errorHtml?"2":"3"},o.errorMessage),o.errorHtml&&a.createElement("td",{colSpan:"1",onClick:()=>{p(o),u(!0)}},a.createElement("button",{className:`${n}-status-error-button`},(0,r.__)("Error Details","linguator-multilingual-ai-translation")))):a.createElement(a.Fragment,null,a.createElement("td",null,a.createElement("span",{className:`${n}-status ${o.messageClass} ${o.status}`},"pending"===o.status&&(0,r.__)("Pending","linguator-multilingual-ai-translation"),"completed"===o.status&&(0,r.__)("Completed","linguator-multilingual-ai-translation"),l&&a.createElement("div",{className:`${n}-progress-bar-circular`,"data-id":o.parentPostId+"_"+o.targetLanguage},a.createElement("svg",{className:`${n}-circle`,viewBox:"0 0 36 36"},a.createElement("path",{className:`${n}-bg`,d:"M18 2.0845\r a 15.9155 15.9155 0 0 1 0 31.831\r a 15.9155 15.9155 0 0 1 0 -31.831"}),a.createElement("path",{className:`${n}-progress`,strokeDasharray:"0, 100",d:"M18 2.0845\r a 15.9155 15.9155 0 0 1 0 31.831\r a 15.9155 15.9155 0 0 1 0 -31.831"})),a.createElement("div",{className:`${n}-percentage`},"0%")))),a.createElement("td",null,a.createElement(a.Fragment,null,"completed"===o.status?a.createElement("a",{href:o.postLink,target:"_blank",rel:"noopener noreferrer"},o.targetPostTitle):"in-progress"===o.status?a.createElement("div",{className:`${n}-${o.messageClass}-text`},(0,r.__)("In Progress","linguator-multilingual-ai-translation"),a.createElement("span",null)):a.createElement("div",{className:`${n}-progress-skeleton short`}))),a.createElement("td",null,"completed"===o.status&&o.targetPostId?a.createElement("span",{className:`${n}-view-link`},a.createElement("a",{href:o.postEditLink,target:"_blank",rel:"noopener noreferrer",className:"button button-primary"},(0,r.__)("Review","linguator-multilingual-ai-translation"))):"in-progress"===o.status?a.createElement("div",{className:`${n}-${o.messageClass}-text`},(0,r.__)("In Progress","linguator-multilingual-ai-translation"),a.createElement("span",null)):a.createElement("div",{className:`${n}-progress-skeleton short`}))))),s}))))),S.postsTranslated>0&&!h.length&&!y&&a.createElement("div",{className:`${n}-progress-footer`},a.createElement("a",{className:`${n}-progress-button button button-primary`,href:(()=>{const e=Object.values(m).filter(e=>"completed"===e.status&&e.targetLanguage).map(e=>e.targetLanguage).filter((e,t,n)=>n.indexOf(e)===t);if(1===e.length){const t=e[0],n=new URL(window.location.href),a=new URLSearchParams(n.search);a.set("lang",t),a.set("orderby","date"),a.set("order","desc");const r=Object.fromEntries(a.entries());return window.location.href.split("?")[0]+"?"+new URLSearchParams(r).toString()}return window.location.href})()},sprintf((0,r.__)("Check Translated %s","linguator-multilingual-ai-translation"),lmatBulkTranslationGlobal.post_label)))))};n(338);const An=({setSettingVisibility:e,prefix:t})=>React.createElement("div",{className:`${t}-setting-modal-header`},React.createElement("h2",null,(0,r.__)("Step 2 - Select Translation Provider","linguator-multilingual-ai-translation")),React.createElement("span",{className:`${t}-setting-modal-close`,onClick:t=>e(t)},"")),In=e=>{const t=e.Service,n=e.prefix,a=e[t+"Disabled"],r=rt({Service:t,[t+"ButtonDisabled"]:a,openErrorModalHandler:e.openErrorModalHandler,prefix:n}),o=`${n}-${t.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/[^a-z0-9-]/g,"")}-btn`;return React.createElement("tr",null,React.createElement("td",{className:`${n}-provider-name`},React.createElement("img",{src:`${e.imgFolder}${r.Logo}`,alt:r.title}),React.createElement("span",null,r.title)),React.createElement("td",null,r.ButtonDisabled?r.ErrorMessage:React.createElement("button",{id:o,onClick:e.startTranslationHandler,className:`${n}-service-btn button button-primary`,"data-service":t,"data-service-label":r.ServiceLabel},r.SettingBtnText)),React.createElement("td",null,React.createElement("a",{href:r.Docs,target:"_blank",rel:"noopener noreferrer",className:`${n}-doc-icon`},React.createElement("svg",{width:"9",height:"12",viewBox:"0 0 9 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M2.17607 6.20533H6.82393V5.53867H2.17607V6.20533ZM2.17607 8.05133H6.82393V7.38467H2.17607V8.05133ZM2.17607 9.898H4.89536V9.23133H2.17607V9.898ZM1.03821 12C0.7425 12 0.495643 11.8973 0.297643 11.692C0.0996427 11.4867 0.000428571 11.2304 0 10.9233V1.07667C0 0.77 0.0992142 0.514 0.297643 0.308667C0.496071 0.103333 0.743143 0.000444444 1.03886 0H6.10714L9 3V10.9233C9 11.23 8.901 11.4862 8.703 11.692C8.505 11.8978 8.25771 12.0004 7.96114 12H1.03821ZM5.78571 3.33333V0.666667H1.03886C0.939857 0.666667 0.849 0.709333 0.766286 0.794666C0.683571 0.88 0.642429 0.974 0.642857 1.07667V10.9233C0.642857 11.0256 0.684 11.1196 0.766286 11.2053C0.848571 11.2911 0.939214 11.3338 1.03821 11.3333H7.96179C8.06036 11.3333 8.151 11.2907 8.23371 11.2053C8.31643 11.12 8.35757 11.0258 8.35714 10.9227V3.33333H5.78571Z",fill:"#6F6F6F"})))))};function Rn(){return Rn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rn.apply(null,arguments)}const Dn=e=>{const{prefix:t,localAiModalError:n}=e,a=rt(),r=!lmatBulkTranslationGlobal?.AIServices?.includes("openai"),o=!lmatBulkTranslationGlobal?.AIServices?.includes("google"),s=!lmatBulkTranslationGlobal?.AIServices?.includes("openrouter");return React.createElement("div",{className:`${t}-setting-modal-body`},React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Name"),React.createElement("th",null,"Translate"),React.createElement("th",null,"Docs"))),React.createElement("tbody",null,Object.keys(a).map(t=>React.createElement(In,Rn({key:t},e,{openai_aiDisabled:r,google_aiDisabled:o,openrouter_aiDisabled:s,localAiTranslatorDisabled:n,localAiModalError:n,openErrorModalHandler:e.errorModalHandler,Service:t}))))))},$n=({setSettingVisibility:e,prefix:t})=>React.createElement("div",{className:`${t}-setting-modal-footer`},React.createElement("button",{className:`${t}-setting-close button button-primary`,onClick:()=>e(!1)},(0,r.__)("Back","linguator-multilingual-ai-translation"))),Mn=e=>{const t=e.prefix||"lmat-bulk-translate",n=lmatBulkTranslationGlobal.lmat_url+"Admin/Assets/images/",[r,o]=(0,a.useState)(!1);return a.createElement(a.Fragment,null,r?a.createElement(On,{message:r,onDestroy:e.onDestory,onClose:()=>{o(!1)},Title:"AutoPoly - AI Translation For Polylang (Pro)",prefix:t}):a.createElement("div",{id:`${t}-setting-modal-container`},a.createElement("div",{className:`${t}-setting-modal-content`},a.createElement(An,{setSettingVisibility:e.onDestory,prefix:t}),a.createElement(Dn,{startTranslationHandler:async n=>{let a=n.target.classList.contains(`${t}-service-btn`)?n.target:n.target.closest(`.${t}-service-btn`);if(!a)return;const r=a.dataset&&a.dataset.service;e.updateProviderHandler(r)},imgFolder:n,prefix:t,localAiModalError:e.localAiModalError,errorModalHandler:e=>{o(e)}}),a.createElement($n,{setSettingVisibility:e.onCloseHandler,prefix:t}))))},jn=({onDestory:e,prefix:t,postIds:n})=>{const o=wt(),{languageObject:s={}}=lmatBulkTranslationGlobal||{},l=(0,r.__)("Please select at least one post for translation.","linguator-multilingual-ai-translation"),[i,c]=(0,a.useState)([]),[u,d]=(0,a.useState)(0===n.length?l:""),[p,m]=(0,a.useState)(!1),[g,f]=(0,a.useState)(!1),h=Ct(Ke).totalPosts,[_,y]=(0,a.useState)(!1),[b,E]=(0,a.useState)(!1),[v,T]=(0,a.useState)(!1),w=t=>{f(!1),m(!1),e(t)};(0,a.useEffect)(()=>{g||p||o(Ae())},[g,p,o]);const S=async()=>{if(0===i.length&&!p)return d((0,r.__)("Please select at least one language","linguator-multilingual-ai-translation")),void E(!0);m(e=>!e)};return a.createElement("div",{id:`${t}-container`,className:(()=>{let e=[];return g&&e.push(`${t}-status-modal-active`),p&&e.push(`${t}-setting-modal-active`),h||p||!g||e.push(`${t}-empty-posts`),e.join(" ")})()},p&&a.createElement(Mn,{postIds:n,prefix:t,onDestory:w,onCloseHandler:S,updateProviderHandler:e=>{o(De(e)),m(!1),f(!0)},localAiModalError:v}),g&&!p&&(_?a.createElement("div",{className:`${t}-skeleton-loader`}):a.createElement(Ln,{postIds:n,selectedLanguages:i,prefix:t,onDestory:w})),!g&&!p&&a.createElement("div",{className:`${t}-language-container`},a.createElement("div",{className:`${t}-header`},a.createElement("h2",null,(0,r.__)("Step 1: Select Languages","linguator-multilingual-ai-translation")),a.createElement("span",{className:"close",onClick:w,title:(0,r.__)("Close","linguator-multilingual-ai-translation")},"")),u&&""!==u?b?a.createElement(On,{message:u,onClose:e=>{E(!1)}}):a.createElement("div",{className:`${t}-error-message`,dangerouslySetInnerHTML:{__html:u}}):a.createElement(a.Fragment,null,a.createElement("div",{className:`${t}-body`},a.createElement("div",{className:`${t}-languages`},Object.keys(s).map(e=>a.createElement("div",{key:e,className:`${t}-language`},a.createElement("div",{title:n.length?s[e].name:l},a.createElement("input",{type:"checkbox",name:"languages",id:e,value:e,onChange:e=>(e=>{const{value:t}=e.target,n=e.target.checked;c(n?[...i,t]:i.filter(e=>e!==t))})(e),disabled:!n.length,checked:i.includes(e)}),a.createElement("label",{htmlFor:e,className:`${t}-language-label`,title:s[e].name},a.createElement("img",{src:s[e].flag,alt:s[e].name})," ",s[e].name))))),a.createElement("div",{className:`${t}-select-all-languages`},a.createElement("input",{type:"checkbox",name:"select-all-languages",id:"select-all-languages",onChange:e=>(e=>{const t=e.target.checked;c(t?Object.keys(s):[])})(e),checked:i.length===Object.keys(s).length}),a.createElement("label",{htmlFor:"select-all-languages"},i.length===Object.keys(s).length?(0,r.__)("Unselect All","linguator-multilingual-ai-translation"):(0,r.__)("Select All","linguator-multilingual-ai-translation")))),a.createElement("div",{className:`${t}-footer`},a.createElement("button",{className:`${t}-footer-button button button-primary`,onClick:w,title:n.length?"":l},(0,r.__)("Close","linguator-multilingual-ai-translation")),a.createElement("button",{className:`${t}-footer-button button button-primary`,onClick:S,disabled:!n.length||!i.length,title:n.length?i.length?"":(0,r.__)("Please select at least one language","linguator-multilingual-ai-translation"):l},(0,r.__)("Translate","linguator-multilingual-ai-translation"))))))};(()=>{const e=e=>{const[t,n]=(0,a.useState)(!1),[r,o]=(0,a.useState)([]),s=e.prefix,l=(document.getElementById(`${s}-wrapper`),e=>{e.preventDefault();const t=document.querySelectorAll('table.widefat input[name="post[]"]:checked'),a=Array.from(t).map(e=>e.value);o(a),n(e=>!e);const r=document.querySelector('.skiptranslate iframe[id=":1.container"]');if(document.body.classList.remove(s+"-google-translate"),r){const e=r.contentDocument.querySelector('a[id=":1.close"][title="Close"] img');e&&e.click()}});return(0,a.useEffect)(()=>{const e=document.querySelectorAll(`.${s}-btn`);e&&e.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),l(e)})})},[]),(0,a.useEffect)(()=>{const e=document.getElementById(`${s}-wrapper`);e&&e.classList.toggle(`${s}-active`,t)},[t]),t?a.createElement(jn,{onDestory:l,prefix:s,postIds:r}):null};window.addEventListener("load",async()=>{const t="lmat-bulk-translate";await new Promise(e=>setTimeout(e,500)),s.createRoot(document.getElementById(`${t}-wrapper`)).render(a.createElement(_t,{store:je},a.createElement(e,{prefix:t})))})})()})();