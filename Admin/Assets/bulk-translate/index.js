(()=>{"use strict";var t={160:(t,e,n)=>{var a=n(609),s="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},r=a.useSyncExternalStore,o=a.useRef,i=a.useEffect,l=a.useMemo,c=a.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,n,a,u){var d=o(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=l(function(){function t(t){if(!i){if(i=!0,r=t,t=a(t),void 0!==u&&p.hasValue){var e=p.value;if(u(e,t))return o=e}return o=t}if(e=o,s(r,t))return e;var n=a(t);return void 0!==u&&u(e,n)?(r=t,e):(r=t,o=n)}var r,o,i=!1,l=void 0===n?null:n;return[function(){return t(e())},null===l?void 0:function(){return t(l())}]},[e,n,a,u]);var g=r(t,d[0],d[1]);return i(function(){p.hasValue=!0,p.value=g},[g]),c(g),g}},338:(t,e,n)=>{var a=n(795);a.createRoot,a.hydrateRoot},418:(t,e,n)=>{t.exports=n(160)},609:t=>{t.exports=window.React},795:t=>{t.exports=window.ReactDOM}},e={};function n(a){var s=e[a];if(void 0!==s)return s.exports;var r=e[a]={exports:{}};return t[a](r,r.exports,n),r.exports}var a=n(609);const s=window.wp.i18n,r=window.ReactJSXRuntime,o=t=>{const e=t.skipTags||[],n=t=>{const a=document.createElement("div");a.innerHTML=t;const s=a.firstElementChild;if(!s)return t;let r=s.childNodes,o=r.length;if(o>0){r=Array.from(r).sort((t,e)=>3===t.nodeType?-1:3===e.nodeType?1:0);for(let t=0;t<o;t++){let e=r[t];if(3===e.nodeType){let t=e.textContent.replace(/^\s+|^\.\s+|^\s.|\s+$|\.\s+$|\s.\+$/g,t=>`#lmat_page_translation_open_translate_span#${t}#lmat_page_translation_close_translate_span#`);e.textContent=t}else if(8===e.nodeType){let t=`\x3c!--${e.textContent}--\x3e`;e.textContent=t}else{let t=n(e.outerHTML);e.outerHTML=t}}}let i=s.outerHTML.match(/^<[^>]+>/)[0];i=i.replace(/#lmat_page_translation_open_translate_span#|#lmat_page_translation_close_translate_span#/g,"");const l=s.tagName.toLowerCase(),c=new RegExp(`</${l}>`,"i"),u=s.outerHTML.match(c);if("<style>"===i)return`#lmat_page_translation_open_translate_span#${s.outerHTML}#lmat_page_translation_close_translate_span#`;let d=s.innerHTML;d=d.replace(/^\s+|^\.\s+|^\s.|\s+$|\.\s+$|\s.\+$/g,t=>`#lmat_page_translation_open_translate_span#${t}#lmat_page_translation_close_translate_span#`),s.innerHTML="";let p="",g="",f="";return g=`#lmat_page_translation_open_translate_span#${i}#lmat_page_translation_close_translate_span#`,u&&(p=`#lmat_page_translation_open_translate_span#</${l}>#lmat_page_translation_close_translate_span#`),e.includes(l)&&(d=d.replace(/#lmat_page_translation_open_translate_span#|#lmat_page_translation_close_translate_span#/g,""),d="#lmat_page_translation_open_translate_span#"+d+"#lmat_page_translation_close_translate_span#"),""!==d?(""!==g&&(f=g+d),""!==p&&(f+=p)):f=g+p,s.outerHTML=f,a.innerHTML},a=["yandex","localAiTranslator","google"].includes(t.service)?(e=>{/^(_yoast_wpseo_|rank_math_|_seopress_)/.test(t.contentKey.trim())&&(e=(t=>t.replace(/(%{1,2}[a-zA-Z0-9_]+%{0,2})/g,t=>`#lmat_page_translation_open_translate_span#${t}#lmat_page_translation_close_translate_span#`))(e));const a=/\[(.*?)\]/g;e.match(a)&&(e=e.replace(a,t=>`#lmat_page_translation_open_translate_span#${t}#lmat_page_translation_close_translate_span#`));const s=document.createElement("div");s.innerHTML=function(t){if("string"!=typeof t||!t.trim())return t;const e=/<\/?([a-zA-Z0-9]+)(\s[^>]*)?>/g,n=[];let a,s="",r=0;for(;null!==(a=e.exec(t));){const[o,i]=a,l=o.startsWith("</"),c=a.index;if(c>r&&(s+=t.slice(r,c)),l){const t=n.findIndex(t=>t.tag===i);-1!==t?(n.splice(t,1),s+=o):s+=`#lmat_page_translation_temp_tag_open#<${i}>#lmat_page_translation_temp_tag_close#`+o}else n.push({tag:i}),s+=o;r=e.lastIndex}r<t.length&&(s+=t.slice(r));for(let t=n.length-1;t>=0;t--){const{tag:e}=n[t];s+=`#lmat_page_translation_temp_tag_open#</${e}>#lmat_page_translation_temp_tag_close#`}return a=null,n.length=0,t=null,s}(e),function(t){let e=t.childNodes;const a=t=>{if(e.length>t){let s=e[t],r=null;if(3===s.nodeType){const t=s.textContent.replace(/^\s+|^\.\s+|^\s.|\s+$|\.\s+$|\s.\+$/g,t=>`#lmat_page_translation_open_translate_span#${t}#lmat_page_translation_close_translate_span#`);r=document.createTextNode(t)}else if(8===s.nodeType)r=document.createTextNode(`\x3c!--${s.textContent}--\x3e`);else{let t=n(s.outerHTML);r=document.createTextNode(t)}s.replaceWith(r),t++,a(t)}};a(0)}(s);let r=s.innerText;return r=r.replace(/#lmat_page_translation_temp_tag_open#([\s\S]*?)#lmat_page_translation_temp_tag_close#/g,""),(t=>t.split(/(#lmat_page_translation_open_translate_span#.*?#lmat_page_translation_close_translate_span#)|'/).filter(Boolean).filter(t=>""!==t.trim()))(r)})(t.content):t.content,s=/#lmat_page_translation_open_translate_span#[\s\S]*?#lmat_page_translation_close_translate_span#/,o=/#lmat_page_translation_open_translate_span#|#lmat_page_translation_close_translate_span#/g,i=t=>t.replace(o,"");return(0,r.jsx)(r.Fragment,{children:["yandex","localAiTranslator","google"].includes(t.service)?a.map((t,e)=>s.test(t)?(0,r.jsx)("span",{className:"notranslate lmat-page-translation-notraslate-tag",translate:"no",children:i(t)},e):t):a})};var i=n(795);const l=async t=>{const e=document.createElement("div"),n=i.createRoot(e);return new Promise(a=>{n.render(t),setTimeout(()=>{const t=e.innerHTML;n.unmount(),e.remove(),a(t)},0)})};function c(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var u=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),d=()=>Math.random().toString(36).substring(7).split("").join("."),p={INIT:`@@redux/INIT${d()}`,REPLACE:`@@redux/REPLACE${d()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${d()}`};function g(t){if("object"!=typeof t||null===t)return!1;let e=t;for(;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||null===Object.getPrototypeOf(t)}function f(t,e,n){if("function"!=typeof t)throw new Error(c(2));if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(c(0));if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error(c(1));return n(f)(t,e)}let a=t,s=e,r=new Map,o=r,i=0,l=!1;function d(){o===r&&(o=new Map,r.forEach((t,e)=>{o.set(e,t)}))}function h(){if(l)throw new Error(c(3));return s}function m(t){if("function"!=typeof t)throw new Error(c(4));if(l)throw new Error(c(5));let e=!0;d();const n=i++;return o.set(n,t),function(){if(e){if(l)throw new Error(c(6));e=!1,d(),o.delete(n),r=null}}}function _(t){if(!g(t))throw new Error(c(7));if(void 0===t.type)throw new Error(c(8));if("string"!=typeof t.type)throw new Error(c(17));if(l)throw new Error(c(9));try{l=!0,s=a(s,t)}finally{l=!1}return(r=o).forEach(t=>{t()}),t}return _({type:p.INIT}),{dispatch:_,subscribe:m,getState:h,replaceReducer:function(t){if("function"!=typeof t)throw new Error(c(10));a=t,_({type:p.REPLACE})},[u]:function(){const t=m;return{subscribe(e){if("object"!=typeof e||null===e)throw new Error(c(11));function n(){const t=e;t.next&&t.next(h())}return n(),{unsubscribe:t(n)}},[u](){return this}}}}}function h(...t){return 0===t.length?t=>t:1===t.length?t[0]:t.reduce((t,e)=>(...n)=>t(e(...n)))}function m(t){return({dispatch:e,getState:n})=>a=>s=>"function"==typeof s?s(e,n,t):a(s)}var _=m(),y=m,b=Symbol.for("immer-nothing"),v=Symbol.for("immer-draftable"),x=Symbol.for("immer-state");function w(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var j=Object.getPrototypeOf;function T(t){return!!t&&!!t[x]}function C(t){return!!t&&(k(t)||Array.isArray(t)||!!t[v]||!!t.constructor?.[v]||E(t)||L(t))}var S=Object.prototype.constructor.toString();function k(t){if(!t||"object"!=typeof t)return!1;const e=j(t);if(null===e)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===S}function P(t,e){0===$(t)?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,a)=>e(a,n,t))}function $(t){const e=t[x];return e?e.type_:Array.isArray(t)?1:E(t)?2:L(t)?3:0}function N(t,e){return 2===$(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function O(t,e,n){const a=$(t);2===a?t.set(e,n):3===a?t.add(n):t[e]=n}function E(t){return t instanceof Map}function L(t){return t instanceof Set}function I(t){return t.copy_||t.base_}function D(t,e){if(E(t))return new Map(t);if(L(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=k(t);if(!0===e||"class_only"===e&&!n){const e=Object.getOwnPropertyDescriptors(t);delete e[x];let n=Reflect.ownKeys(e);for(let a=0;a<n.length;a++){const s=n[a],r=e[s];!1===r.writable&&(r.writable=!0,r.configurable=!0),(r.get||r.set)&&(e[s]={configurable:!0,writable:!0,enumerable:r.enumerable,value:t[s]})}return Object.create(j(t),e)}{const e=j(t);if(null!==e&&n)return{...t};const a=Object.create(e);return Object.assign(a,t)}}function M(t,e=!1){return H(t)||T(t)||!C(t)||($(t)>1&&(t.set=t.add=t.clear=t.delete=A),Object.freeze(t),e&&Object.entries(t).forEach(([t,e])=>M(e,!0))),t}function A(){w(2)}function H(t){return Object.isFrozen(t)}var R,B={};function F(t){const e=B[t];return e||w(0),e}function z(){return R}function q(t,e){e&&(F("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function G(t){U(t),t.drafts_.forEach(W),t.drafts_=null}function U(t){t===R&&(R=t.parent_)}function K(t){return R={drafts_:[],parent_:R,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function W(t){const e=t[x];0===e.type_||1===e.type_?e.revoke_():e.revoked_=!0}function V(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return void 0!==t&&t!==n?(n[x].modified_&&(G(e),w(4)),C(t)&&(t=J(e,t),e.parent_||X(e,t)),e.patches_&&F("Patches").generateReplacementPatches_(n[x].base_,t,e.patches_,e.inversePatches_)):t=J(e,n,[]),G(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==b?t:void 0}function J(t,e,n){if(H(e))return e;const a=e[x];if(!a)return P(e,(s,r)=>Z(t,a,e,s,r,n)),e;if(a.scope_!==t)return e;if(!a.modified_)return X(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const e=a.copy_;let s=e,r=!1;3===a.type_&&(s=new Set(e),e.clear(),r=!0),P(s,(s,o)=>Z(t,a,e,s,o,n,r)),X(t,e,!1),n&&t.patches_&&F("Patches").generatePatches_(a,n,t.patches_,t.inversePatches_)}return a.copy_}function Z(t,e,n,a,s,r,o){if(T(s)){const o=J(t,s,r&&e&&3!==e.type_&&!N(e.assigned_,a)?r.concat(a):void 0);if(O(n,a,o),!T(o))return;t.canAutoFreeze_=!1}else o&&n.add(s);if(C(s)&&!H(s)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;J(t,s),e&&e.scope_.parent_||"symbol"==typeof a||!Object.prototype.propertyIsEnumerable.call(n,a)||X(t,s)}}function X(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&M(e,n)}var Q={get(t,e){if(e===x)return t;const n=I(t);if(!N(n,e))return function(t,e,n){const a=et(e,n);return a?"value"in a?a.value:a.get?.call(t.draft_):void 0}(t,n,e);const a=n[e];return t.finalized_||!C(a)?a:a===tt(t.base_,e)?(at(t),t.copy_[e]=st(a,t)):a},has:(t,e)=>e in I(t),ownKeys:t=>Reflect.ownKeys(I(t)),set(t,e,n){const a=et(I(t),e);if(a?.set)return a.set.call(t.draft_,n),!0;if(!t.modified_){const a=tt(I(t),e),o=a?.[x];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(((s=n)===(r=a)?0!==s||1/s==1/r:s!=s&&r!=r)&&(void 0!==n||N(t.base_,e)))return!0;at(t),nt(t)}var s,r;return t.copy_[e]===n&&(void 0!==n||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty:(t,e)=>(void 0!==tt(t.base_,e)||e in t.base_?(t.assigned_[e]=!1,at(t),nt(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0),getOwnPropertyDescriptor(t,e){const n=I(t),a=Reflect.getOwnPropertyDescriptor(n,e);return a?{writable:!0,configurable:1!==t.type_||"length"!==e,enumerable:a.enumerable,value:n[e]}:a},defineProperty(){w(11)},getPrototypeOf:t=>j(t.base_),setPrototypeOf(){w(12)}},Y={};function tt(t,e){const n=t[x];return(n?I(n):t)[e]}function et(t,e){if(!(e in t))return;let n=j(t);for(;n;){const t=Object.getOwnPropertyDescriptor(n,e);if(t)return t;n=j(n)}}function nt(t){t.modified_||(t.modified_=!0,t.parent_&&nt(t.parent_))}function at(t){t.copy_||(t.copy_=D(t.base_,t.scope_.immer_.useStrictShallowCopy_))}function st(t,e){const n=E(t)?F("MapSet").proxyMap_(t,e):L(t)?F("MapSet").proxySet_(t,e):function(t,e){const n=Array.isArray(t),a={type_:n?1:0,scope_:e?e.scope_:z(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=a,r=Q;n&&(s=[a],r=Y);const{revoke:o,proxy:i}=Proxy.revocable(s,r);return a.draft_=i,a.revoke_=o,i}(t,e);return(e?e.scope_:z()).drafts_.push(n),n}function rt(t){if(!C(t)||H(t))return t;const e=t[x];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=D(t,e.scope_.immer_.useStrictShallowCopy_)}else n=D(t,!0);return P(n,(t,e)=>{O(n,t,rt(e))}),e&&(e.finalized_=!1),n}P(Q,(t,e)=>{Y[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Y.deleteProperty=function(t,e){return Y.set.call(this,t,e,void 0)},Y.set=function(t,e,n){return Q.set.call(this,t[0],e,n,t[0])};var ot=new class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,e,n)=>{if("function"==typeof t&&"function"!=typeof e){const n=e;e=t;const a=this;return function(t=n,...s){return a.produce(t,t=>e.call(this,t,...s))}}let a;if("function"!=typeof e&&w(6),void 0!==n&&"function"!=typeof n&&w(7),C(t)){const s=K(this),r=st(t,void 0);let o=!0;try{a=e(r),o=!1}finally{o?G(s):U(s)}return q(s,n),V(a,s)}if(!t||"object"!=typeof t){if(a=e(t),void 0===a&&(a=t),a===b&&(a=void 0),this.autoFreeze_&&M(a,!0),n){const e=[],s=[];F("Patches").generateReplacementPatches_(t,a,e,s),n(e,s)}return a}w(1)},this.produceWithPatches=(t,e)=>{if("function"==typeof t)return(e,...n)=>this.produceWithPatches(e,e=>t(e,...n));let n,a;return[this.produce(t,e,(t,e)=>{n=t,a=e}),n,a]},"boolean"==typeof t?.autoFreeze&&this.setAutoFreeze(t.autoFreeze),"boolean"==typeof t?.useStrictShallowCopy&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){var e;C(t)||w(8),T(t)&&(T(e=t)||w(10),t=rt(e));const n=K(this),a=st(t,void 0);return a[x].isManual_=!0,U(n),a}finishDraft(t,e){const n=t&&t[x];n&&n.isManual_||w(9);const{scope_:a}=n;return q(a,e),V(void 0,a)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const a=e[n];if(0===a.path.length&&"replace"===a.op){t=a.value;break}}n>-1&&(e=e.slice(n+1));const a=F("Patches").applyPatches_;return T(t)?a(t,e):this.produce(t,t=>a(t,e))}},it=ot.produce;ot.produceWithPatches.bind(ot),ot.setAutoFreeze.bind(ot),ot.setUseStrictShallowCopy.bind(ot),ot.applyPatches.bind(ot),ot.createDraft.bind(ot),ot.finishDraft.bind(ot);var lt="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?h:h.apply(null,arguments)};function ct(t,e){function n(...n){if(e){let a=e(...n);if(!a)throw new Error(wt(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:n[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=e=>function(t){return g(t)&&"type"in t&&"string"==typeof t.type}(e)&&e.type===t,n}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var ut=class t extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,t.prototype)}static get[Symbol.species](){return t}concat(...t){return super.concat.apply(this,t)}prepend(...e){return 1===e.length&&Array.isArray(e[0])?new t(...e[0].concat(this)):new t(...e.concat(this))}};function dt(t){return C(t)?it(t,()=>{}):t}function pt(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}var gt=t=>e=>{setTimeout(e,t)};function ft(t){const e={},n=[];let a;const s={addCase(t,n){const a="string"==typeof t?t:t.type;if(!a)throw new Error(wt(28));if(a in e)throw new Error(wt(29));return e[a]=n,s},addMatcher:(t,e)=>(n.push({matcher:t,reducer:e}),s),addDefaultCase:t=>(a=t,s)};return t(s),[e,n,a]}var ht=Symbol.for("rtk-slice-createasyncthunk");function mt(t,e){return`${t}/${e}`}function _t({creators:t}={}){const e=t?.asyncThunk?.[ht];return function(t){const{name:n,reducerPath:a=n}=t;if(!n)throw new Error(wt(11));const s=("function"==typeof t.reducers?t.reducers(function(){function t(t,e){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...e}}return t.withTypes=()=>t,{reducer:t=>Object.assign({[t.name]:(...e)=>t(...e)}[t.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(t,e)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:e}),asyncThunk:t}}()):t.reducers)||{},r=Object.keys(s),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},i={addCase(t,e){const n="string"==typeof t?t:t.type;if(!n)throw new Error(wt(12));if(n in o.sliceCaseReducersByType)throw new Error(wt(13));return o.sliceCaseReducersByType[n]=e,i},addMatcher:(t,e)=>(o.sliceMatchers.push({matcher:t,reducer:e}),i),exposeAction:(t,e)=>(o.actionCreators[t]=e,i),exposeCaseReducer:(t,e)=>(o.sliceCaseReducersByName[t]=e,i)};function l(){const[e={},n=[],a]="function"==typeof t.extraReducers?ft(t.extraReducers):[t.extraReducers],s={...e,...o.sliceCaseReducersByType};return function(t){let e,[r,i,l]=ft(t=>{for(let e in s)t.addCase(e,s[e]);for(let e of o.sliceMatchers)t.addMatcher(e.matcher,e.reducer);for(let e of n)t.addMatcher(e.matcher,e.reducer);a&&t.addDefaultCase(a)});if("function"==typeof t)e=()=>dt(t());else{const n=dt(t);e=()=>n}function c(t=e(),n){let a=[r[n.type],...i.filter(({matcher:t})=>t(n)).map(({reducer:t})=>t)];return 0===a.filter(t=>!!t).length&&(a=[l]),a.reduce((t,e)=>{if(e){if(T(t)){const a=e(t,n);return void 0===a?t:a}if(C(t))return it(t,t=>e(t,n));{const a=e(t,n);if(void 0===a){if(null===t)return t;throw Error("A case reducer on a non-draftable value must not return undefined")}return a}}return t},t)}return c.getInitialState=e,c}(t.initialState)}r.forEach(a=>{const r=s[a],o={reducerName:a,type:mt(n,a),createNotation:"function"==typeof t.reducers};!function(t){return"asyncThunk"===t._reducerDefinitionType}(r)?function({type:t,reducerName:e,createNotation:n},a,s){let r,o;if("reducer"in a){if(n&&!function(t){return"reducerWithPrepare"===t._reducerDefinitionType}(a))throw new Error(wt(17));r=a.reducer,o=a.prepare}else r=a;s.addCase(t,r).exposeCaseReducer(e,r).exposeAction(e,o?ct(t,o):ct(t))}(o,r,i):function({type:t,reducerName:e},n,a,s){if(!s)throw new Error(wt(18));const{payloadCreator:r,fulfilled:o,pending:i,rejected:l,settled:c,options:u}=n,d=s(t,r,u);a.exposeAction(e,d),o&&a.addCase(d.fulfilled,o),i&&a.addCase(d.pending,i),l&&a.addCase(d.rejected,l),c&&a.addMatcher(d.settled,c),a.exposeCaseReducer(e,{fulfilled:o||vt,pending:i||vt,rejected:l||vt,settled:c||vt})}(o,r,i,e)});const c=t=>t,u=new Map,d=new WeakMap;let p;function g(t,e){return p||(p=l()),p(t,e)}function f(){return p||(p=l()),p.getInitialState()}function h(e,n=!1){function a(t){let s=t[e];return void 0===s&&n&&(s=pt(d,a,f)),s}function s(e=c){const a=pt(u,n,()=>new WeakMap);return pt(a,e,()=>{const a={};for(const[s,r]of Object.entries(t.selectors??{}))a[s]=yt(r,e,()=>pt(d,e,f),n);return a})}return{reducerPath:e,getSelectors:s,get selectors(){return s(a)},selectSlice:a}}const m={name:n,reducer:g,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:f,...h(a),injectInto(t,{reducerPath:e,...n}={}){const s=e??a;return t.inject({reducerPath:s,reducer:g},n),{...m,...h(s,!0)}}};return m}}function yt(t,e,n,a){function s(s,...r){let o=e(s);return void 0===o&&a&&(o=n()),t(o,...r)}return s.unwrapped=t,s}var bt=_t();function vt(){}var{assign:xt}=Object;function wt(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}Symbol.for("rtk-state-proxy-original");const jt=bt({name:"lmat-bulk-translate",initialState:{completedPosts:[],pendingPosts:[],parentPostsInfo:{},translatePostInfo:[],progressStatus:0,targetLanguages:[],countInfo:{totalPosts:0,postsTranslated:0,stringsTranslated:0,charactersTranslated:0},translatedContent:{},serviceProvider:"",blockParseRules:{}},reducers:{updateCompletedPosts:(t,e)=>{t.completedPosts=[...t.completedPosts||[],...e.payload]},updatePendingPosts:(t,e)=>{t.pendingPosts=[...t.pendingPosts||[],...e.payload]},unsetPendingPost:(t,e)=>{t.pendingPosts=t.pendingPosts.filter(t=>t!==e.payload)},updateTranslatePostInfo:(t,e)=>{e.payload&&"object"==typeof e.payload&&(Array.isArray(e.payload)||(t.translatePostInfo={...t.translatePostInfo,...Object.keys(e.payload).reduce((n,a)=>(n[a]={...t.translatePostInfo?.[a]||{},...e.payload[a]},n),{})}))},updateProgressStatus:(t,e)=>{t.progressStatus+=e.payload},updateCountInfo:(t,e)=>{t.countInfo={...t.countInfo,...e.payload}},updateSourceContent:(t,e)=>{t.translatedContent={...t.translatedContent,[e.payload.postId]:{...t.translatedContent?.[e.payload.postId]||{},[e.payload.uniqueKey]:{...t.translatedContent?.[e.payload.postId]?.[e.payload.uniqueKey]||{},source:e.payload.value}}}},updateTargetContent:(t,e)=>{t.translatedContent={...t.translatedContent,[e.payload.postId]:{...t.translatedContent?.[e.payload.postId]||{},[e.payload.uniqueKey]:{...t.translatedContent?.[e.payload.postId]?.[e.payload.uniqueKey]||{},targetContent:e.payload.value}}}},updateTranslatedContent:(t,e)=>{t.translatedContent={...t.translatedContent,[e.payload.postId]:{...t.translatedContent?.[e.payload.postId]||{},[e.payload.uniqueKey]:{...t.translatedContent?.[e.payload.postId]?.[e.payload.uniqueKey]||{},translation:{...e.payload.translation||{},[e.payload.provider]:{...e.payload.translation?.[e.payload.provider]||{},[e.payload.key]:e.payload.value}}}}}},updateParentPostsInfo:(t,e)=>{t.parentPostsInfo={...t.parentPostsInfo,[e.payload.postId]:{...t.parentPostsInfo?.[e.payload.postId]||{},...e.payload.data}}},updateServiceProvider:(t,e)=>{["localAiTranslator","google","google_ai","openai_ai","openrouter_ai"].includes(e.payload)&&(t.serviceProvider=e.payload)},updateTargetLanguages:(t,e)=>{e.payload.lang&&e.payload.lang.length>0&&(t.targetLanguages=[...t.targetLanguages,...e.payload.lang])},updateBlockParseRules:(t,e)=>{t.blockParseRules=e.payload},resetStore:t=>{t.pendingPosts=[],t.progressStatus=0,t.completedPosts=[],t.translatePostInfo=[],t.targetLanguages=[],t.serviceProvider="",t.parentPostsInfo={},t.countInfo={totalPosts:0,postsTranslated:0,stringsTranslated:0,charactersTranslated:0},t.translatedContent={},t.blockParseRules={}}}}),{updateTranslationsLanguages:Tt,updateCompletedPosts:Ct,updatePendingPosts:St,unsetPendingPost:kt,updateTranslatePostInfo:Pt,updateProgressStatus:$t,updateCountInfo:Nt,updateSourceContent:Ot,updateTranslatedContent:Et,resetStore:Lt,updateTargetContent:It,updateParentPostsInfo:Dt,updateServiceProvider:Mt,updateTargetLanguages:At,updateBlockParseRules:Ht}=jt.actions,Rt=function(t){const e=function(t){const{thunk:e=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let r=new ut;return e&&("boolean"==typeof e?r.push(_):r.push(y(e.extraArgument))),r},{reducer:n,middleware:a,devTools:s=!0,duplicateMiddlewareCheck:r=!0,preloadedState:o,enhancers:i}=t||{};let l,u;if("function"==typeof n)l=n;else{if(!g(n))throw new Error(wt(1));l=function(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const s=e[a];"function"==typeof t[s]&&(n[s]=t[s])}const a=Object.keys(n);let s;try{!function(t){Object.keys(t).forEach(e=>{const n=t[e];if(void 0===n(void 0,{type:p.INIT}))throw new Error(c(12));if(void 0===n(void 0,{type:p.PROBE_UNKNOWN_ACTION()}))throw new Error(c(13))})}(n)}catch(t){s=t}return function(t={},e){if(s)throw s;let r=!1;const o={};for(let s=0;s<a.length;s++){const i=a[s],l=n[i],u=t[i],d=l(u,e);if(void 0===d)throw e&&e.type,new Error(c(14));o[i]=d,r=r||d!==u}return r=r||a.length!==Object.keys(t).length,r?o:t}}(n)}u="function"==typeof a?a(e):e();let d=h;s&&(d=lt({trace:!1,..."object"==typeof s&&s}));const m=function(...t){return e=>(n,a)=>{const s=e(n,a);let r=()=>{throw new Error(c(15))};const o={getState:s.getState,dispatch:(t,...e)=>r(t,...e)},i=t.map(t=>t(o));return r=h(...i)(s.dispatch),{...s,dispatch:r}}}(...u),b=(t=>function(e){const{autoBatch:n=!0}=e??{};let a=new ut(t);return n&&a.push(((t={type:"raf"})=>e=>(...n)=>{const a=e(...n);let s=!0,r=!1,o=!1;const i=new Set,l="tick"===t.type?queueMicrotask:"raf"===t.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:gt(10):"callback"===t.type?t.queueNotification:gt(t.timeout),c=()=>{o=!1,r&&(r=!1,i.forEach(t=>t()))};return Object.assign({},a,{subscribe(t){const e=a.subscribe(()=>s&&t());return i.add(t),()=>{e(),i.delete(t)}},dispatch(t){try{return s=!t?.meta?.RTK_autoBatch,r=!s,r&&(o||(o=!0,l(c))),a.dispatch(t)}finally{s=!0}}})})("object"==typeof n?n:void 0)),a})(m);return f(l,o,d(..."function"==typeof i?i(b):b()))}({reducer:jt.reducer}),Bt=(t,e,n,a,s)=>{s(Ot({postId:t,uniqueKey:e,value:n})),s(It({postId:t,uniqueKey:e,value:a}));const r=Rt.getState().parentPostsInfo[t],o=(r?.charactersCount||0)+n.length,i=(r?.wordsCount||0)+n.split(/\s+/).filter(t=>/[^\p{L}\p{N}]/.test(t)).length,l=(r?.stringsCount||0)+n.split(/(?<=[.!?]+)\s+/).length;s(Dt({postId:t,data:{charactersCount:o,wordsCount:i,stringsCount:l}}))},Ft=async({content:t,service:e,postId:n,storeDispatch:a,filterHtmlContent:s})=>{const r=async(t,e,n)=>{await t(e[n],n),++n<e.length&&await r(t,e,n)};await(async({content:t,service:e})=>{const i=(t=>{const e=[],n=/(\r\n|\r|\n)/g;let a,s=0;for(;null!==(a=n.exec(t));){a.index>s&&e.push(t.slice(s,a.index));const r=a[0];e.push(`atfpp_skip_${r}_atfpp`),s=n.lastIndex}return s<t.length&&e.push(t.slice(s)),e})(t);i.length>0&&await r(async(t,r)=>{const i=/^&[a-zA-Z0-9#]+;$/.test(t),c=/^<\/?\s*[a-zA-Z0-9#]+\s*\/?>$/.test(t),u=/^<\s*\/?\s*[a-zA-Z0-9#]+\s*><\/\s*\/?\s*[a-zA-Z0-9#]+\s*>$/.test(t),d=/<!--[\s\S]*?-->/g.test(t)&&t.indexOf("\x3c!--")<t.indexOf("--\x3e"),p=!(i||c||u||d);if(""!==t&&!t.includes("atfpp_skip_")&&p){let i=t;if(s){let n=o({content:t,service:e,contentKey:"content_classic_index_"+r,skipTags:[]});i=await l(n),n=null}Bt(n,"content_classic_index_"+r,t,i,a)}},i,0)})({content:t,service:e})},zt=async({content:t,service:e,postId:n,storeDispatch:a,filterHtmlContent:s})=>{const r={},i=async(t,e,n)=>{await t(e[n],n),++n<e.length&&await i(t,e,n)},c=async(t,i)=>{if("string"==typeof i&&""!==i.trim()&&t.length>0){const c=t.join("_atfpp_");let u=i;if(s){let t=o({content:i,service:e,contentKey:c,skipTags:["script","style"]});u=await l(t),t=null}Bt(n,c,i,u,a),u&&""!==u&&(r[c]=u)}},u=["content_width","title_size","font_size","margin","padding","background","border","color","text_align","font_weight","font_family","line_height","letter_spacing","text_transform","border_radius","box_shadow","opacity","width","height","display","position","z_index","visibility","align","max_width","content_typography_typography","flex_justify_content","title_color","description_color","email_content"],d=["title","description","editor","text","content","label"],p=async(t,e,n=[])=>{const a=t.settings;if(n.push(e),"object"==typeof a&&null!==a&&Object.keys(a).length>0){const t=async(t,e)=>{if(!u.some(e=>t.toLowerCase().includes(e))&&(d.some(e=>t.toLowerCase().includes(e))&&"string"==typeof a[t]&&""!==a[t].trim()&&await c([...n,"settings",t],a[t]),Array.isArray(a[t])&&a[t].length>0)){const e=async(e,a)=>{if("object"==typeof e&&null!==e){const s=async s=>{u.includes(s.toLowerCase())||d.some(t=>s.toLowerCase().includes(t))&&"string"==typeof e[s]&&""!==e[s].trim()&&await c([...n,"settings",t,a,s],e[s])};await i(s,Object.keys(e),0)}};await i(e,a[t],0)}};await i(t,Object.keys(a),0)}if(t.elements&&Array.isArray(t.elements)&&t.elements.length>0){const e=async(t,e)=>{await p(t,e,[...n,"elements"])};await i(e,t.elements,0)}};if(t&&t.length>0){const e=async(t,e)=>{await p(t,e,["content"])};await i(e,t,0)}},qt=async({content:t,service:e,blockParseRules:n,postId:a,storeDispatch:s,filterHtmlContent:r})=>{const i=Object.keys(n?.LmatBlockParseRules),c=(JSON.parse(JSON.stringify(t)),async(t,e,n)=>{await t(e[n],n),++n<e.length&&await c(t,e,n)}),u=async(t,n,a=[])=>{let s=t;if(r){let r=o({content:t,service:e,contentKey:n,skipTags:a});s=await l(r),r=null}return s},d=async(t,e,n)=>{Bt(a,t,e,n,s)},p=async(t,e)=>{let a=!1,s=[];if(i.includes(e.blockName)&&e.attrs&&Object.keys(e.attrs).length>0&&(s=await h([...t,"attrs"],e,n?.LmatBlockParseRules[e.blockName])),e.innerContent&&e.innerContent.length>0&&s.length>0){const t=e.innerContent.join(" ");let n=document.createElement("div");n.innerHTML=t;const r=n.innerText.split(" ").length;let o=0;s.forEach(t=>{n.innerText.includes(t)&&(o+=t.split(" ").length)}),100*o/r>97&&(a=!0),n=null}if(e.innerContent&&e.innerContent.length>0&&!a){let n=e.innerHTML?e.innerHTML.trim():"";n=n.replace(/\s/g,""),n&&""!==n&&await g([...t,"innerContent"],e.innerContent)}if(e.innerBlocks&&e.innerBlocks.length>0){const n=async(e,n)=>{await p([...t,"innerBlocks",n],e)};await c(n,e.innerBlocks,0)}},g=async(t,e)=>{await c(async(n,a)=>{let s=document.createElement("div");if(s.innerHTML=n,""===s.innerText.trim())return;s=null;let r=n?n.trim():"";if(r=r.replace(/\s/g,""),r&&""!==r){const n=[...t,a].join("_lmat_bulk_translate_temp_"),s=await u(e[a],n,["script","style"]);s&&""!==s&&d(n,e[a],s)}},e,0)},f=async(t,e,n,a=[])=>{if(Object.getPrototypeOf(t)===Object.prototype){const s=Object.keys(t),r=async(s,r)=>{if("boolean"==typeof t[s]&&!0===t[s]&&n[s]){const t=[...e,s].join("_lmat_bulk_translate_temp_"),r=await u(n[s],t);r&&""!==r&&(a.push(r),d(t,n[s],r))}else Object.getPrototypeOf(t[s])!==Object.prototype&&Object.getPrototypeOf(t[s])!==Array.prototype||await f(t[s],[...e,s],n[s])};await c(r,s,0)}else if(Object.getPrototypeOf(t)===Array.prototype){const s=async(n,s)=>{if("boolean"==typeof t[0]&&!0===t[0]){const t=[...e,s].join("_atfpp_"),r=await u(n,t);r&&""!==r&&(a.push(r),d(t,n,r))}else Object.getPrototypeOf(t[0])!==Object.prototype&&Object.getPrototypeOf(t[0])!==Array.prototype||await f(t[0],[...e,s],n,a)};await c(s,n,0)}},h=async(t,e,n)=>{const a=[];let s=e?.attrs;const r=Object.keys(s),o=Object.keys(n?.attributes).filter(t=>r.includes(t));return await c(async(e,r)=>{const o=n?.attributes[e],i=JSON.parse(JSON.stringify(t));if(!0===o){i.push(e);const t=i.join("_atfpp_");if(s[e]&&""!==s[e]){const n=await u(s[e],t);n&&""!==n&&(a.push(n),d(t,s[e],n))}}else"object"==typeof o&&await f(o,[...t,e],s[e],a)},o,0),a};await(async t=>{await c(async(e,a)=>{if(i.includes(t[e].blockName)&&t[e].attrs)await p(["content",e],t[e],n?.LmatBlockParseRules[t[e].blockName]);else if(t[e].innerBlocks&&t[e].innerBlocks.length>0){const n=async(t,n)=>{await p(["content",e,"innerBlocks",n],t)};await c(n,t[e].innerBlocks,0)}},Object.keys(t),0)})(t)},Gt=t=>t.serviceProvider,Ut=t=>t.pendingPosts,Kt=t=>t.translatePostInfo,Wt=t=>t.progressStatus,Vt=t=>t.countInfo,Jt=(t,e,n,a,s)=>t.translatedContent[e]?.[n]?.translation?.[s]?.[a]||t.translatedContent[e]?.[n]?.source,Zt=(t,e)=>{const n={};return Object.keys(t.translatedContent[e]).forEach(a=>{t.translatedContent[e][a]?.source&&(n[a]=t.translatedContent[e][a]?.source)}),n},Xt=async({source:t,lang:e,serviceProvider:n,postId:a})=>{const s=async(t,e,n)=>{await t(e[n],n),++n<e.length&&await s(t,e,n)};return await(async(t,s)=>{s&&""!==s&&(t.title=await Jt(Rt.getState(),a,"title",e,n))})(t,t.title),await(async({content:r})=>{const o=function(t){const e=[],n=/(\r\n|\r|\n)/g;let a,s=0;for(;null!==(a=n.exec(t));){a.index>s&&e.push(t.slice(s,a.index));const r=a[0];e.push(`atfpp_skip_${r}_atfpp`),s=n.lastIndex}return s<t.length&&e.push(t.slice(s)),e}(r),i=[];o.length>0&&await s(async(t,s)=>{const r=/^&[a-zA-Z0-9#]+;$/.test(t),o=/^<\/?\s*[a-zA-Z0-9#]+\s*\/?>$/.test(t),l=/^<\s*\/?\s*[a-zA-Z0-9#]+\s*><\/\s*\/?\s*[a-zA-Z0-9#]+\s*>$/.test(t),c=/<!--[\s\S]*?-->/g.test(t)&&t.indexOf("\x3c!--")<t.indexOf("--\x3e"),u=!(r||o||l||c);if(""!==t&&!t.includes("atfpp_skip_")&&u){const t="content_classic_index_"+s,r=Jt(Rt.getState(),a,t,e,n);i.push(r)}else if(t.includes("atfpp_skip_")){const e=t.replace("atfpp_skip_","").replace("_atfpp","");i.push(e)}else i.push(t)},o,0),t.content=i.join("")})({content:t.content}),t},Qt=async({source:t,lang:e,translatedContent:n,serviceProvider:a,postId:s})=>{const r=t=>Jt(Rt.getState(),s,t,e,a);return((t,e)=>{Object.keys(e).forEach(n=>{const a=n.split("_atfpp_");if("title"===a[0])((t,e)=>{e&&""!==e&&(t.title=r("title"))})(t,e[a[0]]);else if("content"===a[0]){let e=a,s=t.content;const o=r(n);let i=null,l=null;e=e.slice(1),e.forEach(t=>{i=s,l=t,s=s[t]}),i&&l&&((t,e,n)=>{!t||!t[e]||""===t[e].trim()||(t[e]=n)})(i,l,o)}})})(t,n),t},Yt=async({source:t,lang:e,translatedContent:n,serviceProvider:a,postId:s})=>{const r=[];Rt.getState().blockParseRules;const o=Zt(Rt.getState(),s),i=(t,e,n)=>!(!t||!t[e]||""===t[e].trim()||(t[e]=n,0)),l=e=>{const a=e.replace(/(_atfpp_\d+)$/,""),s=Object.keys(n).filter(t=>t.includes(a));r.push(...s);const o=[];s.forEach(e=>{let n=e.split("_atfpp_"),a=t.content;const s=c(e);let r=null,l=null;n=n.slice(1),n.forEach(t=>{r=a,l=t,a=a[t]}),r&&l&&r[l]&&i(r,l,s)&&o.push(s)});let l=null,u=null,d=t.content;a.split("_atfpp_").slice(1).forEach(t=>{l=d,u=t,d=d[t]}),l&&u&&l[u]&&"innerContent"===u&&l.innerHTML&&""!==l.innerHTML.trim()&&i(l,"innerHTML",o.join(""))},c=t=>Jt(Rt.getState(),s,t,e,a),u=n=>{if(Object.keys(o).filter(t=>t.startsWith("content_atfpp_"+n+"_atfpp_innerContent")).length>0)return;let r=Object.keys(o).filter(t=>t.startsWith("content_atfpp_"+n+"_atfpp_attrs")),i={};r.forEach(t=>{const n=((t,e,n)=>t.translatedContent[e]?.[n]?.source)(Rt.getState(),s,t),r=Jt(Rt.getState(),s,t,e,a);n&&r&&""!==n&&""!==r&&(i[n]=r)});let l=Object.entries(i).sort((t,e)=>e[0].split(/\s+/).length-t[0].split(/\s+/).length).reduce((t,[e,n])=>(t[e]=n,t),{}),c=n.split("_atfpp_"),u=t.content,p=null,g=null;c.forEach(t=>{p=u,g=t,u=u[t]}),d(u,l),r=null,i=null,l=null,c=null,u=null,p=null,g=null},d=(t,e)=>{if(t&&t.innerHTML&&""!==t.innerHTML.trim()){if("core/more"===t.blockName){const n=Object.keys(e)[0],a=e[n],s=new RegExp(`\x3c!--more\\s+${n}`,"g");return t.innerHTML=t.innerHTML.replace(s,`\x3c!--more ${a}`),void(t.innerContent&&t.innerContent.length>0&&t.innerContent.forEach((e,s)=>{const r=new RegExp(`\x3c!--more\\s+${n}`,"g");t.innerContent[s]=e.replace(r,`\x3c!--more ${a}`)}))}let n=t.innerHTML;Object.keys(e).forEach(t=>{const a=new RegExp(`(?<!<[^>]*)${t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}(?![^<]*>)`,"g");n=n.replace(a,e[t])}),t.innerHTML=n,n=null,t.innerContent&&t.innerContent.length>0&&t.innerContent.forEach((n,a)=>{if(n&&n&&""!==n.trim()){let s=n;Object.keys(e).forEach(t=>{const n=new RegExp(`(?<!<[^>]*)${t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}(?![^<]*>)`,"g");s=s.replace(n,e[t])}),t.innerContent[a]=s,s=null}})}};return((t,e)=>{const n=[];Object.keys(e).forEach(a=>{const s=a.split("_atfpp_");if("title"===s[0])((t,e)=>{e&&""!==e&&(t.title=c("title"))})(t,e[s[0]]);else if("content"===s[0]){let e=s,o=t.content;const u=c(a);let d=null,p=null;if(e=e.slice(1),e.includes("attrs")){const a=e.indexOf("attrs"),s=e.slice(0,a);let r=null,o=t.content;const i=s.join("_atfpp_");n.includes(i)||(s.forEach(t=>{r=t,o=o[t]}),(o&&"core/more"===o.blockName||o&&!o.blockName.startsWith("core/")&&(o.innerHTML&&""!==o.innerHTML.trim()||o.originalContent&&""!==o.originalContent.trim()))&&n.push(i))}e.forEach(t=>{d=o,p=t,o=o[t]}),d&&p&&a.includes("innerContent")&&!r.includes(a)?l(a):d&&p&&i(d,p,u)}}),n.forEach(t=>{u(t)})})(t,n),t},te=(t,e,n,a,s,r,o)=>{(({postId:t,key:e,lang:n,storeDispatch:a})=>{const s=Rt.getState().translatedContent[t][e]?.source;if(s){const e=s.split(/(?<=[.!?]+)\s+/).length,r=s.trim().split(/\s+/).filter(t=>/[^\p{L}\p{N}]/.test(t)).length,o=s.length,i=Rt.getState().translatePostInfo[t+"_"+n],l=i?.stringsTranslated||0,c=i?.charactersTranslated||0,u=i?.wordsTranslated||0;a(Pt({[t+"_"+n]:{stringsTranslated:l+e,charactersTranslated:c+o,wordsTranslated:u+r}})),a(Nt({stringsTranslated:Rt.getState().countInfo.stringsTranslated+e,charactersTranslated:Rt.getState().countInfo.charactersTranslated+o}))}})({postId:t,key:e,lang:r,storeDispatch:o}),o(Et({postId:t,uniqueKey:e,key:n,provider:s,value:a}))},ee=t=>{const{element:e,scrollSpeed:n,prefix:a,completedPostStatus:s,totalPosts:r,postId:o,lang:i}=t;if(e.scrollHeight-e.offsetHeight<=0)return;let l=null,c=e.scrollTop;const u=()=>{const t=e.scrollHeight-e.offsetHeight+100,d=performance.now();l||(l=d);const p=c+(d-l)/n*(t+2e3-c);var g=e.scrollTop/(e.scrollHeight-e.clientHeight)*100;let f=(Math.round(10*g)/10).toFixed(2);f=Math.min(f,100).toString(),ae(a,o,i,f,s,r),p>t||(e.scrollTop=p,p<t&&requestAnimationFrame(u))};requestAnimationFrame(u)},ne=({provider:t,startTime:e,endTime:n,prefix:a,postId:s,lang:r,storeDispatch:o})=>{document.querySelector(`#${a}-${t}-table-container[data-render-id="${s}"]`)&&(({provider:t,startTime:e,endTime:n,prefix:a,postId:s,lang:r,storeDispatch:o})=>{const i=document.querySelector(`#${a}-${t}-table-container[data-render-id="${s}"]`);i&&i.querySelectorAll(`.${a}-${t}-table-cell`).forEach((e,n)=>{const a=e.innerText,i=e.dataset.key;te(s,i,r,a,t,r,o)})})({provider:t,startTime:e,endTime:n,prefix:a,postId:s,lang:r,storeDispatch:o})},ae=(t,e,n,a,s,r)=>{const o=document.querySelector(`.${t}-progress-bar-circular[data-id="${e}_${n}"]`);let i=a;i=Math.round(i),i=Math.min(i,100),o&&(o.querySelector(`.${t}-percentage`).innerHTML=i+"%",o.querySelector(`.${t}-progress`).style.strokeDasharray=i+", 100");let l=s+a/r;const c=document.querySelector(`.${t}-overall-progress .${t}-progress`);c&&(l=l.toFixed(2),l=Math.min(l,100),c.style.width=l+"%",c.innerHTML=l+"%")},se=class{constructor({sourceLang:t="en",targetLangs:e=!1,updateContent:n,totalPosts:a,storeDispatch:s,postId:r,prefix:o,updateDestoryHandler:i}){this.sourceLang=t,this.targetLangs=e,this.updateContent=n,this.totalPosts=a,this.storeDispatch=s,this.postId=r,this.prefix=o,this.updateDestoryHandler=i,this.stopTranslation=!1,this.textContentObject=((t,e)=>{const n={};return t.translatedContent[e]&&Object.keys(t.translatedContent[e]).length>0&&Object.keys(t.translatedContent[e]).forEach(a=>{t.translatedContent[e][a]?.targetContent&&(n[a]=t.translatedContent[e][a]?.targetContent)}),n})(Rt.getState(),r),this.appendStringTable(),i(()=>{this.destroy()})}destroy=()=>{this.stopTranslation=!0};createGoogleTranslator=async(t,e)=>{if(this.stopTranslation)return;this.completedTranslateIndex=0,this.googleTranslator=null;const n=lmatBulkTranslationGlobal.languageObject;if(this.completedPostStatus=Wt(Rt.getState()),["ab","ace","ach","aa","af","sq","alz","am","ar","hy","as","av","awa","ay","az","ban","bal","bm","bci","ba","eu","btx","bts","bbc","be","bem","bn","bew","bho","bik","bs","br","bg","bua","yue","ca","ceb","ch","ce","ny","zh-CN","zh-TW","chk","cv","co","crh","crh-Latn","hr","cs","da","fa-AF","dv","din","doi","dov","nl","dyu","dz","en","eo","et","ee","fo","fj","tl","fi","fon","fr","fr-CA","fy","fur","ff","gaa","gl","ka","de","el","gn","gu","ht","cnh","ha","haw","iw","hil","hi","hmn","hu","hrx","iba","is","ig","ilo","id","iu-Latn","iu","ga","it","jam","ja","jw","kac","kl","kn","kr","pam","kk","kha","km","cgg","kg","rw","ktu","trp","kv","gom","ko","kri","ku","ckb","ky","lo","ltg","la","lv","lij","li","ln","lt","lmo","lg","luo","lb","mk","mad","mai","mak","mg","ms","ms-Arab","ml","mt","mam","gv","mi","mr","mh","mwr","mfe","chm","mni-Mtei","min","lus","mn","my","nhe","ndc-ZW","nr","new","ne","bm-Nkoo","no","nus","oc","or","om","os","pag","pap","ps","fa","pl","pt","pt-PT","pa","pa-Arab","qu","kek","rom","ro","rn","ru","se","sm","sg","sa","sat-Latn","sat","gd","nso","sr","st","crs","shn","sn","scn","szl","sd","si","sk","sl","so","es","su","sus","sw","ss","sv","ty","tg","ber-Latn","ber","ta","tt","te","tet","th","bo","ti","tiv","tpi","to","lua","ts","tn","tcy","tum","tr","tk","tyv","ak","udm","uk","ur","ug","uz","ve","vec","vi","war","cy","wo","xh","sah","yi","yo","yua","zap","zu"].includes(this.filterLanguage(t))){this.activeTargetLang=t,this.storeDispatch(Pt({[this.postId+"_"+t]:{status:"running",messageClass:""}})),this.startTime=new Date;const e=await this.translateContent();this.stopTranslation||(this.storeDispatch($t(100/this.totalPosts)),e&&(this.updateContent(t),await new Promise(t=>setTimeout(t,500))))}else this.storeDispatch(kt(this.postId+"_"+t)),this.storeDispatch($t(100/this.totalPosts)),this.storeDispatch(Pt({[this.postId+"_"+t]:{status:"error",messageClass:"error",errorMessage:(0,s.sprintf)((0,s.__)("Language %s(%s) is not supported by Google Translate","linguator-multilingual-ai-translation"),n[t].name,t),errorHtml:!1}}));this.startTime=null,e<this.targetLangs.length-1&&!this.stopTranslation&&await this.createGoogleTranslator(this.targetLangs[e+1],e+1)};appendTranslateWidget=async()=>{var t,e;(t=Rt.getState(),e=this.postId,t.parentPostsInfo[e]?.languages).map(t=>this.filterLanguage(t)),this.googleTranslator=new google.translate.TranslateElement({pageLanguage:this.sourceLang,defaultLanguage:this.sourceLang,multilanguagePage:!0,autoDisplay:!1},`${this.prefix}-google-translate-btn`);const n=document.querySelector(`#${this.prefix}-google-translate-btn`);n&&n.children.length<=0&&Object.values(google?.translate?.TranslateElement()).map(t=>{t instanceof HTMLElement&&t.id===`${this.prefix}-google-translate-btn`&&n.replaceWith(t)})};appendStringTable=()=>{const t=jQuery(`#${this.prefix}-google-table-container`),e=jQuery(`#${this.prefix}-container`);if(t&&t.length>0){t.find(`#${this.prefix}-google-translate-strings-container`).remove(),t.attr("data-render-id",this.postId);const e=`<div id="${this.prefix}-google-translate-strings-container">\n            ${Object.keys(this.textContentObject).map(t=>`\n                <div class="${this.prefix}-google-table-row">\n                    <div class="${this.prefix}-google-table-cell" data-key="${t}">${this.textContentObject[t]}</div>\n                </div>\n            `).join("")}\n            </div>`;t.append(e)}else{const t=`\n            <div id="${this.prefix}-google-table-container" class="translate" data-render-id="${this.postId}">\n            <div id="${this.prefix}-google-translate-btn">Translate</div>\n            <div id="${this.prefix}-google-translate-strings-container">\n            ${Object.keys(this.textContentObject).map(t=>`\n                <div class="${this.prefix}-google-table-row">\n                    <div class="${this.prefix}-google-table-cell" data-key="${t}">${this.textContentObject[t]}</div>\n                </div>\n            `).join("")}\n            </div>\n            </div>\n            `;e.append(t)}document.documentElement.setAttribute("translate","no"),document.body.classList.add("notranslate")};translateContent=async()=>{const t=document.querySelector(`#${this.prefix}-google-translate-btn .goog-te-combo`);if(await new Promise(t=>setTimeout(t,1e3)),t){if(!t.querySelector('option[value="'+this.filterLanguage(this.activeTargetLang)+'"]')){const t=lmatBulkTranslationGlobal.languageObject;return this.storeDispatch(Pt({[this.postId+"_"+this.activeTargetLang]:{status:"error",messageClass:"error",errorMessage:(0,s.sprintf)((0,s.__)("Language %s(%s) is not supported by Google Translate","linguator-multilingual-ai-translation"),t[this.activeTargetLang].name,this.activeTargetLang),errorHtml:!1}})),!1}if(document.body.classList.add(this.prefix+"-google-translate"),t.value=this.filterLanguage(this.activeTargetLang),t.dispatchEvent(new Event("change")),await new Promise(t=>setTimeout(t,1500)),this.stopTranslation)return!1;await(async({provider:t,prefix:e,postId:n,lang:a,storeDispatch:s,totalPosts:r,completedPostStatus:o})=>{const i=(new Date).getTime();let l=!1;const c=document.querySelector(`#${e}-${t}-table-container[data-render-id="${n}"]`);c.scrollTop=0;const u=c.scrollHeight;await new Promise(d=>{if(c)if("number"==typeof u&&u>100){const p=()=>{if("visible"===document.visibilityState){const t=1e3*Math.ceil(u/(c.offsetHeight||1));ee({element:c,scrollSpeed:t,prefix:e,totalPosts:r,completedPostStatus:o,postId:n,lang:a})}};document.addEventListener("visibilitychange",p),setTimeout(()=>{const s=1e3*Math.ceil(u/(c.offsetHeight||1));ee({element:c,scrollSpeed:s,provider:t,prefix:e,totalPosts:r,completedPostStatus:o,postId:n,lang:a})},500);const g=()=>{if(c.scrollTop+c.clientHeight+50>=c.scrollHeight&&!l){l=!0,c.removeEventListener("scroll",g);const u=(new Date).getTime();ae(e,n,a,100,o,r),document.removeEventListener("visibilitychange",p),setTimeout(()=>{ne({provider:t,startTime:i,endTime:u,prefix:e,postId:n,lang:a,storeDispatch:s}),d("Complete")},1e3)}};c.addEventListener("scroll",g),(c.clientHeight||0)+10>=u&&(ae(e,n,a,100,o,r),setTimeout(()=>{const r=(new Date).getTime();document.removeEventListener("visibilitychange",p),ne({provider:t,startTime:i,endTime:r,prefix:e,postId:n,lang:a,storeDispatch:s}),d("Complete")},1e3))}else ae(e,n,a,100,o,r),setTimeout(()=>{const r=(new Date).getTime();ne({provider:t,startTime:i,endTime:r,prefix:e,postId:n,lang:a,storeDispatch:s}),d("Complete")},1e3);else d("No container")})})({provider:"google",prefix:this.prefix,postId:this.postId,lang:this.activeTargetLang,storeDispatch:this.storeDispatch,totalPosts:this.totalPosts,completedPostStatus:this.completedPostStatus});const e=new Date-this.startTime,n=Kt(Rt.getState(),(this.postId,this.activeTargetLang)).duration||0;return this.storeDispatch(Pt({[this.postId+"_"+this.activeTargetLang]:{duration:n+e}})),!0}};filterLanguage=t=>"zh"===t?lmatBulkTranslationGlobal.languageObject.zh?.locale.replace("_","-"):t;async initTranslation(){this.textContentObject&&Object.keys(this.textContentObject).length>0&&this.targetLangs&&this.targetLangs.length>0&&!this.stopTranslation?(this.appendTranslateWidget(),await this.createGoogleTranslator(this.targetLangs[0],0)):this.targetLangs&&this.targetLangs.length>0&&!this.stopTranslation&&this.targetLangs.forEach(t=>{this.storeDispatch(kt(this.postId+"_"+t)),this.storeDispatch($t(100/this.totalPosts)),this.storeDispatch(Pt({[this.postId+"_"+t]:{status:"error",messageClass:"error",errorMessage:(0,s.__)("No content to translate","linguator-multilingual-ai-translation"),errorHtml:!1}}))})}},re=t=>{t=t||{};const{Service:e=!1,openErrorModalHandler:n=()=>{},prefix:a=""}=t,o=(window.lmatBulkTranslationGlobal.admin_url,window.lmatBulkTranslationGlobal.lmat_url+"Admin/Assets/images/error-icon.svg"),i={google:{Provider:se,title:"Google Translate",SettingBtnText:"Translate",serviceLabel:"Google Translate",Docs:"https://docs.coolplugins.net/doc/google-translate-for-polylang/?utm_source=atfp_plugin&utm_medium=inside&utm_campaign=docs&utm_content=bulk_translate_google",heading:(0,s.__)("Choose Language","linguator-multilingual-ai-translation"),BetaEnabled:!1,ButtonDisabled:t.googleButtonDisabled,ErrorMessage:t.googleButtonDisabled?(0,r.jsxs)("div",{className:`${a}-provider-error button button-primary`,onClick:()=>n(t.googleButtonDisabled),children:[(0,r.jsx)("img",{src:o,alt:"error"})," ",(0,s.__)("View Error.","linguator-multilingual-ai-translation")]}):(0,r.jsx)(r.Fragment,{}),Logo:"google.png",filterHtmlContent:!0},localAiTranslator:{title:"Chrome Built-in AI",SettingBtnText:"Translate",serviceLabel:"Chrome AI Translator",heading:(0,s.sprintf)((0,s.__)("Translate Using %s","autopoly-ai-translation-for-polylang"),"Chrome built-in API"),Docs:"https://docs.coolplugins.net/doc/chrome-ai-translation-polylang/?utm_source=lmat_page_translation_plugin&utm_medium=inside&utm_campaign=docs&utm_content=popup_chrome",BetaEnabled:!0,ButtonDisabled:!0,ErrorMessage:(0,r.jsx)("div",{className:"lmat-page-translation-provider-disabled button button-primary",children:(0,s.__)("Upcoming Feature","autopoly-ai-translation-for-polylang")}),Logo:"chrome.png"}};return e?i[e]:i},oe=async({source:t,postId:e,lang:n,editorType:a})=>{const s={classic:Xt,elementor:Qt,block:Yt},r=Gt(Rt.getState()),o=Zt(Rt.getState(),e);return await s[a]({source:t,lang:n,translatedContent:o,serviceProvider:r,postId:e})},ie=(window.wp.data,async({sourceLang:t,targetLangs:e,totalPosts:n,storeDispatch:a,postId:s,prefix:r,source:o,editorType:i,createTranslatePostNonce:l,updateDestoryHandler:c})=>{const u=Rt.getState().serviceProvider,d=re({Service:u});if(d&&d.Provider){const u=new d.Provider({sourceLang:t,targetLangs:e,totalPosts:n,storeDispatch:a,postId:s,createTranslatePostNonce:l,updateContent:async e=>{await le({source:o,postId:s,sourceLang:t,lang:e,editorType:i,createTranslatePostNonce:l,storeDispatch:a})},prefix:r,updateDestoryHandler:c});await u.initTranslation()}}),le=async({source:t,postId:e,sourceLang:n,lang:a,editorType:r,createTranslatePostNonce:o,storeDispatch:i})=>{const l=Rt.getState().serviceProvider,c=JSON.parse(JSON.stringify(t)),u=await oe({source:c,postId:e,lang:a,editorType:r,service:l}),d=lmatBulkTranslationGlobal.bulkTranslateRouteUrl,p=lmatBulkTranslationGlobal.nonce;i(Pt({[e+"_"+a]:{status:"in-progress",messageClass:"in-progress"}})),await fetch(d+`/${e}:create-translate-post`,{method:"POST",body:new URLSearchParams({post_id:e,target_language:a,editor_type:r,post_title:u.title||"",post_content:u.content?JSON.stringify(u.content):"",post_meta_fields:u.metaFields?JSON.stringify(u.metaFields):"",privateKey:o,source_language:n}),headers:{"X-WP-Nonce":p,"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"}}).then(async t=>{const o=await t.json();let c={};if(o.success&&o.data.post_id)(({provider:t,sourceLang:e,targetLang:n,parentPostId:a,currentPostId:s,editorType:r,updateTranslateDataNonce:o})=>{if(!(o&&s&&a&&t&&e&&n&&r))return;const i=Rt.getState().parentPostsInfo[a],l=Rt.getState().translatePostInfo[a+"_"+n],c=l.stringsTranslated||0,u=l.wordsTranslated||0,d=l.charactersTranslated||0,p=(l.duration||0)/1e3,g=i.wordsCount||0,f=i.charactersCount||0,h=i.stringsCount||0,m={provider:t,totalStringCount:c,totalWordCount:u,totalCharacterCount:d,editorType:r,date:(new Date).toISOString(),sourceStringCount:h,sourceWordCount:g,sourceCharacterCount:f,sourceLang:e,targetLang:n,timeTaken:p,action:lmatBulkTranslationGlobal.update_translate_data,update_translation_key:o,post_id:s,ajax_url:lmatBulkTranslationGlobal.ajax_url};fetch(lmatBulkTranslationGlobal.ajax_url,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams(m)}).then(t=>t.json()).then(t=>{console.log(t.data.message)}).catch(t=>{console.error(t)})})({provider:l,sourceLang:n,targetLang:a,currentPostId:o.data.post_id,parentPostId:e,editorType:r,updateTranslateDataNonce:o?.data?.update_translate_data_nonce}),o.data.post_title=""===o.data.post_title?(0,s.__)("N/A","linguator-multilingual-ai-translation"):o.data.post_title,c={targetPostId:o.data.post_id,targetPostTitle:o.data.post_title,targetLanguage:a,postLink:o.data.post_link,postEditLink:o.data.post_edit_link,status:"completed",messageClass:"success"},i(Nt({postsTranslated:Rt.getState().countInfo.postsTranslated+1}));else if(o.data&&o.data.error){let t="Error Code:"+o.data.status;"string"==typeof o.data.error&&(t+="<br>Error Message:"+o.data.error+"("+o.data.error+")"),"object"==typeof o.data.error&&(t+="<br>Error Message:"+JSON.stringify(o.data.error)),c={status:"error",messageClass:"error",errorMessage:(0,s.__)("Post not created. Please try again.","linguator-multilingual-ai-translation"),errorHtml:'<div class="lmat-error-html">'+t+"</div>"}}else o.code&&o.message?c={status:"error",messageClass:"error",errorMessage:(0,s.__)("Post not created. Please try again.","linguator-multilingual-ai-translation"),errorHtml:'<div class="lmat-error-html">'+o.message+"</div>"}:!o.success||o.data?c={status:"error",messageClass:"error",errorMessage:(0,s.__)("Post not created. Please try again.","linguator-multilingual-ai-translation"),errorHtml:'<div class="lmat-error-html">'+o.data+"</div>"}:o.data.post_id?"string"==typeof o&&(c={status:"error",messageClass:"error",errorMessage:(0,s.__)("Post not created. Please try again.","linguator-multilingual-ai-translation"),errorHtml:'<div class="lmat-error-html">'+o+"</div>"}):c={status:"error",messageClass:"error",errorMessage:(0,s.__)("Post not created. Please try again.","linguator-multilingual-ai-translation"),errorHtml:'<div class="lmat-error-html">'+o.data+"</div>"};i(kt(e+"_"+a)),i(Ct([e+"_"+a])),i(Pt({[e+"_"+a]:c}))}).catch(t=>{console.log("testing",t),i(kt(e+"_"+a)),i(Ct([e+"_"+a]));let n=t;t.message&&(n=t.message),t.data&&t.data.status&&(n="Error Code:"+t.data.status,"string"==typeof t.data.error&&(n+="<br>Error Message:"+t.data.error),"object"==typeof t.data.error&&(n+="<br>Error Message:"+JSON.stringify(t.data.error))),i(Pt({[e+"_"+a]:{status:"error",messageClass:"error",errorMessage:(0,s.__)("Post not created. Please try again.","linguator-multilingual-ai-translation"),errorHtml:'<div class="lmat-error-html">'+n+"</div>"}}))})};var ce=n(418);var ue={notify(){},get:()=>[]};var de=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),pe=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),ge=(()=>de||pe?a.useLayoutEffect:a.useEffect)();Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var fe=Symbol.for("react-redux-context"),he="undefined"!=typeof globalThis?globalThis:{};function me(){if(!a.createContext)return{};const t=he[fe]??=new Map;let e=t.get(a.createContext);return e||(e=a.createContext(null),t.set(a.createContext,e)),e}var _e=me(),ye=function(t){const{children:e,context:n,serverState:s,store:r}=t,o=a.useMemo(()=>{const t=function(t,e){let n,a=ue,s=0,r=!1;function o(){c.onStateChange&&c.onStateChange()}function i(){s++,n||(n=e?e.addNestedSub(o):t.subscribe(o),a=function(){let t=null,e=null;return{clear(){t=null,e=null},notify(){(()=>{let e=t;for(;e;)e.callback(),e=e.next})()},get(){const e=[];let n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(n){let a=!0;const s=e={callback:n,next:null,prev:e};return s.prev?s.prev.next=s:t=s,function(){a&&null!==t&&(a=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}())}function l(){s--,n&&0===s&&(n(),n=void 0,a.clear(),a=ue)}const c={addNestedSub:function(t){i();const e=a.subscribe(t);let n=!1;return()=>{n||(n=!0,e(),l())}},notifyNestedSubs:function(){a.notify()},handleChangeWrapper:o,isSubscribed:function(){return r},trySubscribe:function(){r||(r=!0,i())},tryUnsubscribe:function(){r&&(r=!1,l())},getListeners:()=>a};return c}(r);return{store:r,subscription:t,getServerState:s?()=>s:void 0}},[r,s]),i=a.useMemo(()=>r.getState(),[r]);ge(()=>{const{subscription:t}=o;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),i!==r.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}},[o,i]);const l=n||_e;return a.createElement(l.Provider,{value:o},e)};function be(t=_e){return function(){return a.useContext(t)}}var ve=be();function xe(t=_e){const e=t===_e?ve:be(t),n=()=>{const{store:t}=e();return t};return Object.assign(n,{withTypes:()=>n}),n}var we=xe();function je(t=_e){const e=t===_e?we:xe(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Te=je(),Ce=(t,e)=>t===e;function Se(t=_e){const e=t===_e?ve:be(t),n=(t,n={})=>{const{equalityFn:s=Ce}="function"==typeof n?{equalityFn:n}:n,r=e(),{store:o,subscription:i,getServerState:l}=r,c=(a.useRef(!0),a.useCallback({[t.name]:e=>t(e)}[t.name],[t])),u=(0,ce.useSyncExternalStoreWithSelector)(i.addNestedSub,o.getState,l||o.getState,c,s);return a.useDebugValue(u),u};return Object.assign(n,{withTypes:()=>n}),n}var ke=Se();const Pe=window.wp.element,$e=({message:t,onClose:e,onDestroy:n,Title:a,prefix:o,children:i})=>{let l=jQuery("<div>").append(t);const c=l.html();return l.remove(),l=null,(0,Pe.useEffect)(()=>{const t=document.querySelectorAll(".chrome-ai-translator-flags");if(t.length>0)return t.forEach(t=>{t.classList.add(`${o}-tooltip-element`),t.addEventListener("click",e=>{if(e.preventDefault(),t.querySelector(`.${o}-tooltip`))return;let n=document.createElement("span");n.textContent="Text to be copied.",n.className=`${o}-tooltip`,t.appendChild(n),(async({text:t=!1,startCopyStatus:e=()=>{},endCopyStatus:n=()=>{}})=>{if(t&&""!==t)try{if(navigator?.clipboard?.writeText)await navigator.clipboard.writeText(t);else{const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand&&document.execCommand("copy"),document.body.removeChild(e)}e(),setTimeout(()=>n(),800)}catch(t){console.error("Error copying text to clipboard:",t)}})({text:t.getAttribute("data-clipboard-text"),startCopyStatus:()=>{n.classList.add(`${o}-tooltip-active`)},endCopyStatus:()=>{setTimeout(()=>{n.remove()},800)}})})}),()=>{t.forEach(t=>{t.removeEventListener("click",()=>{})})}},[]),(0,r.jsx)("div",{className:`${o}-error-modal-box-container`,children:(0,r.jsxs)("div",{className:`${o}-error-modal-box`,children:[(0,r.jsxs)("div",{className:`${o}-error-modal-box-header`,children:[(0,r.jsx)("span",{className:`${o}-error-modal-box-close`,onClick:n,children:"×"}),a&&(0,r.jsx)("h3",{children:a})]}),(0,r.jsxs)("div",{className:`${o}-error-modal-box-body`,children:[(0,r.jsx)("p",{dangerouslySetInnerHTML:{__html:c}}),i]}),(0,r.jsx)("div",{className:`${o}-error-modal-box-footer`,children:(0,r.jsx)("button",{className:`${o}-error-modal-box-close button button-primary`,onClick:e,children:(0,s.__)("Back","linguator-multilingual-ai-translation")})})]})})},Ne=({postIds:t,selectedLanguages:e,prefix:n,onDestory:o})=>{const i=Te(),[l,c]=(0,a.useState)(!0),[u,d]=(0,a.useState)(!1),[p,g]=(0,a.useState)(!1),f=ke(Kt),[h,m]=(0,a.useState)([]),_=ke(Ut),y=ke(Gt),[b,v]=(0,a.useState)(!0),[x,w]=(0,a.useState)(!1),[j,T]=(0,a.useState)("status"),C=ke(Vt);let[S,k]=(0,a.useState)(sprintf((0,s.__)("Translations already exist for all selected %s in the chosen languages. There are no new %s to translate.","linguator-multilingual-ai-translation"),lmatBulkTranslationGlobal.post_label,lmatBulkTranslationGlobal.post_label)),P=ke(Wt);P=P.toFixed(1),P=Math.min(P,100),(0,a.useEffect)(()=>{(async()=>{const a=await(async({ids:t,langs:e,storeDispatch:n})=>{const a=lmatBulkTranslationGlobal.bulkTranslateRouteUrl,s=lmatBulkTranslationGlobal.bulkTranslatePrivateKey,r=lmatBulkTranslationGlobal.nonce;let o=!1;const i=await fetch(a+"/local-ai:bulk-translate-entries",{method:"POST",body:new URLSearchParams({ids:JSON.stringify(t),lang:JSON.stringify(e),privateKey:s,lmat_fetch_block_rules_key:lmatBulkTranslationGlobal.fetchBlockRulesNonce}),headers:{"X-WP-Nonce":r,"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"}}),l=await i.json();if(!l.success&&!l.code&&l.data&&l.data.message)return{success:!1,message:l.data.message};if(!l.success&&!l.message&&l.data.error)return{success:!1,message:JSON.stringify(l.data.error)};if(!l.success&&l.message&&l.data.trace&&l.data.message)return l.data&&l.data.trace&&delete l.data.trace,{success:!1,message:JSON.stringify(l.data)};if(!l.success&&l.message)return{success:!1,message:l.message};if(!(l&&l.success&&l.data&&l.data.posts&&l.data.CreateTranslatePostNonce))return;const c=l.data.posts,u=Object.keys(c);if(u.length>0){const t=new Array,e=Object.keys(Rt.getState().translatePostInfo);u.forEach(a=>{const s=c[a].languages,r=c[a].title;s&&s.length>0&&s.forEach(s=>{if(e.includes(a+"_"+s))return;let o=!1;t.includes(a)||e.includes(a+"_"+s)||(t.push(a),o=!0);const i=lmatBulkTranslationGlobal.languageObject[s].flag,l=lmatBulkTranslationGlobal.languageObject[s].name;n(St([a+"_"+s])),n(Pt({[a+"_"+s]:{parentPostId:a,targetPostId:null,targetLanguage:s,postLink:null,status:"pending",parentPostTitle:r,firstPostLanguage:o,flagUrl:i,languageName:l,messageClass:"warning"}}))})});const a=async(t,e)=>{const s=u[t],r=Rt.getState().serviceProvider,{title:i,content:d,languages:p,editor_type:g,metaFields:f=null,sourceLanguage:h}=c[s];if(p&&p.length>0){n(At({lang:p}));const t={content:d,editorType:g,metaFields:f,service:r,postId:s,storeDispatch:n};if("block"===g&&(t.blockParseRules=JSON.parse(l?.data?.blockParseRules),o||(n(Ht(JSON.parse(l?.data?.blockParseRules))),o=!0)),await(({content:t,editorType:e,service:n,postId:a,storeDispatch:s,blockParseRules:r=null,metaFields:o=null})=>{const i={classic:Ft,elementor:zt,block:qt},l={content:t,service:n,postId:a,storeDispatch:s};return l.filterHtmlContent=re({Service:n}).filterHtmlContent,r&&(l.blockParseRules=r),i[e]?i[e](l):t})(t),["classic","block","elementor"].includes(g)){i&&""!==i.trim()&&(n(Ot({postId:s,uniqueKey:"title",value:i})),n(It({postId:s,uniqueKey:"title",value:i})));const t=Rt.getState().parentPostsInfo[s],e=(t?.charactersCount||0)+i.length,a=(t?.wordsCount||0)+i.split(/\s+/).filter(t=>/[^\p{L}\p{N}]/.test(t)).length,r=(t?.stringsCount||0)+i.split(/(?<=[.!?]+)\s+/).length;n(Dt({postId:s,data:{editorType:g,originalContent:{title:i,content:d},languages:p,sourceLanguage:h,charactersCount:e,wordsCount:a,stringsCount:r}})),n(Nt({totalPosts:Rt.getState().countInfo.totalPosts+p.length}))}}else console.log(`All target languages for post ${s} already exist. Skipping translation.`);++t>u.length-1||await a(t,e)},s=Rt.getState().pendingPosts.length;return await a(0,s),{postKeys:u,nonce:l.data.CreateTranslatePostNonce}}})({ids:t,langs:e,storeDispatch:i});c(!1),a.success||!1!==a.success||!a.message?(async(t=[],e,n,a,r)=>{const o=Rt.getState().pendingPosts;if(o.length<1)return;let i=!1;r(()=>{i=!0});const l=async c=>{const u=t[c];if(!u||i)return;const d=Rt.getState().parentPostsInfo[u];if(d){const{originalContent:{title:t,content:i},languages:l,editorType:c,sourceLanguage:p}=d;if(!l||0===l.length)return void console.log(`All target languages for post ${u} already exist. Skipping translation.`);if(!["classic","block","elementor"].includes(c))for(const t of l)n(kt(u+"_"+t)),n(updateProgressStatus(100/o.length)),n(Pt({[u+"_"+t]:{status:"error",messageClass:"error",errorMessage:(0,s.__)("This post editor type is not supported for translation","linguator-multilingual-ai-translation")}}));const g={title:t,content:JSON.parse(JSON.stringify(i))};await ie({sourceLang:p,targetLangs:l,totalPosts:o.length,storeDispatch:n,prefix:a,postId:u,source:g,editorType:c,createTranslatePostNonce:e,updateDestoryHandler:r})}++c>t.length-1||i||await l(c)};await l(0)})(a.postKeys,a.nonce,i,n,$):k(a.message)})()},[]);const $=t=>{m(e=>[...e,t])};(0,a.useEffect)(()=>{if(C.totalPosts<1&&!l&&"status"!==j)N("status");else if(f&&Object.keys(f).length>0){if(_.length<1)return void N("completed");let t=!1,e=!1;const n=(a,s)=>{const r=f[a[s]].status;if("running"===r||"in-progress"===r||"pending"===r)return e=!0,void("running"!==j&&N("running"));"error"===r&&(t=!0),++s<a.length&&n(a,s)};if(n(Object.keys(f),0),e)return;N("pending")}},[f]);const N=t=>{T(t)};return(0,a.useEffect)(()=>{if(P>=100&&_.length<1){if(C.postsTranslated<1)return v(!1),void w(!1);C.stringsTranslated>0&&setTimeout(()=>{w(!0)},1e3),setTimeout(()=>{v(!1),w(!1)},7500)}},[_]),u?(0,r.jsx)($e,{message:p.errorHtml,onClose:t=>{d(!1),g(!1)},Title:(0,s.__)("Bulk Translation Error","linguator-multilingual-ai-translation"),prefix:n}):(0,r.jsxs)("div",{id:`${n}-status-modal-container`,children:[(0,r.jsxs)("h2",{className:`${n}-bulk-status-heading ${j}`,children:[sprintf((0,s.__)("Bulk Translation %s","linguator-multilingual-ai-translation"),(()=>{switch(j){case"running":return(0,s.__)("In Progress","linguator-multilingual-ai-translation");case"pending":return(0,s.__)("Pending","linguator-multilingual-ai-translation");case"completed":return(0,s.__)("Completed","linguator-multilingual-ai-translation");default:return(0,s.__)("Status","linguator-multilingual-ai-translation")}})()),"running"===j&&(0,r.jsx)("span",{className:`${n}-bulk-status-running`})]}),(0,r.jsx)("div",{className:`${n}-status-modal-close`,onClick:t=>{h.forEach(t=>"function"==typeof t&&t()),o(t)},children:"×"}),C.totalPosts<1&&!l?(0,r.jsx)("p",{children:S}):(0,r.jsxs)(r.Fragment,{children:[l&&(0,r.jsx)("div",{className:`${n}-progress-skeleton`}),b&&!l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:`${n}-overall-progress`,children:(0,r.jsx)("div",{className:`${n}-progress-bar`,children:(0,r.jsx)("div",{className:`${n}-progress`,style:{width:P+"%"},children:P+"%"})})}),x&&(0,r.jsxs)("div",{className:`${n}-translator-strings-count`,children:[(0,s.__)("Wahooo! You have saved your valuable time via auto translating","linguator-multilingual-ai-translation"),(0,r.jsxs)("strong",{className:"totalChars",children:[" ",C.charactersTranslated," "]}),(0,s.__)("characters using","linguator-multilingual-ai-translation"),(0,r.jsxs)("strong",{children:[" ","google"===y?"Google Translate":"AI Translator"]})]})]}):C.postsTranslated>0&&(0,r.jsxs)("div",{className:`${n}-count-container`,children:[(0,r.jsxs)("div",{className:`${n}-post-count`,children:[(0,r.jsxs)("span",{className:`${n}-count-text-heading`,children:[(0,s.__)("Posts Translated:","linguator-multilingual-ai-translation")," "]}),(0,r.jsx)("span",{className:`${n}-post-translated-post`,children:C.postsTranslated}),(0,r.jsxs)("span",{className:`${n}-post-text`,children:[" ",(0,s.__)("out of","linguator-multilingual-ai-translation")," "]}),(0,r.jsx)("span",{className:`${n}-post-total`,children:C.totalPosts}),(0,r.jsxs)("span",{className:`${n}-post-total-text`,children:[" ",(0,s.__)("posts translated","linguator-multilingual-ai-translation")]})]}),(0,r.jsxs)("div",{className:`${n}-string-count`,children:[(0,r.jsxs)("span",{className:`${n}-count-text-heading`,children:[(0,s.__)("Strings:","linguator-multilingual-ai-translation")," "]}),(0,r.jsx)("span",{className:`${n}-string-number`,children:C.stringsTranslated})]}),(0,r.jsxs)("div",{className:`${n}-char-count`,children:[(0,r.jsxs)("span",{className:`${n}-count-text-heading`,children:[(0,s.__)("Characters:","linguator-multilingual-ai-translation")," "]}),(0,r.jsx)("span",{className:`${n}-char-number`,children:C.charactersTranslated})]})]}),(0,r.jsx)("div",{className:`${n}-status-table-container`,children:(0,r.jsx)("div",{children:(0,r.jsxs)("table",{className:`${n}-status-table`,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:(0,s.__)("Language","linguator-multilingual-ai-translation")}),(0,r.jsx)("th",{children:(0,s.__)("Status","linguator-multilingual-ai-translation")}),(0,r.jsx)("th",{children:(0,s.__)("Title","linguator-multilingual-ai-translation")}),(0,r.jsx)("th",{children:(0,s.__)("Actions","linguator-multilingual-ai-translation")})]})}),(0,r.jsxs)("tbody",{children:[l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:`${n}-progress-skeleton`})}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:`${n}-progress-skeleton`})}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:`${n}-progress-skeleton`})}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:`${n}-progress-skeleton`})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:`${n}-progress-skeleton`})}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:`${n}-progress-skeleton`})}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:`${n}-progress-skeleton`})}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:`${n}-progress-skeleton`})})]})]}),!l&&Object.keys(f).map((t,e)=>{const a=f[t],o=[],i="running"===a.status||"in-progress"===a.status;return a.firstPostLanguage&&o.push((0,r.jsx)("tr",{className:`${n}-group-title`,children:(0,r.jsx)("td",{colSpan:"5",children:a.parentPostTitle||(0,s.__)("Untitled","linguator-multilingual-ai-translation")})},`group-title-${a.parentPostId||t}`)),o.push((0,r.jsxs)("tr",{className:`${n}-td-${a.status}`,children:[(0,r.jsxs)("td",{className:`${n}-status-flag`,children:[a.flagUrl&&(0,r.jsx)("img",{src:a.flagUrl,width:"20",alt:a.targetLanguage}),a.languageName||a.targetLanguage]}),"error"===a.status?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{colSpan:a.errorHtml?"2":"3",children:a.errorMessage}),a.errorHtml&&(0,r.jsx)("td",{colSpan:"1",onClick:()=>{g(a),d(!0)},children:(0,r.jsx)("button",{className:`${n}-status-error-button`,children:(0,s.__)("Error Details","linguator-multilingual-ai-translation")})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{children:(0,r.jsxs)("span",{className:`${n}-status ${a.messageClass} ${a.status}`,children:["pending"===a.status&&(0,s.__)("Pending","linguator-multilingual-ai-translation"),"completed"===a.status&&(0,s.__)("Completed","linguator-multilingual-ai-translation"),i&&(0,r.jsxs)("div",{className:`${n}-progress-bar-circular`,"data-id":a.parentPostId+"_"+a.targetLanguage,children:[(0,r.jsxs)("svg",{className:`${n}-circle`,viewBox:"0 0 36 36",children:[(0,r.jsx)("path",{className:`${n}-bg`,d:"M18 2.0845\r a 15.9155 15.9155 0 0 1 0 31.831\r a 15.9155 15.9155 0 0 1 0 -31.831"}),(0,r.jsx)("path",{className:`${n}-progress`,strokeDasharray:"0, 100",d:"M18 2.0845\r a 15.9155 15.9155 0 0 1 0 31.831\r a 15.9155 15.9155 0 0 1 0 -31.831"})]}),(0,r.jsx)("div",{className:`${n}-percentage`,children:"0%"})]})]})}),(0,r.jsx)("td",{children:(0,r.jsx)(r.Fragment,{children:"completed"===a.status?(0,r.jsx)("a",{href:a.postLink,target:"_blank",rel:"noopener noreferrer",children:a.targetPostTitle}):"in-progress"===a.status?(0,r.jsxs)("div",{className:`${n}-${a.messageClass}-text`,children:[(0,s.__)("In Progress","linguator-multilingual-ai-translation"),(0,r.jsx)("span",{})]}):(0,r.jsx)("div",{className:`${n}-progress-skeleton short`})})}),(0,r.jsx)("td",{children:"completed"===a.status&&a.targetPostId?(0,r.jsx)("span",{className:`${n}-view-link`,children:(0,r.jsx)("a",{href:a.postEditLink,target:"_blank",rel:"noopener noreferrer",className:"button button-primary",children:(0,s.__)("Review","linguator-multilingual-ai-translation")})}):"in-progress"===a.status?(0,r.jsxs)("div",{className:`${n}-${a.messageClass}-text`,children:[(0,s.__)("In Progress","linguator-multilingual-ai-translation"),(0,r.jsx)("span",{})]}):(0,r.jsx)("div",{className:`${n}-progress-skeleton short`})})]})]},t)),o})]})]})})}),C.postsTranslated>0&&!_.length&&!b&&(0,r.jsx)("div",{className:`${n}-progress-footer`,children:(0,r.jsx)("a",{className:`${n}-progress-button button button-primary`,href:(()=>{const t=Object.values(f).filter(t=>"completed"===t.status&&t.targetLanguage).map(t=>t.targetLanguage).filter((t,e,n)=>n.indexOf(t)===e);if(1===t.length){const e=t[0],n=new URL(window.location.href),a=new URLSearchParams(n.search);a.set("lang",e),a.set("orderby","date"),a.set("order","desc");const s=Object.fromEntries(a.entries());return window.location.href.split("?")[0]+"?"+new URLSearchParams(s).toString()}return window.location.href})(),children:sprintf((0,s.__)("Check Translated %s","linguator-multilingual-ai-translation"),lmatBulkTranslationGlobal.post_label)})})]})]})};n(338);const Oe=({setSettingVisibility:t,prefix:e})=>(0,r.jsxs)("div",{className:`${e}-setting-modal-header`,children:[(0,r.jsx)("h2",{children:(0,s.__)("Step 2 - Select Translation Provider","linguator-multilingual-ai-translation")}),(0,r.jsx)("span",{className:`${e}-setting-modal-close`,onClick:e=>t(e),children:"×"})]}),Ee=t=>{const e=t.Service,n=t.prefix,a=t[e+"Disabled"],s=re({Service:e,[e+"ButtonDisabled"]:a,openErrorModalHandler:t.openErrorModalHandler,prefix:n}),o=`${n}-${e.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/[^a-z0-9-]/g,"")}-btn`;return(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:`${n}-provider-name`,children:[(0,r.jsx)("img",{src:`${t.imgFolder}${s.Logo}`,alt:s.title}),(0,r.jsx)("span",{children:s.title})]}),(0,r.jsx)("td",{children:s.ButtonDisabled?s.ErrorMessage:(0,r.jsx)("button",{id:o,onClick:t.startTranslationHandler,className:`${n}-service-btn button button-primary`,"data-service":e,"data-service-label":s.ServiceLabel,children:s.SettingBtnText})}),(0,r.jsx)("td",{children:(0,r.jsx)("a",{href:s.Docs,target:"_blank",rel:"noopener noreferrer",className:`${n}-doc-icon`,children:(0,r.jsx)("svg",{width:"9",height:"12",viewBox:"0 0 9 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M2.17607 6.20533H6.82393V5.53867H2.17607V6.20533ZM2.17607 8.05133H6.82393V7.38467H2.17607V8.05133ZM2.17607 9.898H4.89536V9.23133H2.17607V9.898ZM1.03821 12C0.7425 12 0.495643 11.8973 0.297643 11.692C0.0996427 11.4867 0.000428571 11.2304 0 10.9233V1.07667C0 0.77 0.0992142 0.514 0.297643 0.308667C0.496071 0.103333 0.743143 0.000444444 1.03886 0H6.10714L9 3V10.9233C9 11.23 8.901 11.4862 8.703 11.692C8.505 11.8978 8.25771 12.0004 7.96114 12H1.03821ZM5.78571 3.33333V0.666667H1.03886C0.939857 0.666667 0.849 0.709333 0.766286 0.794666C0.683571 0.88 0.642429 0.974 0.642857 1.07667V10.9233C0.642857 11.0256 0.684 11.1196 0.766286 11.2053C0.848571 11.2911 0.939214 11.3338 1.03821 11.3333H7.96179C8.06036 11.3333 8.151 11.2907 8.23371 11.2053C8.31643 11.12 8.35757 11.0258 8.35714 10.9227V3.33333H5.78571Z",fill:"#6F6F6F"})})})})]})},Le=t=>{const{prefix:e,localAiModalError:n}=t,a=re(),s=!lmatBulkTranslationGlobal?.AIServices?.includes("openai"),o=!lmatBulkTranslationGlobal?.AIServices?.includes("google"),i=!lmatBulkTranslationGlobal?.AIServices?.includes("openrouter");return(0,r.jsx)("div",{className:`${e}-setting-modal-body`,children:(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"Translate"}),(0,r.jsx)("th",{children:"Docs"})]})}),(0,r.jsx)("tbody",{children:Object.keys(a).map(e=>(0,r.jsx)(Ee,{...t,openai_aiDisabled:s,google_aiDisabled:o,openrouter_aiDisabled:i,localAiTranslatorDisabled:n,localAiModalError:n,openErrorModalHandler:t.errorModalHandler,Service:e},e))})]})})},Ie=({setSettingVisibility:t,prefix:e})=>(0,r.jsx)("div",{className:`${e}-setting-modal-footer`,children:(0,r.jsx)("button",{className:`${e}-setting-close button button-primary`,onClick:()=>t(!1),children:(0,s.__)("Back","linguator-multilingual-ai-translation")})}),De=t=>{const e=t.prefix||"lmat-bulk-translate",n=lmatBulkTranslationGlobal.lmat_url+"Admin/Assets/images/",[s,o]=(0,a.useState)(!1);return(0,r.jsx)(r.Fragment,{children:s?(0,r.jsx)($e,{message:s,onDestroy:t.onDestory,onClose:()=>{o(!1)},Title:"AutoPoly - AI Translation For Polylang (Pro)",prefix:e}):(0,r.jsx)("div",{id:`${e}-setting-modal-container`,children:(0,r.jsxs)("div",{className:`${e}-setting-modal-content`,children:[(0,r.jsx)(Oe,{setSettingVisibility:t.onDestory,prefix:e}),(0,r.jsx)(Le,{startTranslationHandler:async n=>{let a=n.target.classList.contains(`${e}-service-btn`)?n.target:n.target.closest(`.${e}-service-btn`);if(!a)return;const s=a.dataset&&a.dataset.service;t.updateProviderHandler(s)},imgFolder:n,prefix:e,localAiModalError:t.localAiModalError,errorModalHandler:t=>{o(t)}}),(0,r.jsx)(Ie,{setSettingVisibility:t.onCloseHandler,prefix:e})]})})})},Me=({onDestory:t,prefix:e,postIds:n})=>{const o=Te(),{languageObject:i={}}=lmatBulkTranslationGlobal||{},l=(0,s.__)("Please select at least one post for translation.","linguator-multilingual-ai-translation"),[c,u]=(0,a.useState)([]),[d,p]=(0,a.useState)(0===n.length?l:""),[g,f]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),_=ke(Vt).totalPosts,[y,b]=(0,a.useState)(!1),[v,x]=(0,a.useState)(!1),[w,j]=(0,a.useState)(!1),T=e=>{m(!1),f(!1),t(e)};(0,a.useEffect)(()=>{h||g||o(Lt())},[h,g,o]);const C=async()=>{if(0===c.length&&!g)return p((0,s.__)("Please select at least one language","linguator-multilingual-ai-translation")),void x(!0);f(t=>!t)};return(0,r.jsxs)("div",{id:`${e}-container`,className:(()=>{let t=[];return h&&t.push(`${e}-status-modal-active`),g&&t.push(`${e}-setting-modal-active`),_||g||!h||t.push(`${e}-empty-posts`),t.join(" ")})(),children:[g&&(0,r.jsx)(De,{postIds:n,prefix:e,onDestory:T,onCloseHandler:C,updateProviderHandler:t=>{o(Mt(t)),f(!1),m(!0)},localAiModalError:w}),h&&!g&&(y?(0,r.jsx)("div",{className:`${e}-skeleton-loader`}):(0,r.jsx)(Ne,{postIds:n,selectedLanguages:c,prefix:e,onDestory:T})),!h&&!g&&(0,r.jsxs)("div",{className:`${e}-language-container`,children:[(0,r.jsxs)("div",{className:`${e}-header`,children:[(0,r.jsx)("h2",{children:(0,s.__)("Step 1: Select Languages","linguator-multilingual-ai-translation")}),(0,r.jsx)("span",{className:"close",onClick:T,title:(0,s.__)("Close","linguator-multilingual-ai-translation"),children:"×"})]}),d&&""!==d?v?(0,r.jsx)($e,{message:d,onClose:t=>{x(!1)}}):(0,r.jsx)("div",{className:`${e}-error-message`,dangerouslySetInnerHTML:{__html:d}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:`${e}-body`,children:[(0,r.jsx)("div",{className:`${e}-languages`,children:Object.keys(i).map(t=>(0,r.jsx)("div",{className:`${e}-language`,children:(0,r.jsxs)("div",{title:n.length?i[t].name:l,children:[(0,r.jsx)("input",{type:"checkbox",name:"languages",id:t,value:t,onChange:t=>(t=>{const{value:e}=t.target,n=t.target.checked;u(n?[...c,e]:c.filter(t=>t!==e))})(t),disabled:!n.length,checked:c.includes(t)}),(0,r.jsxs)("label",{htmlFor:t,className:`${e}-language-label`,title:i[t].name,children:[(0,r.jsx)("img",{src:i[t].flag,alt:i[t].name}),"  ",i[t].name]})]})},t))}),(0,r.jsxs)("div",{className:`${e}-select-all-languages`,children:[(0,r.jsx)("input",{type:"checkbox",name:"select-all-languages",id:"select-all-languages",onChange:t=>(t=>{const e=t.target.checked;u(e?Object.keys(i):[])})(t),checked:c.length===Object.keys(i).length}),(0,r.jsx)("label",{htmlFor:"select-all-languages",children:c.length===Object.keys(i).length?(0,s.__)("Unselect All","linguator-multilingual-ai-translation"):(0,s.__)("Select All","linguator-multilingual-ai-translation")})]})]}),(0,r.jsxs)("div",{className:`${e}-footer`,children:[(0,r.jsx)("button",{className:`${e}-footer-button button button-primary`,onClick:T,title:n.length?"":l,children:(0,s.__)("Close","linguator-multilingual-ai-translation")}),(0,r.jsx)("button",{className:`${e}-footer-button button button-primary`,onClick:C,disabled:!n.length||!c.length,title:n.length?c.length?"":(0,s.__)("Please select at least one language","linguator-multilingual-ai-translation"):l,children:(0,s.__)("Translate","linguator-multilingual-ai-translation")})]})]})]})]})};(()=>{const t=t=>{const[e,n]=(0,a.useState)(!1),[s,o]=(0,a.useState)([]),i=t.prefix,l=(document.getElementById(`${i}-wrapper`),t=>{t.preventDefault();const e=document.querySelectorAll('table.widefat input[name="post[]"]:checked'),a=Array.from(e).map(t=>t.value);o(a),n(t=>!t);const s=document.querySelector('.skiptranslate iframe[id=":1.container"]');if(document.body.classList.remove(i+"-google-translate"),s){const t=s.contentDocument.querySelector('a[id=":1.close"][title="Close"] img');t&&t.click()}});return(0,a.useEffect)(()=>{const t=document.querySelectorAll(`.${i}-btn`);t&&t.forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),l(t)})})},[]),(0,a.useEffect)(()=>{const t=document.getElementById(`${i}-wrapper`);t&&t.classList.toggle(`${i}-active`,e)},[e]),e?(0,r.jsx)(Me,{onDestory:l,prefix:i,postIds:s}):null};window.addEventListener("load",async()=>{const e="lmat-bulk-translate";await new Promise(t=>setTimeout(t,500)),i.createRoot(document.getElementById(`${e}-wrapper`)).render((0,r.jsx)(ye,{store:Rt,children:(0,r.jsx)(t,{prefix:e})}))})})()})();