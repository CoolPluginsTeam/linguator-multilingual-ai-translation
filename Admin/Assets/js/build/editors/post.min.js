/*! For license information please see post.min.js.LICENSE.txt */
(()=>{"use strict";const e=window.wp.plugins,t=window.wp.i18n,n=window.wp.editPost,a=window.wp.components,l=window.wp.apiFetch,r=window.wp.element,i=window.wp.data,o=window.React,u=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},c=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),s=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var g={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const d=(0,o.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:l="",children:r,iconNode:i,...u},d)=>(0,o.createElement)("svg",{ref:d,...g,width:t,height:t,stroke:e,strokeWidth:a?24*Number(n)/Number(t):n,className:c("lucide",l),...!r&&!s(u)&&{"aria-hidden":"true"},...u},[...i.map(([e,t])=>(0,o.createElement)(e,t)),...Array.isArray(r)?r:[r]])),m=(e,t)=>{const n=(0,o.forwardRef)(({className:n,...a},l)=>{return(0,o.createElement)(d,{ref:l,iconNode:t,className:c(`lucide-${r=u(e),r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...a});var r});return n.displayName=u(e),n},f=m("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),p=m("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function v(){var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",l=n.toStringTag||"@@toStringTag";function r(n,a,l,r){var u=a&&a.prototype instanceof o?a:o,c=Object.create(u.prototype);return h(c,"_invoke",function(n,a,l){var r,o,u,c=0,s=l||[],g=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return r=t,o=0,u=e,d.n=n,i}};function m(n,a){for(o=n,u=a,t=0;!g&&c&&!l&&t<s.length;t++){var l,r=s[t],m=d.p,f=r[2];n>3?(l=f===a)&&(u=r[(o=r[4])?5:(o=3,3)],r[4]=r[5]=e):r[0]<=m&&((l=n<2&&m<r[1])?(o=0,d.v=a,d.n=r[1]):m<f&&(l=n<3||r[0]>a||a>f)&&(r[4]=n,r[5]=a,d.n=f,o=0))}if(l||n>1)return i;throw g=!0,a}return function(l,s,f){if(c>1)throw TypeError("Generator is already running");for(g&&1===s&&m(s,f),o=s,u=f;(t=o<2?e:u)||!g;){r||(o?o<3?(o>1&&(d.n=-1),m(o,u)):d.n=u:d.v=u);try{if(c=2,r){if(o||(l="next"),t=r[l]){if(!(t=t.call(r,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,o<2&&(o=0)}else 1===o&&(t=r.return)&&t.call(r),o<2&&(u=TypeError("The iterator does not provide a '"+l+"' method"),o=1);r=e}else if((t=(g=d.n<0)?u:n.call(a,d))!==i)break}catch(t){r=e,o=1,u=t}finally{c=1}}return{value:t,done:g}}}(n,l,r),!0),c}var i={};function o(){}function u(){}function c(){}t=Object.getPrototypeOf;var s=[][a]?t(t([][a]())):(h(t={},a,function(){return this}),t),g=c.prototype=o.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,h(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e}return u.prototype=c,h(g,"constructor",c),h(c,"constructor",u),u.displayName="GeneratorFunction",h(c,l,"GeneratorFunction"),h(g),h(g,l,"Generator"),h(g,a,function(){return this}),h(g,"toString",function(){return"[object Generator]"}),(v=function(){return{w:r,m:d}})()}function h(e,t,n,a){var l=Object.defineProperty;try{l({},"",{})}catch(e){l=0}h=function(e,t,n,a){if(t)l?l(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n;else{var r=function(t,n){h(e,t,function(e){return this._invoke(t,n,e)})};r("next",0),r("throw",1),r("return",2)}},h(e,t,n,a)}function y(e,t,n,a,l,r,i){try{var o=e[r](i),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(a,l)}function w(e){return function(){var t=this,n=arguments;return new Promise(function(a,l){var r=e.apply(t,n);function i(e){y(r,a,l,i,o,"next",e)}function o(e){y(r,a,l,i,o,"throw",e)}i(void 0)})}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,l,r,i,o=[],u=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=r.call(n)).done)&&(o.push(a.value),o.length!==t);u=!0);}catch(e){c=!0,l=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw l}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var E,R,k="lmat-post-sidebar",x=function(){try{if("undefined"!=typeof lmat_block_editor_plugin_settings)return lmat_block_editor_plugin_settings}catch(e){}return"undefined"!=typeof window&&window.lmat_block_editor_plugin_settings?window.lmat_block_editor_plugin_settings:{lang:null,translations_table:{}}},S=function(e){var n=e.lang,l=e.allLanguages,i=(0,r.useMemo)(function(){var e=[];return n&&e.push({label:n.name,value:n.slug,flag_url:n.flag_url}),Object.values(l).forEach(function(t){e.push({label:t.lang.name,value:t.lang.slug,flag_url:t.lang.flag_url})}),e},[n,l]);return React.createElement(a.PanelBody,{title:(0,t.__)("Language","linguator-multilingual-ai-translation"),initialOpen:!0},React.createElement(a.Flex,{align:"center"},React.createElement(a.FlexItem,null,null!=n&&n.flag_url?React.createElement("img",{src:n.flag_url,alt:(null==n?void 0:n.name)||"",className:"flag",style:{marginRight:8}}):null),React.createElement(a.FlexItem,{style:{flex:1}},React.createElement(a.SelectControl,{label:void 0,value:(null==n?void 0:n.slug)||"",onChange:function(e){if(e&&(!n||e!==n.slug)){var t=null==l?void 0:l[e];if(t&&t.links){var a=t.links.edit_link||t.links.add_link;a&&(window.location.href=a)}}},help:void 0,options:i.map(function(e){return{label:e.label,value:e.value}})}))))},C=function(e){var n=e.row,o=n.lang,u=n.translated_post,c=n.links,s=(null==u?void 0:u.title)||"",g=_((0,r.useState)(s),2),d=g[0],m=g[1],h=_((0,r.useState)(!1),2),y=h[0],b=h[1],E=_((0,r.useState)(""),2),R=E[0],k=E[1],x=_((0,r.useState)([]),2),S=x[0],C=x[1],O=_((0,r.useState)(!1),2),j=O[0],L=O[1],P=_((0,r.useState)([]),2),I=P[0],T=P[1],A=_((0,r.useState)(null),2),F=A[0],M=A[1],N=_((0,r.useState)(!1),2),z=N[0],B=N[1],D=!s,G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,n=(0,r.useRef)(null),a=(0,r.useRef)(e);a.current=e;var l=(0,r.useCallback)(function(){for(var e=arguments.length,l=new Array(e),r=0;r<e;r++)l[r]=arguments[r];n.current&&clearTimeout(n.current),n.current=setTimeout(function(){a.current.apply(a,l)},t)},[t]);return[l,(0,r.useCallback)(function(){n.current&&(clearTimeout(n.current),n.current=null)},[])]}(function(){var e=w(v().m(function e(n){var a;return v().w(function(e){for(;;)switch(e.n){case 0:if(a=(n||"").trim()){e.n=1;break}return e.a(2);case 1:return e.p=1,b(!0),k(""),e.n=2,l({path:"/lmat/v1/translation-title",method:"POST",data:{postId:(null==u?void 0:u.id)||null,lang:null==o?void 0:o.slug,title:a}});case 2:b(!1),e.n=4;break;case 3:e.p=3,e.v,b(!1),k((0,t.__)("Failed to save title. Please try again.","linguator-multilingual-ai-translation"));case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),2e3),W=(_(G,1)[0],!(null==c||!c.edit_link)),$=!(null==c||!c.add_link),U=(0,r.useCallback)(w(v().m(function e(){var t;return v().w(function(e){for(;;)switch(e.n){case 0:if(!(j||S.length>0)){e.n=1;break}return e.a(2);case 1:return e.p=1,L(!0),e.n=2,l({path:"/lmat/v1/languages/utils/get_all_pages_data"});case 2:t=e.v,C(Array.isArray(t)?t:[]),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,L(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])})),[j,S.length]),q=(0,r.useCallback)(function(e){var t=(e||"").trim().toLowerCase();return t?S.filter(function(e){var n,a=(null==e||null===(n=e.language)||void 0===n?void 0:n.slug)===(null==o?void 0:o.slug),l=!(null!=e&&e.is_linked),r=((null==e?void 0:e.title)||"").toLowerCase().includes(t)||((null==e?void 0:e.slug)||"").toLowerCase().includes(t);return a&&l&&r}).slice(0,10):[]},[S,null==o?void 0:o.slug]),H=function(){var e=w(v().m(function e(n){var a,r,u;return v().w(function(e){for(;;)switch(e.n){case 0:if(n.preventDefault(),F){e.n=1;break}return e.a(2);case 1:return e.p=1,B(!0),k(""),u=null===(a=(0,i.select)("core/editor"))||void 0===a||null===(r=a.getCurrentPostId)||void 0===r?void 0:r.call(a),e.n=2,l({path:"/lmat/v1/languages/link-translation",method:"POST",data:{source_id:u,target_id:F.ID,target_lang:null==o?void 0:o.slug}});case 2:window.location.reload(),e.n=4;break;case 3:e.p=3,e.v,k((0,t.__)("Failed to link page. Please try again.","linguator-multilingual-ai-translation"));case 4:return e.p=4,B(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(t){return e.apply(this,arguments)}}();return React.createElement("div",{style:{marginBottom:12}},React.createElement(a.Flex,{align:"center",style:{marginBottom:8,alignItems:"start"}},React.createElement(a.FlexItem,{style:{paddingTop:"8px"}},null!=o&&o.flag_url?React.createElement("img",{src:o.flag_url,alt:(null==o?void 0:o.name)||"",style:{width:18,height:12}}):null),React.createElement(a.FlexItem,{style:{flex:1,padding:"0px"}},React.createElement(a.TextControl,{value:d,onChange:function(e){m(e),M(null),D&&(e&&e.trim().length>1?0===S.length?U().then(function(){T(q(e))}):T(q(e)):T([]))},placeholder:(0,t.__)("title","linguator-multilingual-ai-translation"),readOnly:!D,disabled:!D,help:D?y?(0,t.__)("Saving…","linguator-multilingual-ai-translation"):(0,t.__)("Type a title to create/update this translation (auto-saves).","linguator-multilingual-ai-translation"):(0,t.__)("Existing title. Use the Edit button to modify content.","linguator-multilingual-ai-translation")})),React.createElement(a.FlexItem,{style:{paddingTop:"8px"}},W?React.createElement("a",{href:c.edit_link,"aria-label":(0,t.__)("Edit translation","linguator-multilingual-ai-translation"),style:{marginLeft:8,height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement(f,null)):null,!W&&(F?React.createElement("button",{onClick:H,"aria-label":(0,t.__)("Link existing page","linguator-multilingual-ai-translation"),style:{marginLeft:8,background:"transparent",border:0,padding:0,cursor:"pointer"}},React.createElement(p,null)):$?React.createElement("a",{href:c.add_link,"aria-label":(0,t.__)("Add translation","linguator-multilingual-ai-translation"),style:{marginLeft:8,height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement(p,null)):null),y||z?React.createElement(a.Spinner,{style:{marginLeft:8}}):null)),D&&I.length>0?React.createElement("div",{style:{marginTop:4}},I.map(function(e){return React.createElement("div",{key:e.ID,style:{padding:"4px 6px",cursor:"pointer",background:(null==F?void 0:F.ID)===e.ID?"#eef":"transparent"},onClick:function(){return M(e)},onMouseEnter:function(){return M(e)}},e.title," (",e.slug,")")})):null,R?React.createElement(a.Notice,{status:"error",isDismissible:!1},R):null)},O=function(e){var n=e.translations,l=Object.values(n);return React.createElement(a.PanelBody,{title:(0,t.__)("Translations","linguator-multilingual-ai-translation"),initialOpen:!0},l.map(function(e){return React.createElement(C,{key:e.lang.slug,row:e})}))},j=null!=(R=(null==(E=x())?void 0:E.lang)||null)&&R.flag_url?React.createElement("img",{src:R.flag_url,alt:(null==R?void 0:R.name)||"",style:{width:16,height:11}}):React.createElement("svg",{width:"16",height:"11",viewBox:"0 0 16 11"},React.createElement("rect",{width:"16",height:"11",fill:"#ddd"}));(0,e.registerPlugin)(k,{render:function(){var e=x(),a=(null==e?void 0:e.lang)||null,l=(null==e?void 0:e.translations_table)||{};return React.createElement(React.Fragment,null,React.createElement(n.PluginSidebarMoreMenuItem,{target:k},(0,t.__)("Linguator","linguator-multilingual-ai-translation")),React.createElement(n.PluginSidebar,{name:k,title:(0,t.__)("Languages","linguator-multilingual-ai-translation")},React.createElement(S,{lang:a,allLanguages:l}),React.createElement(O,{translations:l})))},icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},viewBox:"0 0 44 44",width:"20",height:"20"},React.createElement("path",{d:"M31.81 18.162v5.274c0 2.39-1.94 4.33-4.329 4.33H15.585a4.33 4.33 0 0 1-4.329-4.33v-5.274a4.33 4.33 0 0 1 4.329-4.329h11.896a4.33 4.33 0 0 1 4.329 4.329m-2.25 2.637a4.336 4.336 0 0 0-4.334-4.334H17.84a4.336 4.336 0 0 0-4.334 4.334 4.336 4.336 0 0 0 4.334 4.334h7.386a4.336 4.336 0 0 0 4.334-4.334"}),React.createElement("ellipse",{cx:"11.256",cy:"20.799",rx:"1.435",ry:"2.689"}),React.createElement("ellipse",{cx:"31.81",cy:"20.799",rx:"1.435",ry:"2.689"}),React.createElement("circle",{cx:"17.684",cy:"20.799",r:"2.258"}),React.createElement("circle",{cx:"25.382",cy:"20.799",r:"2.258"}),React.createElement("path",{d:"m21.854 10.289-1.402 5.157 1.366-.018 1.414-4.996z"}),React.createElement("path",{d:"M22.678 9.158a1.644 1.644 0 0 1 1.161 2.011 1.643 1.643 0 1 1-1.161-2.011"}),React.createElement("path",{d:"M27.347 42.27c-1.85.519-3.8.796-5.814.796C9.649 43.066 0 33.417 0 21.533S9.649 0 21.533 0s21.533 9.649 21.533 21.533c0 2.517-.433 4.934-1.228 7.181h-2.251a19.4 19.4 0 0 0 1.372-7.181c0-10.722-8.704-19.427-19.426-19.427S2.106 10.811 2.106 21.533s8.705 19.426 19.427 19.426c2.045 0 4.016-.316 5.868-.903z"}),React.createElement("path",{d:"M28.655 29.976h5.857a43 43 0 0 0-.589-1.765l2.144-.435q.526 1.395.799 2.2h5.339v1.892h-2.081q-1.058 3.181-3.048 5.374 2.159 1.492 5.325 2.277-1.163 1.416-1.541 2.06-3.202-1.072-5.437-2.831-2.25 1.696-5.521 2.915a22 22 0 0 0-1.402-2.032q3.147-.981 5.269-2.424-2.018-2.249-2.858-5.339h-2.256zm9.087 1.892h-4.666a9.9 9.9 0 0 0 2.34 3.973 9.6 9.6 0 0 0 2.326-3.973",style:{fillRule:"nonzero"}}))}),(0,e.registerPlugin)("lmat-flag-pin",{render:function(){var e=x(),a=(null==e?void 0:e.lang)||null;return React.createElement(React.Fragment,null,React.createElement(n.PluginSidebar,{name:"lmat-flag-pin",title:(0,t.__)("Language","linguator-multilingual-ai-translation")},React.createElement("div",{style:{padding:12}},null!=a&&a.flag_url?React.createElement("img",{src:a.flag_url,alt:(null==a?void 0:a.name)||"",style:{width:24,height:16,marginRight:8}}):null,React.createElement("div",null,(null==a?void 0:a.name)||""))))},icon:j})})();