(()=>{"use strict";var t=jQuery(".post_lang_choice"),a=function(){t.attr("data-old-value",t.children(":selected").first().val())};function e(){jQuery(".tr_lang").each(function(){var t=jQuery(this).attr("id").substring(8),a=jQuery(this).parent().parent().siblings(".lmat-edit-column");jQuery(this).autocomplete({minLength:0,source:ajaxurl+"?action=lmat_posts_not_translated&post_language="+jQuery(".post_lang_choice").val()+"&translation_language="+t+"&post_type="+jQuery("#post_type").val()+"&_lmat_nonce="+jQuery("#_lmat_nonce").val(),select:function(e,n){jQuery("#htr_lang_"+t).val(n.item.id),a.html(n.item.link)}}),jQuery(this).on("blur",function(){jQuery(this).val()||(jQuery("#htr_lang_"+t).val(0),a.html(a.siblings(".hidden").children().clone()))})})}jQuery(function(t){t.ajaxPrefilter(function(a,e,n){var l=t(".post_lang_choice").val();"string"==typeof a.data&&-1!==a.url.indexOf("action=ajax-tag-search")&&l&&(a.data="lang="+l+"&"+a.data)})}),jQuery(function(t){tagBox.get=function(a){var e=a.substr(a.indexOf("-")+1),n={action:"get-tagcloud",lang:t(".post_lang_choice").val(),tax:e};t.post(ajaxurl,n,function(n,l){0!=n&&"success"==l||(n=wpAjax.broken),n=t("<div />").addClass("the-tagcloud").attr("id","tagcloud-"+e).html(n),t("a",n).on("click",function(){return tagBox.flushTags(t(this).closest(".inside").children(".tagsdiv"),this),!1});var i=t("#tagcloud-"+e).css("display");i?(t("#tagcloud-"+e).replaceWith(n),t("#tagcloud-"+e).css("display",i)):t("#"+a).after(n)})}}),jQuery(function(l){var i=new Array;l(".categorydiv").each(function(){var t,a;(t=l(this).attr("id").split("-")).shift(),a=t.join("-"),i.push(a),l("#"+a+"-add-submit").before(l("<input />").attr("type","hidden").attr("id",a+"-lang").attr("name","term_lang_choice").attr("value",l(".post_lang_choice").val()))}),a(),l(".post_lang_choice").on("change",function(a){var n,o,s,r=function(){var a=wp.i18n.__,e=jQuery("<div/>",{id:"lmat-dialog",style:"display:none;"}).text(a("Are you sure you want to change the language of the current content?","linguator-multilingual-ai-translation"));t.after(e);var n=new Promise(function(n,l){var i=function(a){switch(a){case"yes":t.data("old-value",t.children(":selected").first().val()),n();break;case"no":t.val(t.data("old-value")),l("Cancel")}e.dialog("close")},o={autoOpen:!1,modal:!0,draggable:!1,resizable:!1,title:a("Change language","linguator-multilingual-ai-translation"),minWidth:600,maxWidth:"100%",open:function(t,a){jQuery("body").hasClass("rtl")&&jQuery(this).parent().css({right:jQuery(this).parent().css("left"),left:"auto"})},close:function(t,a){i("no")},buttons:[{text:a("OK","linguator-multilingual-ai-translation"),click:function(t){i("yes")}},{text:a("Cancel","linguator-multilingual-ai-translation"),click:function(t){i("no")}}]};Object.assign(o,{classes:{"ui-dialog":"lmat-confirmation-modal"}}),e.dialog(o)});return{dialogContainer:e,dialogResult:n}}(),c=r.dialogContainer,u=r.dialogResult,d=a.target;l(this).data("old-value")!==d.value&&(n=l("input#title").val(),o=l("textarea#content").val(),s=l("textarea#excerpt").val(),n||o||s)?c.dialog("open"):u=Promise.resolve(),u.then(function(){var t={action:"lmat_post_lang_choice",lang:d.value,post_type:l("#post_type").val(),taxonomies:i,post_id:l("#post_ID").val(),_lmat_nonce:l("#_lmat_nonce").val()};l.post(ajaxurl,t,function(t){var a=wpAjax.parseAjaxResponse(t,"lmat-ajax-response");l.each(a.responses,function(){switch(this.what){case"translations":l(".translations").html(this.data),e();break;case"taxonomy":var t=this.data;l("#"+t+"checklist").html(this.supplemental.all),l("#"+t+"checklist-pop").html(this.supplemental.populars),l("#new"+t+"_parent").replaceWith(this.supplemental.dropdown),l("#"+t+"-lang").val(l(".post_lang_choice").val());break;case"pages":l("#parent_id").html(this.data);break;case"flag":l(".lmat-select-flag").html(this.data);break;case"permalink":var a=l("#edit-slug-box");"-1"!=this.data&&a.children().length&&a.html(this.data)}});var n=new CustomEvent("onPostLangChoice",{detail:{lang:JSON.parse(d.options[d.options.selectedIndex].getAttribute("data-lang"))}});document.dispatchEvent(n)})},function(){})}),document.addEventListener("onPostLangChoice",function(t){a(),l(".tagcloud-link").each(function(){var t=l(this).attr("id");tagBox.get(t)});var e=t.detail.lang.is_rtl?"rtl":"ltr";l("body").removeClass("lmat-dir-rtl").removeClass("lmat-dir-ltr").addClass("lmat-dir-"+e),l("#content_ifr").contents().find("html").attr("lang",t.detail.lang.locale).attr("dir",e),l("#content_ifr").contents().find("body").attr("dir",e),n.media.resetAllAttachmentsCollections()}),e()});var n=window.lmat||{};_.extend(n,{media:{}});var l=_.extend(n.media,{attachmentsCollections:[],query:function(t){var a=n.media.query.delegate(t);return n.media.attachmentsCollections.push(a),a},resetAllAttachmentsCollections:function(){this.attachmentsCollections.forEach(function(t){t.reset(),t.mirroring&&(t.mirroring._hasMore=!0,t.mirroring.reset())})}});"undefined"!=typeof wp&&void 0!==wp.media&&(l.query=_.extend(l.query,{delegate:wp.media.query}),wp.media.query=l.query)})();